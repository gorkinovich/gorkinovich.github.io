<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Erlang</title>
  <link rel="stylesheet" href="style.css" />
  <script type="text/javascript" src="util.js"></script>
  <script>LoadTableOfContents([]);</script>

  <meta name="author" content="Gorka Suárez García" lang="es">
  <meta name="copyright" content="© 2021-2023 Gorka Suárez García" lang="es">
  <meta name="description" content="Erlang: Apuntes de programación" lang="es">
  <meta name="keywords" content="Erlang,OTP,programación,manuales" lang="es">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@gorkinovich">
  <meta name="twitter:creator" content="@gorkinovich">
  <meta name="twitter:title" content="Erlang: Apuntes de programación">
  <meta name="twitter:description" content="Apuntes de programación de Erlang/OTP.">
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div id="TableOfContents" class="stackedit__toc">
      
<ul>
<li><a href="#erlang">Erlang</a>
<ul>
<li><a href="#primeros-pasos">Primeros pasos</a></li>
<li><a href="#constantes">Constantes</a></li>
<li><a href="#variables-inmutables">Variables inmutables</a></li>
<li><a href="#estructuras-de-datos">Estructuras de datos</a></li>
<li><a href="#operadores">Operadores</a></li>
<li><a href="#encaje-de-patrones">Encaje de patrones</a></li>
<li><a href="#secuencias-intensionales">Secuencias intensionales</a></li>
<li><a href="#funciones">Funciones</a></li>
<li><a href="#control-de-la-ejecución">Control de la ejecución</a></li>
<li><a href="#errores-y-excepciones">Errores y excepciones</a></li>
<li><a href="#módulos">Módulos</a></li>
<li><a href="#procesos-y-comunicación">Procesos y comunicación</a></li>
<li><a href="#comportamientos">Comportamientos</a></li>
<li><a href="#la-biblioteca-estándar">La biblioteca estándar</a></li>
</ul>
</li>
<!-- <li><a href="index.html">Volver</a></li> -->
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="erlang">Erlang</h1>
<p><a href="https://www.erlang.org/">Erlang</a> es un lenguaje de programación diseñado para desarrollar sistemas de comunicación grandes en tiempo real con alta disponibilidad, que sean escalables y tolerantes a fallos. Es un lenguaje de <a href="https://es.wikipedia.org/wiki/Programaci%C3%B3n_funcional">programación funcional</a>, cuya característica principal es disponer de <a href="https://es.wikipedia.org/wiki/Concurrencia_%28inform%C3%A1tica%29">concurrencia</a>. Otras propiedades del lenguaje son la <a href="https://es.wikipedia.org/wiki/Objeto_inmutable">inmutabilidad</a> de los datos, el <a href="https://es.wikipedia.org/wiki/B%C3%BAsqueda_de_patrones">encaje de patrones</a>, la evaluación impaciente, el <a href="https://es.wikipedia.org/wiki/Sistema_de_tipos">tipado dinámico</a>, la <a href="https://es.wikipedia.org/wiki/Computaci%C3%B3n_distribuida">computación distribuida</a> o el <a href="https://es.wikipedia.org/wiki/Cambio_en_caliente">cambio en caliente</a>, entre muchas otras.</p>
<p>Recomiendo leer el libro <a href="https://learnyousomeerlang.com/">Learn You Some Erlang</a>, que recoge con bastante acierto las principales herramientas de las que dispone el lenguaje. El IDE que recomiendo es el <a href="https://www.jetbrains.com/es-es/idea/">IntelliJ IDEA</a>, que tiene la versión <em>Community</em> que es gratuita y permite instalar un plugin para trabajar con Erlang. Por último, estos apuntes han sido probados en la versión 23 de Erlang/OTP, aunque deberían funcionar la mayoría de los ejemplos con las versiones posteriores.</p>
<h2 id="primeros-pasos">Primeros pasos</h2>
<p>Los programas en Erlang se dividen en <strong>módulos</strong>, ficheros con la extensión <code>.erl</code>, que contienen conjuntos de <strong>funciones</strong>. También existen ficheros de <strong>cabecera</strong>, con la extensión <code>.hrl</code>, para incluir <strong>macros</strong> en diferentes módulos.</p>
<p>Una vez codificados los <strong>módulos</strong> del programa, estos son <strong>compilados</strong> a ficheros <code>.beam</code> para convertir el código fuente del programa al <strong>byte code</strong> que será <strong>ejecutado</strong> por la <strong>máquina virtual</strong> de Erlang.</p>
<p>Para compilar y ejecutar programas necesitamos entrar en la <strong>terminal</strong> de Erlang, con los comandos <a href="https://www.erlang.org/doc/man/erl.html"><code>erl</code></a> y <a href="https://www.erlang.org/doc/man/werl.html"><code>werl</code></a>. El primero ejecuta Erlang desde la consola del sistema y el segundo lo hace desde una ventana de la interfaz gráfica del sistema operativo.</p>
<p>Dentro de la terminal existe una lista de comandos del <a href="https://www.erlang.org/doc/man/c.html">sistema</a> y de la <a href="https://www.erlang.org/doc/man/shell.html">terminal</a> para poder trabajar. Aquí destacamos una lista de los más fundamentales para el día a día:</p>

<table>
<thead>
<tr>
<th align="center">Comando</th>
<th>Descripción</th>
<th align="center">Parámetros</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>c(M)</code></td>
<td>Compilar un módulo</td>
<td align="center"><code>M</code>: Nombre del módulo</td>
</tr>
<tr>
<td align="center"><code>l(M)</code></td>
<td>Cargar un módulo</td>
<td align="center"><code>M</code>: Nombre del módulo</td>
</tr>
<tr>
<td align="center"><code>cd(D)</code></td>
<td>Cambia de directorio</td>
<td align="center"><code>D</code>: Ruta del directorio</td>
</tr>
<tr>
<td align="center"><code>pwd()</code></td>
<td>Muestra el directorio actual</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>f()</code></td>
<td>Libera las variables asignadas</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>q()</code></td>
<td>Cierra la terminal</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>help()</code></td>
<td>Muestra la ayuda de la terminal</td>
<td align="center"></td>
</tr>
</tbody>
</table><p>Podemos también <strong>compilar</strong> un módulo con el comando <a href="https://www.erlang.org/doc/man/erlc.html"><code>erlc</code></a>, de cara a automatizar la compilación de un proyecto mediante scripts.</p>
<p>Como ejemplo inicial vamos a realizar el clásico hola mundo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token comment">% hello.erl</span>
<span class="token operator">-</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token atom">hello</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token atom">world</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Hello, world!~n"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Los <strong>comentarios</strong> en Erlang se escriben usando <code>%</code>, como muestra la primera línea del ejemplo. Un <strong>módulo</strong> está compuesto por una serie de <strong>definiciones</strong> que terminan con un <strong>punto</strong>. Las definiciones pueden ser <strong>atributos</strong> o <strong>funciones</strong>. Los atributos describen propiedades del módulo, que pueden ser consultadas por la máquina virtual. En el ejemplo tenemos dos: el nombre del módulo con <code>-module</code> y las funciones públicas del mismo con <code>-export</code>. Estos dos atributos son los mínimos que necesitamos para construir un módulo y hay que tener en cuenta que el nombre del módulo y del fichero tienen que ser el mismo. Después de los atributos viene la función <code>world</code> que no tiene parámetros e invoca la función <code>format</code> del módulo <code>io</code>, que muestra una cadena de texto en la consola del sistema.</p>
<p>Con esto tenemos entonces nuestro fichero <code>hello.erl</code>, que contiene el módulo <code>hello</code>. Para compilarlo podemos utilizar <code>erlc</code> de la siguiente manera:</p>
<pre><code>erlc hello.erl
</code></pre>
<p>Esto compila el módulo <code>hello</code> y genera un fichero <code>hello.beam</code> dentro del mismo directorio que contiene a <code>hello.erl</code>. Si queremos compilar el módulo desde la terminal de Erlang, tenemos que ejecutar el comando <code>erl</code> y dentro de la terminal usar los comandos:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">c</span><span class="token punctuation">(</span><span class="token atom">hello</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">l</span><span class="token punctuation">(</span><span class="token atom">hello</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>El primero compila el módulo <code>hello</code> y el segundo carga el módulo en la máquina virtual, siempre y cuando se haya generado el fichero <code>.beam</code> correspondiente. Si estamos muy seguros, de que se va a compilar sin problemas, podemos también usar:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">c</span><span class="token punctuation">(</span><span class="token atom">hello</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">l</span><span class="token punctuation">(</span><span class="token atom">hello</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Una vez está cargado el módulo en la máquina virtual, ejecutamos el programa con:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token atom">hello</span><span class="token punctuation">:</span><span class="token function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Para ejecutarlo desde la consola del sistema directamente, como si fuera un programa normal, usaríamos <code>erl</code> de la siguiente manera:</p>
<pre><code>erl -eval hello:world(). -s init stop -noshell
</code></pre>
<p>Esto arranca la máquina virtual sin usar la terminal, para evaluar la expresión <code>hello:world().</code> mediante la opción <code>-eval</code> y después ejecuta la función <code>init:stop()</code>, que finaliza la ejecución del entorno de ejecución.</p>
<p>Esta forma de trabajar hace que los ficheros <code>.beam</code> terminen en el mismo directorio que nuestro código, por lo que sería buena idea tener un directorio de salida para la compilación. Para ello tenemos que utilizar la opción <code>-o</code> con <code>erlc</code> y <code>-pa</code> con <code>erl</code>:</p>
<pre><code>erlc -o Release Source/hello.erl
erl.exe -pa Release -eval hello:world(). -s init stop -noshell
</code></pre>
<p>Este escenario presupone que tenemos un directorio <code>Release</code> para el resultado de la compilación y <code>Source</code> para el código fuente del programa. Entonces, tras compilar <code>hello.erl</code>, se genera <code>hello.beam</code> en el directorio <code>Release</code> y es ejecutado con gracias a que hemos indicado a la máquina virtual un directorio adicional en el que buscar ficheros <code>.beam</code>.</p>
<p>En Erlang podemos tener secuencias de expresiones separadas por <strong>comas</strong>, que terminarán en un <strong>punto</strong> para cerrar la definición dentro del módulo. Por ejemplo, la siguiente función:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">hi_bye</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Hello~n"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Goodbye~n"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>También dentro de la terminal se puede introducir una secuencia de expresiones, como hemos visto antes para compilar y cargar un módulo. Tomando el último ejemplo:</p>
<pre><code>1&gt; io:format("Hello~n"), io:format("Goodbye~n").
Hello
Goodbye
ok
</code></pre>
<p>Para este ejemplo mostramos la salida por pantalla de la terminal, viendo que nos muestra el texto que queremos enviar a la salida de la consola, y podemos observar que termina con un <code>ok</code>, que es el valor que devuelve la función <code>io:format</code> al terminar.</p>
<blockquote>
<p>La notación que utiliza la biblioteca estándar de Erlang/OTP para los nombres de módulos y funciones es de tipo <a href="https://en.wikipedia.org/wiki/Snake_case">snake case</a>, es decir, que las palabras se separan con un guion bajo para que sea el nombre más legible.</p>
</blockquote>
<h2 id="constantes">Constantes</h2>
<h3 id="números">Números</h3>
<p>La sintaxis para definir <strong>números enteros</strong> es la siguiente:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">+</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">-</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow><mtext mathvariant="monospace">#</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow></mrow><annotation encoding="application/x-tex">\textcolor{red}{[}\texttt{+}\textcolor{red}{|}\texttt{-}\textcolor{red}{]} \textcolor{red}{[}\mathit{base}\texttt{\char35}\textcolor{red}{]} \mathit{d\acute{\imath}gitos}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">+</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">-</span></span><span class="mclose" style="color: red;">]</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">base</span></span><span class="mord text"><span class="mord texttt">#</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span></span></span></span></span></span></p>
<p>La base puede ser un valor dentro del intervalo <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>36</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2,36]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">36</span><span class="mclose">]</span></span></span></span></span> y por defecto es <code>10</code>. Por ejemplo: <code>4</code>, <code>8</code>, <code>15</code>, <code>2#10000</code>, <code>8#27</code>, <code>16#2A</code>.</p>
<p>También podemos definir <strong>números reales</strong> o de <strong>coma flotante</strong>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">+</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">-</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mtext mathvariant="monospace">.</mtext><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mstyle mathcolor="red"><mi mathvariant="normal">{</mi></mstyle><mtext mathvariant="monospace">e</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">E</mtext><mstyle mathcolor="red"><mi mathvariant="normal">}</mi></mstyle><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">+</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">-</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \texttt{+} \textcolor{red}{|} \texttt{-} \textcolor{red}{]} \mathit{d\acute{\imath}gitos} \texttt{.} \mathit{d\acute{\imath}gitos} \textcolor{red}{[} \textcolor{red}{\char123} \texttt{e} \textcolor{red}{|} \texttt{E} \textcolor{red}{\char125} \textcolor{red}{[} \texttt{+} \textcolor{red}{|} \texttt{-} \textcolor{red}{]} \mathit{d\acute{\imath}gitos} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">+</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">-</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span><span class="mord text"><span class="mord texttt">.</span></span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span><span class="mopen" style="color: red;">[</span><span class="mord" style="color: red;">{</span><span class="mord text"><span class="mord texttt">e</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">E</span></span><span class="mord" style="color: red;">}</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">+</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">-</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Por ejemplo: <code>0.64341054629</code>, <code>2.718281828459045</code>, <code>3.141592653589793</code>.</p>
<p>Enteros y reales tienen una representación interna en Erlang distinta, por ello a la hora de realizar una operación matemática, si fuera necesario, la máquina virtual transforma un valor entero en uno real automáticamente.</p>
<blockquote>
<p>La sintaxis de Erlang permite usar el símbolo <code>_</code> como separador visual entre los dígitos de un número, de modo que se puede usar como separador de millares. Por ejemplo: <code>1_234</code> o <code>1_2_3</code>. Al ser un elemento meramente estético, son eliminados a la hora de evaluar la expresión numérica.</p>
</blockquote>
<h3 id="átomos">Átomos</h3>
<p>Los átomos son <strong>valores</strong> literales representados por un <strong>nombre</strong>. Para definirlos hay dos maneras. La primera es aquellas cadenas compuestas por letras, números, el guion bajo (<code>_</code>) y la arroba (<code>@</code>), que empiezan por una letra minúscula. La segunda es aquellas cadenas delimitadas por comillas simples (<code>'</code>), que contienen cualquier cadena de texto. Por motivos obvios, la segunda forma no puede contener una comilla simple, salvo que vaya precedida que la barra invertida, es decir: <code>\'</code>. Por ejemplo: <code>plastic_love</code>, <code>'Mariya Takeuchi'</code>.</p>
<p>Como curiosidad, para representar valores <strong>booleanos</strong> se utilizan los átomos <code>true</code> y <code>false</code>.</p>
<blockquote>
<p>Existen algunas palabras claves reservadas del lenguaje que no pueden ser utilizadas como átomos: <code>after</code>, <code>and</code>, <code>andalso</code>, <code>band</code>, <code>begin</code>, <code>bnot</code>, <code>bor</code>, <code>bsl</code>, <code>bsr</code>, <code>bxor</code>, <code>case</code>, <code>catch</code>, <code>cond</code>, <code>div</code>, <code>end</code>, <code>fun</code>, <code>if</code>, <code>let</code>, <code>not</code>, <code>of</code>, <code>or</code>, <code>orelse</code>, <code>query</code>, <code>receive</code>, <code>rem</code>, <code>try</code>, <code>when</code>, <code>xor</code>.</p>
</blockquote>
<h3 id="texto">Texto</h3>
<p>Se puede utilizar caracteres y cadenas de texto en Erlang como valores literales. Para los <strong>caracteres</strong> hay que utilizar el símbolo <code>$</code> seguido de la letra en cuestión. Para las <strong>cadenas</strong> hay que delimitarlas con las comillas dobles (<code>"</code>). Por ejemplo: <code>$ñ</code>, <code>"La letra eñe."</code>.</p>
<p>Realmente, como pasa en tantos otros lenguajes, la representación de cada letra es un valor numérico y por extensión el de una cadena es una lista de números. Es decir, que esta sintaxis es azúcar sintáctico, pero no por ello deja de ser útil su uso.</p>
<blockquote>
<p>Se puede dividir la definición de una cadena en varios segmentos si es necesario, sin que ello altere el resultado final. Por lo tanto, es lo mismo la cadena <code>"abcdefgh"</code> que la cadena <code>"abcd" "efgh"</code>.</p>
</blockquote>
<h2 id="variables-inmutables">Variables inmutables</h2>
<p>Las variables son <strong>valores asociados</strong> a un <strong>nombre identificador</strong>. Para definir un nombre de variable, se necesita una cadena compuesta por una serie de letras, números, guiones bajos (<code>_</code>) y/o arrobas (<code>@</code>), que empieza por una letra mayúscula o un guion bajo. A diferencia de los átomos, que son valores por sí mismos, las variables necesitan ser inicializadas. Una de las formas posibles es utilizar el operador igual (<code>=</code>) de la siguiente manera:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token variable">Year</span> <span class="token operator">=</span> <span class="token number">1984</span><span class="token punctuation">,</span>
<span class="token variable">Name</span> <span class="token operator">=</span> <span class="token atom">george_orwell</span><span class="token punctuation">.</span>
</code></pre>
<p>Otra de las formas, para asignar valores a una variable, es invocar una función con una serie de valores utilizados como argumentos de la aplicación de dicha función. Al invocarla, los valores de los argumentos son asignados a las variables que conforman los parámetros de la función.</p>
<p>Hay que tener en cuenta, que una vez que se asigna un valor a cualquier variable, no se puede volver a asignar otro valor nuevo a la misma, ya que estas son <strong>inmutables</strong>. De modo que lo siguiente daría un fallo en ejecución:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token variable">N</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token variable">N</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">.</span>
</code></pre>
<p>Es común en lenguajes funcionales que el operador igual no es un operador de asignación, sino de igualdad matemática. Al evaluar el primer uso, <code>N = 1</code>, al no estar inicializada la variable <code>N</code> se asume que su valor ha de ser <code>1</code>. Pero al evaluar el segundo uso, <code>N = 2</code>, la variable ya está inicializada y es falsa la igualdad, por lo tanto nuestro programa fallará.</p>
<p>Manejar variables inmutables puede parecer al principio un escollo insalvable, pero ya iremos viendo cómo superar esta aparente dificultad, con el uso de funciones recursivas.</p>
<blockquote>
<p>El guion bajo a solas (<code>_</code>) es una variable especial que se utiliza en el lenguaje para cuando no nos interesa el valor que tiene asignado. Internamente, al compilarlo, genera una variable fresca para evitar la colisión de nombres entre las diferentes apariciones de esta variable comodín.</p>
</blockquote>
<h2 id="estructuras-de-datos">Estructuras de datos</h2>
<h3 id="tuplas">Tuplas</h3>
<p>Las tuplas son estructuras de datos que agrupan información de forma ordenada con un tamaño fijo. Siguen la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">{</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char123} \textcolor{red}{[} \mathit{expresi\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{expresi\acute{o}n_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">{</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>Por ejemplo: <code>{}</code>, <code>{0, a}</code>, <code>{{data, 3.14}, Foo, {}, 8}</code>.</p>
<h3 id="listas">Listas</h3>
<p>Las listas son estructuras de datos que agrupan información de forma ordenada con un tamaño variable. Su sintaxis es la siguiente:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">[</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">|</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">2</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">]</mtext></mrow><annotation encoding="application/x-tex">\texttt{[} \textcolor{red}{[} \mathit{expresi\acute{o}n_1}  \texttt{|} \mathit{expresi\acute{o}n_2} \textcolor{red}{]} \texttt{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">[</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">|</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">]</span></span></span></span></span></span></span></p>
<p>Este es el constructor de listas, que podemos hacer una lista vacía con <code>[]</code>, o podemos hacer una lista no vacía donde la primera expresión es el valor en la <strong>cabecera</strong> de dicha lista y la segunda la <strong>continuación</strong>. Por ejemplo: <code>[1, [2 | []]]</code>, que es la lista con los valores <code>1</code> y <code>2</code> en orden. La continuación, también denominada <strong>cola</strong> de la lista, puede ser cualquier valor posible, por lo que podemos tener una lista tal que: <code>[z | 80]</code>.</p>
<blockquote>
<p>Que la cola pueda ser cualquier valor puede provocar que la terminación de la lista no sea una lista vacía, en cuyo caso se le denomina como <strong>lista impropia</strong>, frente a las <strong>listas propias</strong>. Esta distinción es importante a la hora de analizar el tipo de una expresión, pues hay funciones que sólo funcionan con listas propias, por lo que fallarían al recibir una impropia ya que nunca llegarían a la condición final de parar con la lista vacía.</p>
</blockquote>
<p>A diferencia de los lenguajes fuertemente tipados, como es el caso de <a href="https://www.haskell.org/">Haskell</a>, las listas en Erlang pueden ser heterogéneas en relación a los tipos de los valores que contiene, gracias a su naturaleza de lenguaje con tipado dinámico.</p>
<p>Como definir listas más complejas, con el constructor de listas, puede llegar a ser costoso y confuso, existe una sintaxis alternativa para definir listas:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">[</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">]</mtext></mrow><annotation encoding="application/x-tex">\texttt{[} \textcolor{red}{[} \mathit{expresi\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{expresi\acute{o}n_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">[</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">]</span></span></span></span></span></span></span></p>
<p>De este modo, la lista <code>[1, [2 | []]]</code> se puede definir como <code>[1, 2]</code>, siendo más legible para el programador. Internamente, para la máquina virtual, son la misma cosa porque esta forma de sintaxis es azúcar sintáctico.</p>
<p>Dentro de la biblioteca estándar existe el módulo <a href="https://www.erlang.org/doc/man/lists.html"><code>lists</code></a>, con una buena colección de funciones que permiten consultar y transformar listas, algunas de ellas bastante avanzadas.</p>
<h3 id="mapas">Mapas</h3>
<p>Los mapas son estructuras de datos que relacionan una clave con un valor. Aunque también se le conoce como diccionarios en otros lenguajes, la <a href="https://www.erlang.org/doc/man/stdlib_app">biblioteca estándar</a> de Erlang tiene otro tipo de estructura nativa que se llama diccionario (módulo <code>dict</code>), por lo que usaremos el término mapa para evitar confusiones innecesarias. Los mapas se añadieron como sustitución de los diccionarios implementados, para corregir algunas carencias que tenía el lenguaje.</p>
<p>La sintaxis para crear un mapa es la siguiente:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">#{</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>v</mi><msub><mi>e</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">=&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><msub><mi>r</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>v</mi><msub><mi>e</mi><mi>n</mi></msub></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">=&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><msub><mi>r</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char35\char123} \textcolor{red}{[} \mathit{clave_1}\ \texttt{=&gt;}\ \mathit{valor_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{clave_n}\ \texttt{=&gt;}\ \mathit{valor_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">#{</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">clav</span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">=&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">valo</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">clav</span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">=&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">valo</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>Tanto las claves, como los valores, pueden ser de cualquier tipo. Para actualizar un mapa previo, usaremos esta sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>m</mi><mi>a</mi><mi>p</mi><mi>a</mi></mrow><mtext mathvariant="monospace">#{</mtext><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>v</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">=&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><mi>r</mi></mrow><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\mathit{mapa}\texttt{\char35\char123} \mathit{clave}\ \texttt{=&gt;}\ \mathit{valor} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">mapa</span></span><span class="mord text"><span class="mord texttt">#{</span></span><span class="mord"><span class="mord mathit">clave</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">=&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">valor</span></span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>De este modo se devuelve un nuevo mapa, donde se asigna un valor a la clave indicada, existiera esta previamente o no. Existe otra variante para actualizar un mapa previo con:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>m</mi><mi>a</mi><mi>p</mi><mi>a</mi></mrow><mtext mathvariant="monospace">#{</mtext><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>v</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">:=</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><mi>r</mi></mrow><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\mathit{mapa}\texttt{\char35\char123} \mathit{clave}\ \texttt{:=}\ \mathit{valor} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">mapa</span></span><span class="mord text"><span class="mord texttt">#{</span></span><span class="mord"><span class="mord mathit">clave</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">:=</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">valor</span></span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>Con esta versión, si la clave no existe previamente, no se actualizará el contenido del nuevo mapa creado y será simplemente una copia idéntica del mapa que hemos intentado modificar.</p>
<p>El módulo <a href="https://www.erlang.org/doc/man/maps.html"><code>maps</code></a> contiene una serie de funciones que permite trabajar con mapas, para poder consultar su contenido o realizar transformaciones avanzadas.</p>
<h3 id="bloques-binarios">Bloques binarios</h3>
<p>Debido a que Erlang fue diseñado para construir sistemas de telecomunicaciones, existía la necesidad de tener las herramientas para poder procesar protocolos e información a nivel de bytes e incluso de bits. Para ello se tiene en Erlang la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">&lt;&lt;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>s</mi><mi>e</mi><mi>g</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><msub><mi>o</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>s</mi><mi>e</mi><mi>g</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><msub><mi>o</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">&gt;&gt;</mtext></mrow><annotation encoding="application/x-tex">\texttt{&lt;&lt;} \textcolor{red}{[} \mathit{segmento_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{segmento_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{&gt;&gt;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">&lt;&lt;</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">segment</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">segment</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">&gt;&gt;</span></span></span></span></span></span></span></p>
<p>Los <em>segmentos</em> tienen la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">:</mtext><mrow><mi>t</mi><mi>a</mi><mi>m</mi><mi>a</mi><mover accent="true"><mi>n</mi><mo>~</mo></mover><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">/</mtext><mrow><mi>d</mi><mi>e</mi><mi>s</mi><mi>c</mi><mi>r</mi><mi>i</mi><mi>p</mi><mi>t</mi><mi>o</mi><mi>r</mi><mi>e</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\mathit{dato} \textcolor{red}{[} \texttt{:} \mathit{tamaño} \textcolor{red}{]} \textcolor{red}{[} \texttt{/} \mathit{descriptores} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">dato</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">:</span></span><span class="mord"><span class="mord mathit">tama</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">n</span></span><span class="" style="top: -3.35em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">~</span></span></span></span></span></span></span><span class="mord mathit">o</span></span><span class="mclose" style="color: red;">]</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">/</span></span><span class="mord"><span class="mord mathit">descriptores</span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Los <em>descriptores</em> es una lista de propiedades que definen al <em>dato</em> y que se separan con guiones (<code>-</code>). Los <em>descriptores</em> disponibles son:</p>

<table>
<thead>
<tr>
<th align="center">Categoría</th>
<th align="center">Valores</th>
<th align="center">Defecto</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Tipo</td>
<td align="center"><code>integer</code>, <code>float</code>, <code>binary</code>, <code>bytes</code>, <code>bitstring</code>, <code>bits</code>, <code>utf8</code>, <code>utf16</code>, <code>utf32</code></td>
<td align="center"><code>integer</code></td>
<td align="left">Tipo del dato del segmento. El valor <code>bytes</code> equivale a <code>binary</code> y el valor <code>bits</code> a <code>bitstring</code>.</td>
</tr>
<tr>
<td align="center">Signo</td>
<td align="center"><code>signed</code>, <code>unsigned</code></td>
<td align="center"><code>unsigned</code></td>
<td align="left">Esta propiedad sólo importa cuando el tipo es <code>integer</code>, para indicar si tiene signo o no su formato.</td>
</tr>
<tr>
<td align="center">Orden</td>
<td align="center"><code>big</code>, <code>little</code>, <code>native</code></td>
<td align="center"><code>big</code></td>
<td align="left">Indica cómo están <a href="https://es.wikipedia.org/wiki/Endianness">orientados los bytes</a>, si se trata de una arquitectura <em>big-endian</em> o <em>little-endian</em>. Esta propiedad solamente es relevante para los tipos <code>integer</code>, <code>float</code>, <code>utf16</code> y <code>utf32</code>.</td>
</tr>
<tr>
<td align="center">Unidad</td>
<td align="center"><code>unit:Literal</code> (Literal = <code>1</code>..<code>256</code>)</td>
<td align="center"><code>1</code> (<code>integer</code>, <code>float</code>,<code>bitstring</code>)<br><code>8</code> (<code>binary</code>)</td>
<td align="left">Indica el número de bits que se va a usar como unidad al definir el <em>tamaño</em> del segmento. Con los tipos <code>utf8</code>, <code>utf16</code> y <code>utf32</code> no se indica unidad alguna.</td>
</tr>
</tbody>
</table><p>El <em>dato</em> dependerá del tipo indicado en el <em>descriptor</em> y podremos usar números, cadenas de texto o bloques binarios, siempre y cuando se indique el tipo adecuado, de lo contrario obtendremos un error.</p>
<p>El <em>tamaño</em>, dentro del <em>segmento</em>, indica en número de unidades el espacio que ocupa. Por ejemplo, si se trata de un <em>dato</em> de tipo <code>integer</code> y el tamaño es <code>16</code>, como por defecto la unidad de 1 bit, el tamaño final del segmento son 16 bits. Si no se indica el <em>tamaño</em>, por defecto será de <code>8</code> unidades cuando sea un <code>integer</code>, de <code>64</code> unidades para <code>float</code>, y en el caso de <code>binary</code> y <code>bitstring</code> se tomará el resto del bloque como tamaño.</p>
<blockquote>
<p>La única diferencia relevante entre el tipo <code>binary</code> y <code>bitstring</code>, es que el primero por defecto maneja unidades de 8 bits, mientras que el segundo maneja unidades de 1 bit, por ello con <code>binary</code> es requisito que la información que se vaya a definir o encajar sea múltiplo de 8.</p>
</blockquote>
<p>Veamos algunos ejemplos:</p>
<pre><code>1&gt; &lt;&lt;_,A/binary&gt;&gt; = &lt;&lt;1, 2, 257:16&gt;&gt;.
&lt;&lt;1,2,1,1&gt;&gt;
2&gt; A.
&lt;&lt;2,1,1&gt;&gt;
3&gt; &lt;&lt;_,B/bitstring&gt;&gt; = &lt;&lt;1, 2, 257:12&gt;&gt;.
&lt;&lt;1,2,16,1:4&gt;&gt;
4&gt; B.
&lt;&lt;2,16,1:4&gt;&gt;
5&gt; &lt;&lt;C,D&gt;&gt; = &lt;&lt;256:16/big&gt;&gt;, {C,D}.
{1,0}
6&gt; &lt;&lt;E,F&gt;&gt; = &lt;&lt;256:16/little&gt;&gt;, {E,F}.
{0,1}
7&gt; &lt;&lt;1024:32, 3.14/float, &lt;&lt;"abc"&gt;&gt;/bytes&gt;&gt;.
&lt;&lt;0,0,4,0,64,9,30,184,81,235,133,31,97,98,99&gt;&gt;
8&gt; io:format("~w~n", [&lt;&lt;"Año"/utf8&gt;&gt;]).
&lt;&lt;65,195,177,111&gt;&gt;
9&gt; io:format("~w~n", [&lt;&lt;"Año"/utf16&gt;&gt;]).
&lt;&lt;0,65,0,241,0,111&gt;&gt;
10&gt; io:format("~w~n", [&lt;&lt;"Año"/utf32&gt;&gt;]).
&lt;&lt;0,0,0,65,0,0,0,241,0,0,0,111&gt;&gt;
</code></pre>
<h3 id="registros">Registros</h3>
<p>Los <a href="https://www.erlang.org/doc/reference_manual/records.html">registros</a> es un mecanismo que Erlang tiene para definir estructuras de datos cuyas componentes tienen nombre. Para simplificarlo, sería equivalente a una tupla donde cada componente de la misma tiene un nombre propio con el que acceder a ella.</p>
<blockquote>
<p>La ventaja principal, frente a las tuplas, es su mayor flexibilidad a la hora de modificar el tamaño de definiciones previas. Modificar de tamaño una tupla implica tener que revisar todo el código, para actualizar todas las tuplas que deben encajar con la modificada. Sin embargo, con registros se puede aumentar el número de componentes sin romper el código anterior. Además, el uso de registros añade una mayor claridad para entender el acceso a los datos.</p>
</blockquote>
<p>Para definir un registro usamos la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">-record(</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">,{</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">=</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><msub><mi>r</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">=</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><msub><mi>r</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">})</mtext></mrow><annotation encoding="application/x-tex">\texttt{-record(} \mathit{nombre} \texttt{,} \texttt{\char123} \mathit{campo_1} \textcolor{red}{[} \texttt{=} \mathit{valor_1} \textcolor{red}{]} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{campo_n} \textcolor{red}{[} \texttt{=} \mathit{valor_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{\char125} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">-record(</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord text"><span class="mord texttt">{</span></span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">valo</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">valo</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">}</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Esto crea un registro con el <em>nombre</em> indicado para el módulo donde ha sido definido. De forma opcional se puede indicar valores por defecto de inicialización cuando se crea un valor. La sintaxis para crear un valor es el siguiente:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">#</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">{</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mi>n</mi></msub></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">})</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char35} \mathit{nombre} \texttt{\char123} \textcolor{red}{[} \mathit{campo_1} \texttt{=} \mathit{expresi\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{campo_n} \texttt{=} \mathit{expresi\acute{o}n_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{\char125} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">#</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">{</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">}</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>En caso de dejar campos sin definir en el constructor, se les asignará el valor <code>undefined</code>. También se puede usar como <em>campo</em> la variable comodín <code>_</code> para inicializar todos aquellos que no hayan sido explícitamente indicados en el constructor. Para modificar un valor de registro previo se usa la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext mathvariant="monospace">#</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">{</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mi>n</mi></msub></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">})</mtext></mrow><annotation encoding="application/x-tex">\mathit{variable} \texttt{\char35} \mathit{nombre} \texttt{\char123} \mathit{campo_1} \texttt{=} \mathit{expresi\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{campo_n} \texttt{=} \mathit{expresi\acute{o}n_n} \textcolor{red}{]} \texttt{\char125} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">variable</span></span><span class="mord text"><span class="mord texttt">#</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">{</span></span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">}</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Esto devuelve un nuevo calor con la información modificada. Para pode acceder a un campo se usa la sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext mathvariant="monospace">#</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">.</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>o</mi></mrow></mrow><annotation encoding="application/x-tex">\mathit{variable} \texttt{\char35} \mathit{nombre} \texttt{.} \mathit{campo}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">variable</span></span><span class="mord text"><span class="mord texttt">#</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">.</span></span><span class="mord"><span class="mord mathit">campo</span></span></span></span></span></span></span></p>
<p>Esto devuelve el valor asociado al <em>campo</em>. Es perfectamente posible anidar registros dentro de otros registros. Para acceder al contenido simplemente hay que usar la sintaxis anterior aplicada al campo en cuestión.</p>
<blockquote>
<p>En versiones anteriores a la <code>R14</code>, para acceder al contenido de un registro anidado en otro registro, era necesario usar paréntesis para ayudar al compilador con el análisis. Por suerte, se eliminó esa limitación.</p>
</blockquote>
<p>Si necesitamos saber cuál es la posición del campo dentro de la tupla usaremos:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">#</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">.</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>o</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{\char35} \mathit{nombre} \texttt{.} \mathit{campo}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">#</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">.</span></span><span class="mord"><span class="mord mathit">campo</span></span></span></span></span></span></span></p>
<p>Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">record</span><span class="token punctuation">(</span><span class="token atom">state</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token atom">first</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token atom">second</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token atom">third</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token variable">S1</span> <span class="token operator">=</span> <span class="token punctuation">#</span><span class="token atom">state</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token variable">S2</span> <span class="token operator">=</span> <span class="token punctuation">#</span><span class="token atom">state</span><span class="token punctuation">{</span><span class="token atom">first</span><span class="token operator">=</span><span class="token string">"ichi"</span><span class="token punctuation">,</span> <span class="token variable">_</span><span class="token operator">=</span><span class="token atom">null</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token variable">S3</span> <span class="token operator">=</span> <span class="token variable">S</span><span class="token number">2#state</span><span class="token punctuation">{</span><span class="token atom">second</span><span class="token operator">=</span><span class="token string">"ni"</span><span class="token punctuation">,</span> <span class="token atom">third</span><span class="token operator">=</span><span class="token string">"san"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"S1 = ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">S1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"S2 = ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">S2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"S3 = ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">S3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"first = ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">#</span><span class="token atom">state</span><span class="token punctuation">.</span><span class="token atom">first</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"second = ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">#</span><span class="token atom">state</span><span class="token punctuation">.</span><span class="token atom">second</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"third = ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">#</span><span class="token atom">state</span><span class="token punctuation">.</span><span class="token atom">third</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"S2.first = ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">S</span><span class="token number">2#state</span><span class="token punctuation">.</span><span class="token atom">first</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Obtenemos por consola el siguiente resultado:</p>
<pre><code>S1 = {state,1,2,3}
S2 = {state,"ichi",null,null}
S3 = {state,"ichi","ni","san"}
first = 2
second = 3
third = 4
S2.first = "ichi"
</code></pre>
<p>Como se puede observar, internamente es una tupla la estructura. Es el compilador el que se encarga de analizar el código y traducirlo, sin tener que cambiar la implementación interna de Erlang.</p>
<h2 id="operadores">Operadores</h2>
<h3 id="comparaciones">Comparaciones</h3>

<table>
<thead>
<tr>
<th align="center">Operador</th>
<th align="center">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>==</code></td>
<td align="center">Igualdad</td>
</tr>
<tr>
<td align="center"><code>/=</code></td>
<td align="center">Desigualdad</td>
</tr>
<tr>
<td align="center"><code>=&lt;</code></td>
<td align="center">Menor o igual que</td>
</tr>
<tr>
<td align="center"><code>&lt;</code></td>
<td align="center">Menor que</td>
</tr>
<tr>
<td align="center"><code>&gt;=</code></td>
<td align="center">Mayor o igual que</td>
</tr>
<tr>
<td align="center"><code>&gt;</code></td>
<td align="center">Mayor que</td>
</tr>
<tr>
<td align="center"><code>=:=</code></td>
<td align="center">Igualdad estricta</td>
</tr>
<tr>
<td align="center"><code>=/=</code></td>
<td align="center">Desigualdad estricta</td>
</tr>
</tbody>
</table><p>El resultado de las operaciones de comparación son los valores booleanos <code>true</code> y <code>false</code>, que pertenecen al conjunto de los átomos. La única particularidad, frente a otros lenguajes, es la distinción entre las versiones de la igualdad y la desigualdad. La igualdad estándar, como la desigualdad estándar, realizan una conversión de tipos cuando se comparan enteros y reales entre sí, de modo que el número entero será convertido a formato de coma flotante. En las versiones estrictas de estos dos operadores no se realiza la conversión, por lo que nunca un entero será igual a un real dentro del lenguaje Erlang. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token number">1</span> <span class="token operator">==</span>  <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">% true</span>
<span class="token number">1</span> <span class="token operator">=:=</span> <span class="token number">1.0</span><span class="token punctuation">.</span> <span class="token comment">% false</span>
</code></pre>
<p>Según la documentación de Erlang, la relación entre los diferentes tipos del lenguaje es la siguiente:</p>
<pre><code>number &lt; atom &lt; reference &lt; fun &lt; port &lt; pid
       &lt; tuple &lt; map &lt; nil &lt; list &lt; bit string
</code></pre>
<p>Si bien no es necesario conocer esta relación para programar, es importante que un lenguaje esté bien definido y mantenga un orden fijo para la coherencia de las operaciones.</p>
<h3 id="aritméticos">Aritméticos</h3>

<table>
<thead>
<tr>
<th align="center">Operador</th>
<th align="center">Descripción</th>
<th align="center">Tipo</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>+</code></td>
<td align="center">Positivo</td>
<td align="center">Número</td>
</tr>
<tr>
<td align="center"><code>-</code></td>
<td align="center">Negativo</td>
<td align="center">Número</td>
</tr>
<tr>
<td align="center"><code>+</code></td>
<td align="center">Suma</td>
<td align="center">Número</td>
</tr>
<tr>
<td align="center"><code>-</code></td>
<td align="center">Resta</td>
<td align="center">Número</td>
</tr>
<tr>
<td align="center"><code>*</code></td>
<td align="center">Multiplicación</td>
<td align="center">Número</td>
</tr>
<tr>
<td align="center"><code>/</code></td>
<td align="center">División</td>
<td align="center">Número</td>
</tr>
<tr>
<td align="center"><code>div</code></td>
<td align="center">División entera</td>
<td align="center">Entero</td>
</tr>
<tr>
<td align="center"><code>rem</code></td>
<td align="center">Resto de la división</td>
<td align="center">Entero</td>
</tr>
</tbody>
</table><p>Estos operadores funcionan con números y devuelven números como resultado. Salvo en el caso del resto y la división entera, que sólo admiten números enteros, el resto de operadores devolverá como resultado un número entero, salvo que alguno de los operandos sea de coma flotante y por lo tanto se devolverá como resultado un número real.</p>
<h3 id="lógica-booleana">Lógica booleana</h3>

<table>
<thead>
<tr>
<th align="center">Operador</th>
<th align="center">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>not</code></td>
<td align="center"><a href="https://es.wikipedia.org/wiki/Negaci%C3%B3n_l%C3%B3gica">Negación</a></td>
</tr>
<tr>
<td align="center"><code>and</code></td>
<td align="center"><a href="https://es.wikipedia.org/wiki/Conjunci%C3%B3n_l%C3%B3gica">Conjunción</a></td>
</tr>
<tr>
<td align="center"><code>or</code></td>
<td align="center"><a href="https://es.wikipedia.org/wiki/Disyunci%C3%B3n_l%C3%B3gica">Disyunción</a></td>
</tr>
<tr>
<td align="center"><code>xor</code></td>
<td align="center"><a href="https://es.wikipedia.org/wiki/Disyunci%C3%B3n_exclusiva">Disyunción exclusiva</a></td>
</tr>
</tbody>
</table><p>El resultado de estos operadores son valores booleanos, que son los átomos <code>true</code> y <code>false</code>. También hay que tener en cuenta que sólo admiten como operandos valores booleanos. Para poder entender mejor estas operaciones, veamos sus <a href="https://es.wikipedia.org/wiki/Tabla_de_verdad">tablas de la verdad</a>:</p>

<table>
<thead>
<tr>
<th align="center"><code>A</code></th>
<th align="center"><code>B</code></th>
<th align="center"><code>not A</code></th>
<th align="center"><code>not B</code></th>
<th align="center"><code>A and B</code></th>
<th align="center"><code>A or B</code></th>
<th align="center"><code>A xor B</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>true</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>false</code></td>
</tr>
<tr>
<td align="center"><code>false</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>true</code></td>
</tr>
<tr>
<td align="center"><code>true</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>true</code></td>
</tr>
<tr>
<td align="center"><code>false</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>true</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>false</code></td>
<td align="center"><code>false</code></td>
</tr>
</tbody>
</table><p>Estos operadores evalúan toda la expresión, aunque se alcance el resultado final tras terminar de evaluar el operando izquierdo. Por ello el lenguaje dispone de <code>orelse</code> y <code>andalso</code>, que son versiones de la conjunción y la disyunción con <strong>cortocircuito</strong>. Es decir, si el operando izquierdo en la conjunción es <code>false</code>, se devolverá <code>false</code> sin evaluar el operando derecho. De modo similar, si el operando izquierdo en la disyunción es <code>true</code>, se devolverá <code>true</code> sin evaluar el operando derecho.</p>
<h3 id="lógica-a-nivel-de-bit">Lógica a nivel de bit</h3>

<table>
<thead>
<tr>
<th align="center">Operador</th>
<th align="center">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>bnot</code></td>
<td align="center">Negación</td>
</tr>
<tr>
<td align="center"><code>band</code></td>
<td align="center">Conjunción</td>
</tr>
<tr>
<td align="center"><code>bor</code></td>
<td align="center">Disyunción</td>
</tr>
<tr>
<td align="center"><code>bxor</code></td>
<td align="center">Disyunción exclusiva</td>
</tr>
<tr>
<td align="center"><code>bsl</code></td>
<td align="center">Desplazamiento de bits a la izquierda</td>
</tr>
<tr>
<td align="center"><code>bsr</code></td>
<td align="center">Desplazamiento de bits a la derecha</td>
</tr>
</tbody>
</table><p>Todos estos operadores trabajan con números enteros exclusivamente. Los cuatro primeros operadores funcionan igual que los operadores lógicos booleanos, la diferencia es que, en lugar de usar <code>true</code> y <code>false</code>, usan los valores binarios <code>1</code> y <code>0</code> respectivamente. En cuanto a los operadores de desplazamiento de bits, el operando izquierdo es desplazado tantas posiciones como indique el operando derecho:</p>
<pre><code>1&gt; 1024 bsr 5.
32
2&gt; 2 bsl 10.
2048
</code></pre>
<blockquote>
<p>La representación de los enteros en Erlang no se limita a un tamaño fijo como en otros lenguajes. Para enteros pequeños se utilizan 28 bits en arquitecturas de 32 bits y 60 bits en las de 64 bits. Pero para enteros largos se reservan bloques de memoria divisibles por el ancho de palabra de la arquitectura donde se esté ejecutando. De esta manera se pueden representar números enteros extraordinariamente largos, al punto que la expresión <code>1 bsl (1 bsl 24)</code> es ejecutable en arquitecturas de 64 bits.</p>
</blockquote>
<h3 id="listas-1">Listas</h3>

<table>
<thead>
<tr>
<th align="center">Operador</th>
<th align="center">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>++</code></td>
<td align="center">Concatenación</td>
</tr>
<tr>
<td align="center"><code>--</code></td>
<td align="center">Eliminación</td>
</tr>
</tbody>
</table><p>Estos dos operadores sólo permiten listas como operandos y devuelven listas. Con <code>++</code> se obtiene una nueva lista que concatena dos listas. Con <code>--</code> se obtiene una nueva lista en la que se ha ido eliminando los elementos de la lista en el operando derecho. Por ejemplo:</p>
<pre><code>1&gt; [1,2,3] ++ [4,5].
[1,2,3,4,5]
2&gt; [1,2,3,2,1,2] -- [2,1,4,2].
[3,1,2]
</code></pre>
<p>Como se puede ver, para la eliminación, no salta ningún error si el elemento que se busca eliminar no existe. Con este operador tenemos una forma básica de filtrar valores.</p>
<h3 id="otros-operadores">Otros operadores</h3>

<table>
<thead>
<tr>
<th align="center">Operador</th>
<th align="center">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>:</code></td>
<td align="center">Acceso a módulos</td>
</tr>
<tr>
<td align="center"><code>#</code></td>
<td align="center">Modificación de estructuras</td>
</tr>
<tr>
<td align="center"><code>=</code></td>
<td align="center">Encaje de patrones</td>
</tr>
<tr>
<td align="center"><code>!</code></td>
<td align="center">Envío de mensajes</td>
</tr>
<tr>
<td align="center"><code>catch</code></td>
<td align="center">Captura de excepciones</td>
</tr>
</tbody>
</table><p>Estos operadores se pueden ver en más detalle en otras secciones, para explicar mejor los conceptos que manejan.</p>
<h3 id="precedencia-y-asociatividad">Precedencia y asociatividad</h3>
<p>La precedencia de los operadores es la siguiente:</p>

<table>
<thead>
<tr>
<th align="center">Operadores</th>
<th align="center">Asociatividad</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>:</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>#</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Unarios: <code>+</code>, <code>-</code>, <code>bnot</code>, <code>not</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/</code>, <code>*</code>, <code>div</code>, <code>rem</code>, <code>band</code>, <code>and</code></td>
<td align="center">Izquierda</td>
</tr>
<tr>
<td align="center"><code>+</code>, <code>-</code>, <code>bor</code>, <code>bxor</code>, <code>bsl</code>, <code>bsr</code>, <code>or</code>, <code>xor</code></td>
<td align="center">Izquierda</td>
</tr>
<tr>
<td align="center"><code>++</code>, <code>--</code></td>
<td align="center">Derecha</td>
</tr>
<tr>
<td align="center"><code>==</code>, <code>/=</code>, <code>=&lt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&gt;</code>, <code>=:=</code>, <code>=/=</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>andalso</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>orelse</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>=</code>, <code>!</code></td>
<td align="center">Derecha</td>
</tr>
<tr>
<td align="center"><code>catch</code></td>
<td align="center"></td>
</tr>
</tbody>
</table><blockquote>
<p>La <a href="https://es.wikipedia.org/wiki/Orden_de_evaluaci%C3%B3n">asociatividad</a> de un operador indica cómo se va evaluando las expresiones, si es de izquierda a derecha o al revés. Los operadores aritméticos se evalúan de izquierda a derecha, por lo que primero se resuelven aquellas operaciones que están a la izquierda de otra operación con el mismo nivel de prioridad.</p>
</blockquote>
<p>Si necesitamos indicar de forma explícita la precedencia de una operación sobre otra, podemos usar el operador de paréntesis <code>(</code> <code>)</code> de forma idéntica al uso que le damos al operar en matemáticas.</p>
<h2 id="encaje-de-patrones">Encaje de patrones</h2>
<p>Una de las propiedades del lenguaje Erlang es el encaje de patrones, este se realiza en múltiples circunstancias, la más obvia de ellas es usando el operador <code>=</code>, que vimos en la sección sobre las variables. El encaje de patrones sirve para dos cometidos:</p>
<ol>
<li>Descomponer y seleccionar datos en una expresión.</li>
<li>Comprobar el valor de una expresión.</li>
</ol>
<p>Veamos el siguiente ejemplo para entenderlo mejor:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token variable">A</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token variable">B</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token variable">A</span><span class="token punctuation">,</span> <span class="token variable">A</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span><span class="token variable">_</span><span class="token punctuation">,</span> <span class="token variable">C</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token variable">B</span><span class="token punctuation">,</span>
<span class="token number">10</span> <span class="token operator">=</span> <span class="token variable">C</span><span class="token punctuation">.</span>
</code></pre>
<p>La primera expresión asigna el valor <code>5</code> a la variable <code>A</code>. La segunda expresión asigna a la variable <code>B</code> una tupla de dos componentes, la primera con el valor de <code>A</code> y la segunda con el valor de <code>A</code> multiplicado por <code>2</code>. En la tercera expresión, se realiza un ajuste de patrón, para asignar en la variable <code>C</code> el valor de la segunda componente de la tupla que está asignada a <code>B</code>. Como la primera componente no nos interesa, usamos la variable comodín <code>_</code> para descartar dicha información. Por último, comprobamos que el contenido de <code>C</code> es el valor <code>10</code> usando la expresión <code>10 = C</code> en el ejemplo, aunque también podríamos haber usado <code>C = 10</code> porque actúan de forma idéntica las dos.</p>
<p>Este mismo comportamiento, que ocurre con el operador <code>=</code>, veremos que también se aplica con las cláusulas al llamar una función o al utilizar las expresiones <code>case</code>, <code>receive</code> y <code>try</code>.</p>
<h3 id="cláusulas-patrones-y-guardas">Cláusulas, patrones y guardas</h3>
<p>Las <strong>cláusulas</strong> en Erlang son una construcción que permite ajustar un valor a un <strong>patrón</strong> determinado, siempre que se cumplan una serie de condiciones que denominaremos <strong>guardas</strong>. De modo que su sintaxis sería algo tal que:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi></mrow></mrow><annotation encoding="application/x-tex">\mathit{patr\acute{o}n}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guardas</span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresiones</span></span></span></span></span></span></span></p>
<p>Para la declaración de funciones, la sintaxis varía ligeramente porque el ajuste se realiza sobre cero o más parámetros, recibidos en la invocación de dicha función.</p>
<p>Para ser más precisos, un <strong>patrón</strong> es una expresión que define una estructura de datos y que contiene variables y valores literales. Si las variables están ya ligadas a un valor, se comprobará que se ajusten los valores con lo que se intenta encajar, si no están ligadas se asignará el valor que se está encajando. Por ejemplo, cuando se utiliza el operador <code>=</code>, el lado izquierdo ha de ser un patrón, mientras que el derecho es la expresión que nos da el valor que se va a intentar encajar.</p>
<p>En cuanto a las <strong>guardas</strong>, estas son expresiones booleanas. Si no se indica ninguna guarda, por defecto se utiliza el valor <code>true</code> internamente. Una condición que debe cumplir las guardas, es que no debe tener ningún efecto colateral al evaluarse. Para ello, están limitados los elementos que pueden formar parte de una guarda a los siguientes:</p>
<ul>
<li>Variables</li>
<li>Constantes</li>
<li>Constructores de átomos, números, listas, tuplas, registros, bloques binarios y mapas.</li>
<li>Expresiones para actualizar mapas.</li>
<li>Expresiones con registros como: <code>Expresión#Nombre.Campo</code> y <code>#Nombre.Campo</code>.</li>
<li>Operaciones de comparación, aritméticas, lógicas booleanas y a nivel de bit, así como los operadores lógicos <code>andalso</code> y <code>orelse</code>.</li>
<li>Las siguientes funciones nativas del lenguaje:
<ul>
<li>Comprobación de tipos: <code>is_atom/1</code>, <code>is_binary/1</code>, <code>is_bitstring/1</code>, <code>is_boolean/1</code>, <code>is_float/1</code>, <code>is_function/1</code>, <code>is_function/2</code>, <code>is_integer/1</code>, <code>is_list/1</code>, <code>is_map/1</code>, <code>is_number/1</code>, <code>is_pid/1</code>, <code>is_port/1</code>, <code>is_record/2</code>, <code>is_record/3</code>, <code>is_reference/1</code>, <code>is_tuple/1</code>.</li>
<li>Operaciones varias: <code>abs/1</code>, <code>bit_size/1</code>, <code>byte_size/1</code>, <code>element/2</code>, <code>float/1</code>, <code>hd/1</code>, <code>is_map_key/2</code>, <code>length/1</code>, <code>map_get/2</code>, <code>map_size/1</code>, <code>node/0</code>, <code>node/1</code>, <code>round/1</code>, <code>self/0</code>, <code>size/1</code>, <code>tl/1</code>, <code>trunc/1</code>, <code>tuple_size/1</code>.</li>
</ul>
</li>
</ul>
<p>En la sección sobre las funciones, se habla en más detalle sobre las <a href="https://www.erlang.org/doc/man/erlang.html">funciones nativas del lenguaje</a> que hay en Erlang. Volviendo a las guardas, podemos tener una secuencia de ellas utilizando una de estas dos formas:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><msub><mi>a</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><msub><mi>a</mi><mi>n</mi></msub></mrow></mrow><annotation encoding="application/x-tex">\mathit{guarda_1} \texttt{,} \dots \texttt{,} \mathit{guarda_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">guard</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">guard</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><msub><mi>a</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext><mo>…</mo><mtext mathvariant="monospace">;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><msub><mi>a</mi><mi>n</mi></msub></mrow></mrow><annotation encoding="application/x-tex">\mathit{guarda_1} \texttt{;} \dots \texttt{;} \mathit{guarda_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">guard</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">;</span></span><span class="mord"><span class="mord mathit">guard</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>Usando la coma (<code>,</code>) es requisito que todas las guardas den como resultado <code>true</code>, mientras que con el punto y coma (<code>;</code>) sólo es necesario que una de las guardas sea cierta. Esta sintaxis vendría a ser un equivalente de usar <code>andalso</code> para el caso de la coma y <code>orelse</code> para el caso del punto y coma, la principal diferencia es que usando operadores no se capturan las excepciones cuando se producen, es decir, <code>hd(1) orelse true</code> fallaría, pero <code>hd(1); true</code> tendría éxito.</p>
<h3 id="encaje-con-mapas">Encaje con mapas</h3>
<p>Podemos usar la siguiente sintaxis como patrón de encaje con mapas:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">#{</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>v</mi><msub><mi>e</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">:=</mtext><mtext>&nbsp;</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>v</mi><msub><mi>e</mi><mi>n</mi></msub></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">:=</mtext><mtext>&nbsp;</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char35\char123} \textcolor{red}{[} \mathit{clave_1}\ \texttt{:=}\ \mathit{patr\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{clave_n}\ \texttt{:=}\ \mathit{patr\acute{o}n_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">#{</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">clav</span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">:=</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">clav</span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">:=</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>Como requisito, para que funcione correctamente, las claves tienen que cumplir los mismos requisitos que cumplen las guardas de las cláusulas, lo cual implica que todas las variables internas han de estar previamente ligadas. Si las claves son encontradas, los valores de estas son ajustados a los patrones definidos.</p>
<p>En caso de no encontrar alguna de las claves indicadas, se lanzará una excepción de tipo <code>badmatch</code> si el encaje se realiza mediante el operador <code>=</code>. Si el encaje se está realizando en el patrón de una cláusula, en caso de fallar el ajuste se pasará a la siguiente cláusula.</p>
<h3 id="encaje-con-registros">Encaje con registros</h3>
<p>Podemos usar la siguiente sintaxis como patrón de encaje con registros:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">#</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">{</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>c</mi><mi>a</mi><mi>m</mi><mi>p</mi><msub><mi>o</mi><mi>n</mi></msub></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">})</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char35} \mathit{nombre} \texttt{\char123} \textcolor{red}{[} \mathit{campo_1} \texttt{=} \mathit{patr\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{campo_n} \texttt{=} \mathit{patr\acute{o}n_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{\char125} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">#</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">{</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">camp</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">}</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Funciona parecido a las tuplas, a la hora de hacer un ajuste de patrones, pero con algo más de flexibilidad en cuanto a la posición de los componentes.</p>
<h2 id="secuencias-intensionales">Secuencias intensionales</h2>
<p>Además de poder crear listas mediante literales y con el uso de operadores, podemos utilizar las listas intensionales para crear nuevas listas a partir de otra, realizando filtrados y transformaciones. Para ello existe la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">[</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">||</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>o</mi><msub><mi>r</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>o</mi><msub><mi>r</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">]</mtext></mrow><annotation encoding="application/x-tex">\texttt{[} \mathit{expresi\acute{o}n}\  \texttt{||}\ \mathit{generador_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{generador_n} \textcolor{red}{]} \texttt{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">[</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">||</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">generado</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">generado</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">]</span></span></span></span></span></span></span></p>
<p>Donde la expresión generadora puede ser una de las siguientes:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mi mathvariant="normal">{</mi></mstyle><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">&lt;-</mtext><mtext>&nbsp;</mtext><mrow><mi>l</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext>&nbsp;</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">&lt;=</mtext><mtext>&nbsp;</mtext><mrow><mi>b</mi><mi>i</mi><mi>n</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>o</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi></mrow><mstyle mathcolor="red"><mi mathvariant="normal">}</mi></mstyle></mrow><annotation encoding="application/x-tex">\textcolor{red}{\char123} \mathit{patr\acute{o}n}\ \texttt{&lt;-}\ \mathit{lista}\ \textcolor{red}{|}\ \mathit{patr\acute{o}n}\ \texttt{&lt;=}\ \mathit{binario}
\ \textcolor{red}{|}\ \mathit{guarda} \textcolor{red}{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord" style="color: red;">{</span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">&lt;-</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">lista</span></span><span class="mspace">&nbsp;</span><span class="mord" style="color: red;">∣</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">&lt;=</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">binario</span></span><span class="mspace">&nbsp;</span><span class="mord" style="color: red;">∣</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span></span><span class="mord" style="color: red;">}</span></span></span></span></span></span></p>
<p>El primer tipo de generador ajusta un patrón con cada elemento de la lista. El segundo hace lo mismo que el primero pero con cada elemento dentro de un bloque binario. Finalmente, podemos usar guardas como predicados para filtrar los elementos de la lista de entrada, de modo que se usarán aquellos elementos que den como resultado <code>true</code> con el predicado, y aquellos que den <code>false</code> serán descartados. Por ejemplo:</p>
<pre><code>1&gt; L=[3,e,4.5,f,{1,2},7].
[3,e,4.5,f,{1,2},7]
2&gt; [X || X &lt;- L, is_integer(X)].
[3,7]
</code></pre>
<p>La lista intensional <code>[X || X &lt;- L, is_integer(X)]</code> nos devuelve sólo los números enteros de <code>L</code>. Obviamente <code>4.5</code>, aunque es un número, no es un entero y por ello queda descartado.</p>
<p>De forma análoga a las listas, con los bloques binarios podemos también crear bloques binarios intensionales con la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">&lt;&lt;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">||</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>o</mi><msub><mi>r</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>g</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>o</mi><msub><mi>r</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">&gt;&gt;</mtext></mrow><annotation encoding="application/x-tex">\texttt{&lt;&lt;} \mathit{expresi\acute{o}n}\  \texttt{||}\ \mathit{generador_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{generador_n} \textcolor{red}{]} \texttt{&gt;&gt;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">&lt;&lt;</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">||</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">generado</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">generado</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">&gt;&gt;</span></span></span></span></span></span></span></p>
<p>Los generadores que se usan son los mismos que usamos con las listas.</p>
<h2 id="funciones">Funciones</h2>
<p>Las funciones son bloques de código que realizan diferentes tareas. Para realizar programas y algoritmos necesitamos descomponer el problema en diferentes funciones.</p>
<h3 id="invocar-funciones">Invocar funciones</h3>
<p>Para poder <strong>ejecutar una función</strong> tenemos que invocarla usando la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">:</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">(</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mover accent="true"><mi>a</mi><mo>ˊ</mo></mover><mi>m</mi><mi>e</mi><mi>t</mi><mi>r</mi><msub><mi>o</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>p</mi><mi>a</mi><mi>r</mi><mover accent="true"><mi>a</mi><mo>ˊ</mo></mover><mi>m</mi><mi>e</mi><mi>t</mi><mi>r</mi><msub><mi>o</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \mathit{m\acute{o}dulo} \textcolor{red}{]} \texttt{:} \mathit{funci\acute{o}n} \texttt{(} \textcolor{red}{[} \mathit{par\acute{a}metro_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{par\acute{a}metro_n} \textcolor{red}{]} \textcolor{red}{]} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">:</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">par</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">a</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">metr</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">par</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">a</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">metr</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Indicando el módulo podemos llamar a funciones que están en otros módulos. Si se omite el módulo, se asume que estamos usando funciones del módulo actual.</p>
<h3 id="funciones-como-valores">Funciones como valores</h3>
<p>Hay que tener en cuenta que las <strong>funciones son valores</strong> para el lenguaje, por lo que podemos usarlas como parámetros de otras funciones y devolverlas. Por lo tanto, Erlang es un lenguaje con <a href="https://es.wikipedia.org/wiki/Funci%C3%B3n_de_orden_superior">funciones de orden superior</a>. Entonces, si queremos referenciar a una función con nombre como un valor, usaremos la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">fun</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">:</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">/</mtext><mrow><mi>a</mi><mi>r</mi><mi>i</mi><mi>d</mi><mi>a</mi><mi>d</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{fun}\ \textcolor{red}{[} \mathit{m\acute{o}dulo} \textcolor{red}{]} \texttt{:} \mathit{funci\acute{o}n} \texttt{/} \mathit{aridad}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">fun</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">:</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">/</span></span><span class="mord"><span class="mord mathit">aridad</span></span></span></span></span></span></span></p>
<p>De este modo, con <code>fun hello:world/0</code> tendríamos el valor que representa a la función <code>world</code> dentro del módulo <code>hello</code>. Si no indicamos el módulo, se asume que se trata del módulo actual que estemos codificando. Una vez está una variable ligada a una función, podemos usar la variable para invocar la función, pasando entre paréntesis los parámetros que necesita. Por ejemplo:</p>
<pre><code>1&gt; l(hello).
{module,hello}
2&gt; Hi = fun hello:world/0.
fun hello:world/0
3&gt; Hi().
Hello, world!
</code></pre>
<h3 id="definir-funciones">Definir funciones</h3>
<p>Para poder <strong>definir funciones</strong> se utiliza la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">(</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">)</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext></mrow><annotation encoding="application/x-tex">\mathit{nombre} \texttt{(} \mathit{patrones_1} \texttt{)}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_1} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_1}\texttt{;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">patrone</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">)</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">(</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mtext mathvariant="monospace">)</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mtext mathvariant="monospace">.</mtext></mrow><annotation encoding="application/x-tex">\mathit{nombre} \texttt{(} \mathit{patrones_n} \texttt{)}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_n} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_n}\texttt{.}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">patrone</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">)</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">.</span></span></span></span></span></span></span></p>
<p>Como podemos ver, lo que tenemos aquí es una <strong>secuencia de cláusulas</strong> que componen la función. Los <strong>patrones</strong> y <strong>expresiones</strong> son secuencias separadas por comas de patrones y expresiones respectivamente. Cada patrón representa los <strong>argumentos</strong> de la función y las expresiones son el <strong>cuerpo</strong> de la función, es decir:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \mathit{patr\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{patr\acute{o}n_n} \textcolor{red}{]} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]</span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>m</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\mathit{expresi\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{expresi\acute{o}n_m} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>La diferencia es que, mientras que podemos tener una función sin argumentos, el cuerpo de la función requiere al menos una expresión. El caso de que no se indique la guarda para la cláusula funcional, se asume por defecto como guarda el valor <code>true</code>. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">fact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">N</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token variable">N</span> <span class="token operator">*</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token variable">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fact</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token number">1</span><span class="token punctuation">.</span>
</code></pre>
<p>La función <code>fact</code> calcula el factorial, para ello tiene la cláusula recursiva primero y segundo el caso base. Hay que entender que el <strong>orden</strong> de las <strong>cláusulas</strong> es importante, porque para evaluar cual hay que seleccionar se hace en orden de definición, escogiendo la primera que permita ajustar los parámetros de entrada con sus patrones y su guarda sea cierta. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token variable">X</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">X</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token atom">up</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token variable">X</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">X</span> <span class="token operator">=</span><span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token atom">down</span><span class="token punctuation">.</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token variable">X</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">X</span> <span class="token operator">=</span><span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token atom">down</span><span class="token punctuation">;</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token variable">X</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">X</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token atom">up</span><span class="token punctuation">.</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=:=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>El resultado de <code>test()</code> es el valor <code>false</code>, ya que aplicar el valor <code>0</code> a <code>foo</code> y <code>bar</code> da resultados distintos aunque el código parezca el mismo. Esto es porque hay superposición de casos entre las cláusulas y se escogerá la primera que se pueda usar con éxito. Por ello, cuando usemos la variable comodín <code>_</code>, como patrón de ajuste, es importante usarla en una cláusula que no bloquee el acceso a las siguientes salvo que haya una muy buena razón.</p>
<h3 id="funciones-lambda">Funciones lambda</h3>
<p>También se pueden definir funciones anónimas, también conocidas como <a href="https://es.wikipedia.org/wiki/Expresi%C3%B3n_lambda">funciones lambda</a>. Para ello se utiliza la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">fun</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{fun} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">fun</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">(</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">)</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \mathit{Variable} \textcolor{red}{]} \texttt{(} \mathit{patrones_1} \texttt{)}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_1} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_1}\texttt{;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">Variable</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">patrone</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">)</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">(</mtext><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mtext mathvariant="monospace">)</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \mathit{Variable} \textcolor{red}{]} \texttt{(} \mathit{patrones_n} \texttt{)}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_n} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">Variable</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">patrone</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">)</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">end</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{end} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">end</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p>La sintaxis es muy similar a la declaración de funciones normales, pero las lambdas no tienen nombre propio, por ello para poder realizar lambdas recursivas se puede utilizar una variable para invocar a la función anónima desde dentro. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token keyword">fun</span> <span class="token variable">Fact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">N</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
            <span class="token variable">N</span> <span class="token operator">*</span> <span class="token variable">Fact</span><span class="token punctuation">(</span><span class="token variable">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">Fact</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
            <span class="token number">1</span>
    <span class="token keyword">end</span><span class="token punctuation">.</span>
</code></pre>
<p>La función <code>foo</code> nos devuelve una función que contiene la función factorial.</p>
<blockquote>
<p>Las expresiones lambda crean un ámbito nuevo para las variables, por lo tanto, si definimos una variable <code>X</code> como parámetro de entrada y existe la misma variable fuera de la lambda, la variable interna ocultará el acceso a la exterior.</p>
</blockquote>
<h3 id="recursión-de-cola">Recursión de cola</h3>
<p>Otro aspecto importante al diseñar funciones, es la <strong>recursión de cola</strong>.  En programación funcional la recursión es esencial, porque la iteración se realiza mediante la recursión.</p>
<p>Si el resultado de la llamada recursiva se tiene que utilizar para realizar más cálculos, se tiene que almacenar en la pila de llamadas la información que contiene la llamada actual, para que no se pierda al evaluar las siguientes iteraciones recursivas. Aunque dispongamos de muchos recursos en cuanto a memoria, en determinadas circunstancias se puede provocar un desbordamiento de pila por realizarse una cantidad grande de llamadas a función anidadas.</p>
<p>La recursión de cola se produce cuando la expresión final a devolver es la llamada recursiva a la función, por lo que todos los parámetros de la llamada se evalúan antes de la llamada y no hace falta guardar en la pila ninguna información. La ventaja es que este tipo de recursión no puede desbordar la pila y nos sirve, por ejemplo, para hacer bucles infinitos cuando necesitamos un servidor que recibe y envía mensajes. Para entenderlo mejor, vamos a ver el ejemplo del factorial con recursión de cola:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">fact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token function">ifact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token function">ifact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">,</span> <span class="token variable">R</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">N</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token function">ifact</span><span class="token punctuation">(</span><span class="token variable">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">R</span> <span class="token operator">*</span> <span class="token variable">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ifact</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token variable">R</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token variable">R</span><span class="token punctuation">.</span>
</code></pre>
<h2 id="control-de-la-ejecución">Control de la ejecución</h2>
<p>La primera expresión de control es el <code>case</code> que tiene la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">case</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">of</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{case}\ \mathit{expresi\acute{o}n}\ \texttt{of} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">case</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">of</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext></mrow><annotation encoding="application/x-tex">\mathit{patr\acute{o}n_1}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_1} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_1}\texttt{;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow></mrow><annotation encoding="application/x-tex">\mathit{patr\acute{o}n_n}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_n} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">end</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{end} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">end</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p>Las expresiones <code>case</code> sirven para ramificar la ejecución en base al resultado de una <em>expresión</em> dada como discriminante. Una vez evaluada la <em>expresión</em>, se toma el valor final y se intenta ajustar con las cláusulas definidas. Como pasaba con las funciones, las cláusulas van siendo probadas en el orden en el que están definidas y la primera que logre ajustar el valor, y pasar su guarda, será la que se ejecute finalmente. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">fact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token keyword">case</span> <span class="token variable">N</span> <span class="token keyword">of</span>
        <span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token variable">N</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
            <span class="token variable">N</span> <span class="token operator">*</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token variable">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
            <span class="token number">1</span>
    <span class="token keyword">end</span><span class="token punctuation">.</span>
</code></pre>
<p>Aquí vemos la implementación del factorial usando un <code>case</code>. Erlang, internamente, convierte las cláusulas funcionales en expresiones <code>case</code> al compilar los módulos, pero por comodidad y limpieza es mejor usar cláusulas funcionales.</p>
<p>La expresión <code>if</code> tiene la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">if</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{if} \qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">if</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext></mrow><annotation encoding="application/x-tex">\mathit{guardas_1}\ \texttt{-&gt;}\ \mathit{expresiones_1}\texttt{;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow></mrow><annotation encoding="application/x-tex">\mathit{guardas_n}\ \texttt{-&gt;}\ \mathit{expresiones_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">end</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{end} \qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">end</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p>Las expresiones <code>if</code> también sirven para ramificar la ejecución, pero esta ramificación se hace en base al cumplimiento de una serie de condiciones descritas en las <em>guardas</em> de cada rama. Hay que señalar que las <em>guardas</em> en la expresión <code>if</code> no son tan restrictivas como las guardas originales, en estas sí podemos usar funciones de propias. Esto es posible porque internamente al compilar el módulo se transforma en una expresión <code>case</code>.</p>
<p>Podemos tener bloques de expresiones usando la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">begin</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{begin} \qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">begin</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">,</mtext></mrow><annotation encoding="application/x-tex">\mathit{expresi\acute{o}n_1}\texttt{,}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">,</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\mathit{expresi\acute{o}n_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">end</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{end} \qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">end</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p>El resultado de la expresión, igual que ocurre con el cuerpo de una cláusula, es el valor de evaluar la expresión final del bloque. Esto puede ser útil si uno quiere anidar una secuencia de expresiones en una posición de la sintaxis que sólo permite una única expresión (por ejemplo, las componentes de una tupla).</p>
<h2 id="errores-y-excepciones">Errores y excepciones</h2>
<p>Erlang dispone de mecanismos para <a href="https://www.erlang.org/doc/reference_manual/errors.html">gestionar errores</a> durante la ejecución, como ocurre con otros lenguajes modernos. Sin embargo, los creadores del lenguaje recomiendan la filosofía del <em>“let it crash”</em>, basada en dejar morir un proceso si falla y crear uno nuevo en su lugar. Dicho lo cual, en algunas ocasiones puede ser útil lanzar y gestionar excepciones.</p>
<p>La sintaxis para capturar excepciones es la siguiente:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">try</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">of</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{try}\ \mathit{expresiones}\ \textcolor{red}{[} \texttt{of} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">try</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresiones</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">of</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\mathit{patr\acute{o}n_1}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_1} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_1}\texttt{;} \qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\mathit{patr\acute{o}n_n}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_n} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_n} \textcolor{red}{]} \qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">catch</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="1em"></mspace></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \texttt{catch} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">catch</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 1em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><msub><mi>e</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">:</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">:</mtext><mrow><mi>p</mi><mi>i</mi><mi>l</mi><msub><mi>a</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \mathit{clase_1} \texttt{:} \textcolor{red}{]} \mathit{patr\acute{o}n_1} \textcolor{red}{[} \texttt{:} \mathit{pila_1} \textcolor{red}{]}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_1} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_1}\texttt{;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">clas</span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">:</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">:</span></span><span class="mord"><span class="mord mathit">pil</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><msub><mi>e</mi><mi>m</mi></msub></mrow><mtext mathvariant="monospace">:</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>m</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">:</mtext><mrow><mi>p</mi><mi>i</mi><mi>l</mi><msub><mi>a</mi><mi>m</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mi>m</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>m</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \mathit{clase_m} \texttt{:} \textcolor{red}{]} \mathit{patr\acute{o}n_m} \textcolor{red}{[} \texttt{:} \mathit{pila_m} \textcolor{red}{]}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_m} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_m} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">clas</span><span class="mord"><span class="mord mathit">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">:</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">:</span></span><span class="mord"><span class="mord mathit">pil</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">after</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="1em"></mspace></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \texttt{after} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">after</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 1em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="1em"></mspace></mrow><annotation encoding="application/x-tex">\mathit{expresiones_n} \textcolor{red}{]} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 1em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">end</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{end} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">end</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p>Aunque son opcionales, las secciones <code>of</code>, <code>catch</code> y <code>after</code>, es necesario que exista al menos una sección <code>catch</code> o <code>after</code>. La sección <code>of</code> funciona como una expresión <code>case</code>. La sección <code>catch</code> trata de ajustar las excepciones a unos patrones y ejecutará una serie de expresiones siempre que encaje el valor y la guarda se cumpla. La sección <code>after</code> es un bloque de código que se ejecutará independientemente de si se ha producido una excepción o no en tiempo de ejecución. Si la excepción no es gestionada, por ninguna cláusula de la sección <code>catch</code>, se lanzará fuera de la expresión <code>try</code>.</p>
<p>Para ajustar una excepción, tenemos que hacer el encaje con tres elementos: la <em>clase</em>, un <em>patrón</em> y  la información de <em>pila</em>. En Erlang hay tres <em>clases</em> de excepciones:</p>
<ul>
<li><code>error</code>: Producidas por las funciones <code>error/1</code> o  <code>error/2</code>.</li>
<li><code>exit</code>: Producidas por la función <code>exit/1</code>.</li>
<li><code>throw</code>: Producidas por la función <code>throw/1</code>.</li>
</ul>
<p>Estas son funciones nativas del lenguaje del módulo <a href="https://www.erlang.org/doc/man/erlang.html"><code>erlang</code></a>. El primer argumento en todas es el valor que representa cuál es el motivo de la excepción, este valor es el que tiene que encajar con el <em>patrón</em> en la cláusula del <code>catch</code>. El valor que tiene que encajar con <em>pila</em> en la cláusula es la información de pila para la depuración que acompaña a las excepciones de clase <code>error</code>.</p>
<p>La primera sección de la cláusula de captura de excepciones <code>Clase:Patrón:Pila</code> tiene partes opcionales. Si no es de clase <code>error</code>, podemos prescindir de <code>:Pila</code>. Si se omite <code>Clase:</code> se asume por defecto el valor <code>throw</code> y, por lo tanto, sólo podremos usar <code>Patrón</code> para el ajuste.</p>
<blockquote>
<p>También existe la función <code>erlang:raise/3</code> para lanzar excepciones, donde el primer parámetro es la clase, el segundo el motivo y el tercero la información de pila para la depuración.</p>
</blockquote>
<p>Otro mecanismo para capturar excepciones es:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">catch</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{catch}\ \mathit{expresi\acute{o}n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">catch</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span></span></span></span></span></span></p>
<p>Esta expresión es azúcar sintáctico de la anterior y lo que hace es capturar toda excepción y devolverla como un valor, en caso de producirse un fallo. Si no hay error alguno, devuelve el valor al que se evalúa la expresión. Usar <code>catch</code> sería lo mismo que usar el siguiente código:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token keyword">try</span>
    <span class="token atom">expresi</span>ó<span class="token atom">n</span>
<span class="token keyword">catch</span>
    <span class="token atom">throw</span><span class="token punctuation">:</span><span class="token variable">Motivo</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
        <span class="token variable">Motivo</span><span class="token punctuation">;</span>
    <span class="token atom">exit</span><span class="token punctuation">:</span><span class="token variable">Motivo</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token quoted-atom atom">'EXIT'</span><span class="token punctuation">,</span> <span class="token variable">Motivo</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token atom">error</span><span class="token punctuation">:</span><span class="token variable">Motivo</span><span class="token punctuation">:</span><span class="token variable">Pila</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token quoted-atom atom">'EXIT'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token variable">Motivo</span><span class="token punctuation">,</span> <span class="token variable">Pila</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">end</span>
</code></pre>
<h2 id="módulos">Módulos</h2>
<p>Los <a href="https://www.erlang.org/doc/reference_manual/modules.html">módulos</a> en Erlang son la unidad en la que se organiza el código de nuestros proyectos. Todo <strong>módulo</strong> se compone en una secuencia de <strong>atributos</strong> y declaración de <strong>funciones</strong>, terminadas con punto cada una de ellas.</p>
<p>Aunque Erlang es un lenguaje donde las variables obtienen su tipo de forma dinámica, el lenguaje nos permite definir tipos para documentar los módulos usando la <a href="https://www.erlang.org/doc/reference_manual/typespec.html">especificación de tipos</a>. Que un lenguaje no requiera indicar el tipo de sus variables, no quiere decir que este lenguaje no tenga un sistema de tipos, por ello también es importante conocer cuáles son los tipos con los que trabaja el lenguaje.</p>
<h3 id="atributos-de-un-módulo">Atributos de un módulo</h3>
<p>Todo atributo en Erlang tiene la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">-</mtext><mrow><mi>e</mi><mi>t</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>t</mi><mi>a</mi></mrow><mtext mathvariant="monospace">(</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><msub><mi>r</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><msub><mi>r</mi><mn mathvariant="italic">2</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{-} \mathit{etiqueta} \texttt{(} \mathit{valor_1} \textcolor{red}{[} \texttt{,}\ \mathit{valor_2} \textcolor{red}{]} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">-</span></span><span class="mord"><span class="mord mathit">etiqueta</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">valo</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">valo</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Donde la <em>etiqueta</em> es un átomo y los <em>valores</em> son expresiones literales. Esta es la lista de atributos básicos que se puede definir para un módulo:</p>

<table>
<thead>
<tr>
<th align="center">Etiqueta</th>
<th align="left">Parámetros y Tipos</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>module</code></td>
<td align="left">Nombre: <code>atom()</code></td>
<td align="left">Declara cuál es el nombre del módulo. Por requisitos técnicos, el nombre del fichero y del módulo han de ser el mismo, exceptuando por la extensión <code>.erl</code>.</td>
</tr>
<tr>
<td align="center"><code>export</code></td>
<td align="left">Funciones: <code>[atom()/integer()]</code></td>
<td align="left">Declara cuáles son las funciones públicas del módulo, aquellas que pueden ser accesibles desde otros módulos. El parámetro <em>funciones</em> es una lista con los identificadores de las funciones, que tienen la sintaxis <code>Nombre/Aridad</code>.</td>
</tr>
<tr>
<td align="center"><code>import</code></td>
<td align="left">Nombre: <code>atom()</code><br>Funciones: <code>[atom()/integer()]</code></td>
<td align="left">Importa una lista de funciones dentro del módulo actual, para no necesitar usar el operador <code>:</code> al invocar dichas funciones, usando únicamente el nombre de las mismas.</td>
</tr>
<tr>
<td align="center"><code>compile</code></td>
<td align="left">Opciones: <code>option()</code> o <code>[option()]</code></td>
<td align="left">Añade opciones de compilación extras al compilar el módulo. El parámetro <em>opciones</em> puede ser una sola opción o una lista de ellas, las cuales están descritas en la documentación del módulo <a href="https://www.erlang.org/doc/man/compile.html"><code>compile</code></a>.</td>
</tr>
<tr>
<td align="center"><code>vsn</code></td>
<td align="left">Versión: <code>any()</code></td>
<td align="left">Declara la versión del módulo. La versión es cualquier literal y se puede obtener con la función <code>version/1</code> del módulo <a href="https://www.erlang.org/doc/reference_manual/typespec.html"><code>beam_lib</code></a>.</td>
</tr>
<tr>
<td align="center"><code>on_load</code></td>
<td align="left">Función: <code>atom()/integer()</code></td>
<td align="left">Indica qué función, dentro del módulo, ha de ser invocada al cargarse.</td>
</tr>
<tr>
<td align="center"><code>behaviour</code></td>
<td align="left">Nombre: <code>atom()</code></td>
<td align="left">Indica que el módulo implementa los <em>callbacks</em> que definen a un comportamiento.</td>
</tr>
</tbody>
</table><blockquote>
<p>Cuando en Erlang se usa la forma <code>Nombre/Aridad</code>, el compilador lo traduce a la expresión <code>{Nombre,Aridad}</code>.</p>
</blockquote>
<h3 id="las-funciones-module_info">Las funciones: <code>module_info</code></h3>
<p>Todo módulo contiene dos funciones generadas por el compilador que son <code>module_info/0</code> y <code>module_info/1</code>, que devuelven información relativa al módulo en cuestión. El resultado de <code>module_info/0</code> devuelve una lista de tuplas <code>{Clave,Valor}</code>, mientras que <code>module_info/1</code> recibe como parámetro la <em>clave</em> y te devuelve el <em>valor</em> asociado. Estas son las <em>claves</em> disponibles:</p>

<table>
<thead>
<tr>
<th align="center">Clave</th>
<th align="center">Tipo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>module</code></td>
<td align="center"><code>atom()</code></td>
<td align="left">Devuelve el nombre del módulo.</td>
</tr>
<tr>
<td align="center"><code>attributes</code></td>
<td align="center"><code>[atom(),any()]</code></td>
<td align="left">Devuelve los atributos del módulo mediante una lista de tuplas <code>{Etiqueta, Valores}</code>.</td>
</tr>
<tr>
<td align="center"><code>compile</code></td>
<td align="center"><code>[option()]</code></td>
<td align="left">Devuelve una lista con las opciones usadas para compilar el módulo.</td>
</tr>
<tr>
<td align="center"><code>exports</code></td>
<td align="center"><code>[{atom(),integer()}]</code></td>
<td align="left">Devuelve una lista con las funciones públicas del módulo.</td>
</tr>
<tr>
<td align="center"><code>functions</code></td>
<td align="center"><code>[{atom(),integer()}]</code></td>
<td align="left">Devuelve una lista con todas las funciones del módulo.</td>
</tr>
<tr>
<td align="center"><code>md5</code></td>
<td align="center"><code>binary()</code></td>
<td align="left">Devuelve un bloque binario que representa la <a href="https://es.wikipedia.org/wiki/Suma_de_verificaci%C3%B3n">suma de verificación</a> <a href="https://es.wikipedia.org/wiki/MD5">MD5</a> del módulo.</td>
</tr>
<tr>
<td align="center"><code>native</code></td>
<td align="center"><code>boolean()</code></td>
<td align="left">Devuelve si el módulo contiene <a href="https://www.erlang.org/doc/tutorial/nif.html">funciones nativas</a>.</td>
</tr>
<tr>
<td align="center"><code>nifs</code></td>
<td align="center"><code>[{atom(),integer()}]</code></td>
<td align="left">Devuelve una lista con todas las <a href="https://www.erlang.org/doc/tutorial/nif.html">funciones nativas</a> del módulo.</td>
</tr>
</tbody>
</table><h3 id="preprocesador">Preprocesador</h3>
<p>El <a href="https://www.erlang.org/doc/reference_manual/macros.html">preprocesador</a> en Erlang nos permite realizar operaciones de sustitución durante la compilación de un módulo. Una de las operaciones es el <strong>incluir ficheros</strong> externos dentro del módulo actual, para insertar definiciones que necesitemos. Para ello usaremos:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">-include(</mtext><mrow><mi>f</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{-include(}\mathit{fichero}\texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">-include(</span></span><span class="mord"><span class="mord mathit">fichero</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Habitualmente los ficheros que se insertan son ficheros <code>.hrl</code>, que son ficheros de cabecera con macros y definiciones de registros de uso compartido entre varios módulos de nuestro proyecto. Existe una variante que es <code>-include_lib(fichero)</code>, que sirve para incluir cabeceras de la biblioteca estándar de Erlang. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">include_lib</span><span class="token punctuation">(</span><span class="token string">"kernel/include/file.hrl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>La otra operación importante del preprocesador son las <strong>macros</strong>, que realizan sustituciones dentro del módulo. Para definir macros la sintaxis es la siguiente:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">-define(</mtext><mrow><mi>I</mi><mi>D</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">(</mtext><mrow><mi>V</mi><mi>a</mi><msub><mi>r</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>V</mi><mi>a</mi><msub><mi>r</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">,</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{-define(} \mathit{ID} \textcolor{red}{[} \texttt{(} \mathit{Var_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{Var_n} \textcolor{red}{]} \texttt{)} \textcolor{red}{]} \texttt{,} \mathit{expresi\acute{o}n} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">-define(</span></span><span class="mord"><span class="mord mathit">ID</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">Va</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">Va</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">)</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Lo primero es indicar el <em>nombre identificador</em> de la macro, que por convención se suele usar un nombre en mayúsculas. Después, dependiendo de si queremos parametrizar o no la macro, podemos poner una secuencia de <em>variables</em> como argumentos de entrada para la marco. Finalmente, tendremos una <em>expresión</em> que será usada como resultado final, después de sustituir las variables definidas como parámetros de entrada.</p>
<p>Para invocar una macro se usa la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">?</mtext><mrow><mi>I</mi><mi>D</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">(</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{?} \mathit{ID} \textcolor{red}{[} \texttt{(} \mathit{expresi\acute{o}n_1} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{expresi\acute{o}n_n} \textcolor{red}{]} \texttt{)} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">?</span></span><span class="mord"><span class="mord mathit">ID</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">)</span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token variable">VERSION</span><span class="token punctuation">,</span> <span class="token string">"1.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token variable">PRINTLN</span><span class="token punctuation">(</span><span class="token variable">V</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"~s := ~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>?<span class="token variable">?V</span><span class="token punctuation">,</span> <span class="token variable">V</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token variable">Victim</span> <span class="token operator">=</span> <span class="token variable">?VERSION</span><span class="token punctuation">,</span>
    <span class="token variable">?PRINTLN</span><span class="token punctuation">(</span><span class="token variable">Victim</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Si invocamos <code>foo</code> obtendremos como salida <code>Victim := "1.0"</code>. Esto es porque hemos asignado a la variable <code>Victim</code> el valor que representa la macro <code>?VERSION</code> y luego hemos invocado una macro con parámetros para mostrar una información por pantalla.</p>
<p>Nótese que dentro de la macro <code>PRINTLN</code> se utiliza <code>??V</code> con la variable de entrada <code>V</code> de la macro. Este mecanismo, de poner <code>??</code> delante de una variable de entrada, hace que se tome la expresión de entrada usada con la macro y se convierta a una cadena de texto. De ese modo, como la expresión de entrada de <code>PRINTLN</code> era la variable <code>Victim</code>, el resultado nos muestra eso mismo al aplicar la función <code>io:format/2</code>.</p>
<blockquote>
<p>Se puede sobrecargar un mismo identificador de macro, a excepción de las macros predefinidas del lenguaje, para poder tener diferentes macro parametrizadas con distinto número de argumentos de entrada.</p>
</blockquote>
<p>Estas son algunas de las macros predefinidas por el lenguaje:</p>

<table>
<thead>
<tr>
<th align="center">Nombre</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>?MODULE</code></td>
<td align="left">Nombre del módulo actual.</td>
</tr>
<tr>
<td align="center"><code>?MODULE_STRING</code></td>
<td align="left">Nombre del módulo actual como cadena.</td>
</tr>
<tr>
<td align="center"><code>?FILE</code></td>
<td align="left">Nombre del fichero del módulo actual.</td>
</tr>
<tr>
<td align="center"><code>?LINE</code></td>
<td align="left">Número de línea actual.</td>
</tr>
<tr>
<td align="center"><code>?MACHINE</code></td>
<td align="left">Nombre de la máquina: <code>'BEAM'</code>.</td>
</tr>
<tr>
<td align="center"><code>?FUNCTION_NAME</code></td>
<td align="left">Nombre de la función actual.</td>
</tr>
<tr>
<td align="center"><code>?FUNCTION_ARITY</code></td>
<td align="left">Número de argumentos de la función actual.</td>
</tr>
<tr>
<td align="center"><code>?OTP_RELEASE</code></td>
<td align="left">Versión actual de Erlang/OTP.</td>
</tr>
</tbody>
</table><p>También podemos controlar parte del flujo del preprocesador con:</p>

<table>
<thead>
<tr>
<th align="center">Comando</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>-undef(Macro).</code></td>
<td align="left">Borra la definición de la macro para el módulo actual a partir de esa posición dentro del fichero.</td>
</tr>
<tr>
<td align="center"><code>-ifdef(Macro).</code></td>
<td align="left">Permite acceder a las líneas siguientes si la macro indicada ha sido definida.</td>
</tr>
<tr>
<td align="center"><code>-ifndef(Macro).</code></td>
<td align="left">Permite acceder a las líneas siguientes si la macro indicada no ha sido definida.</td>
</tr>
<tr>
<td align="center"><code>-if(Condición).</code></td>
<td align="left">Permite acceder a las líneas siguientes si la condición indicada se cumple, dando como resultado <code>true</code>.</td>
</tr>
<tr>
<td align="center"><code>-elif(Condición).</code></td>
<td align="left">Sólo se pueden usar después de un bloque <code>-if</code> o <code>-elif</code>. Permitirá acceder a las líneas siguientes si la condición se cumple y no se ha cumplido ninguna de las condiciones de los bloques anteriores.</td>
</tr>
<tr>
<td align="center"><code>-else.</code></td>
<td align="left">Sólo se pueden usar después de un bloque <code>-ifdef</code> o <code>-ifndef</code>. Si no se ha cumplido ninguna de las condiciones previas, permite acceder a las líneas siguientes.</td>
</tr>
<tr>
<td align="center"><code>-endif.</code></td>
<td align="left">Cierra el último bloque de control condicional del preprocesador.</td>
</tr>
</tbody>
</table><p>Estos comandos no se pueden utilizar en el interior de la definición de una función. Normalmente se utilizan para tener diferentes versiones de código, dependiendo de alguna condición o de la existencia de una definición de macro previa.</p>
<p>Existen dos comandos adicionales para interactuar con la compilación de un módulo. Con <code>-error(Expresión)</code> podemos emitir un mensaje de error y con <code>-warning(Expresión)</code> podemos emitir un mensaje de aviso. Ambos comandos mostrarán dichos mensajes en tiempo de compilación.</p>
<h2 id="procesos-y-comunicación">Procesos y comunicación</h2>
<p>La concurrencia es una de las características principales del lenguaje Erlang, para ello podemos crear <a href="https://www.erlang.org/doc/reference_manual/processes.html"><strong>procesos</strong></a> que sean ejecutados aparentemente a la vez que otros. La arquitectura de Erlang permite que estos procesos sean ligeros y se puedan crear y destruir rápido.</p>
<p>Dentro de cada instancia iniciada de la máquina virtual, hay una serie de <strong>planificadores</strong> (<em>scheduler</em>) que tienen una <strong>cola de ejecución</strong> (<em>run queue</em>), para organizar qué procesos gestiona y su orden de ejecución. Por cada núcleo del procesador se tiene un planificador (salvo que se desactive el <em>SMP</em>), que organiza la ejecución de los procesos a su cargo de forma <a href="https://es.wikipedia.org/wiki/Computaci%C3%B3n_concurrente"><strong>concurrente</strong></a> pero no <a href="https://es.wikipedia.org/wiki/Computaci%C3%B3n_paralela"><strong>paralela</strong></a>.</p>
<p>También es posible hacer <strong>aplicaciones distribuidas</strong>, para ello hay que configurar una red de instancias de la máquina virtual como <a href="https://www.erlang.org/doc/reference_manual/distributed.html"><strong>nodos</strong></a>. Cada nodo tendrá sus propios planificadores y además cualquier nodo puede encargar la ejecución de un proceso a otro nodo.</p>
<h3 id="creación-simple-de-procesos">Creación simple de procesos</h3>
<p>Para crear procesos tenemos la función <code>spawn</code>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn(</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn(} \mathit{funci\acute{o}n} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn(</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn(</mtext><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>a</mi><mi>r</mi><mi>g</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn(} \mathit{m\acute{o}dulo} \texttt{,} \mathit{funci\acute{o}n} \texttt{,} \mathit{argumentos} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn(</span></span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">argumentos</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Ambas funciones devuelven como resultado un <strong>identificador de proceso</strong> o <em>PID</em>, cuyo tipo es <code>pid()</code>. El PID obtenido nos permitirá poder comunicarnos con el proceso creado. El parámetro <em>función</em> de <code>spawn/1</code> tiene que ser un valor funcional, mientras que en <code>spawn/3</code> los dos primeros parámetros han de ser un átomo y a continuación una lista con los argumentos necesarios para invocar la función. Por ejemplo:</p>
<pre><code>1&gt; spawn(fun() -&gt; erlang:system_time() end).
&lt;0.81.0&gt;
2&gt; spawn(fun erlang:system_time/0).
&lt;0.86.0&gt;
3&gt; spawn(erlang, system_time, []).
&lt;0.88.0&gt;
</code></pre>
<p>Vemos varias formas de crear un proceso con la función <code>erlang:system_time/0</code>, que también podría haber incluido usar una variable que esté ligada a un valor funcional. Los resultados que vemos en la consola de Erlang, al usar <code>spawn</code>, es el PID devuelto que representa al proceso creado.</p>
<h3 id="comunicación-entre-procesos">Comunicación entre procesos</h3>
<p>La comunicación entre procesos se realiza mediante el paso de mensajes. Para <strong>enviar</strong> uno se usa la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>c</mi><mi>e</mi><mi>s</mi><mi>o</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">!</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow></mrow><annotation encoding="application/x-tex">\mathit{proceso}\ \texttt{!}\ \mathit{expresi\acute{o}n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">proceso</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">!</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span></span></span></span></span></span></p>
<p>Mientras que el mensaje puede ser cualquier <em>expresión</em>, el <em>proceso</em> puede ser identificado mediante un PID (<code>pid()</code>), una referencia (<code>reference()</code>), un puerto de comunicación (<code>port()</code>), un nombre registrado (<code>atom()</code>), o una tupla <code>{Nombre, Nodo}</code>, en la que ambas componentes son nombres que identifican al proceso y al nodo donde se encuentra. El resultado, de la expresión de envío, es la propia <em>expresión</em> enviada.</p>
<blockquote>
<p>La expresión <code>!</code> es azúcar sintáctico de la función <code>erlang:send/2</code>, siendo esta la función primitiva que realmente se usa al ejecutar el programa.</p>
</blockquote>
<p>Para <strong>recibir</strong> mensajes necesitamos la sintaxis siguiente:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">receive</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{receive} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">receive</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext mathvariant="monospace">;</mtext></mrow><annotation encoding="application/x-tex">\mathit{patr\acute{o}n_1}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_1} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_1}\texttt{;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mord text"><span class="mord texttt">;</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.53em; vertical-align: -0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>r</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><msub><mi>n</mi><mi>n</mi></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">when</mtext><mtext>&nbsp;</mtext><mrow><mi>g</mi><mi>u</mi><mi>a</mi><mi>r</mi><mi>d</mi><mi>a</mi><msub><mi>s</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><msub><mi>s</mi><mi>n</mi></msub></mrow></mrow><annotation encoding="application/x-tex">\mathit{patr\acute{o}n_n}\ \textcolor{red}{[} \texttt{when}\ \mathit{guardas_n} \textcolor{red}{]}\ \texttt{-&gt;}\ \mathit{expresiones_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">patr</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">when</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">guarda</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresione</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">after</mtext><mtext>&nbsp;</mtext><mrow><mi>t</mi><mi>i</mi><mi>e</mi><mi>m</mi><mi>p</mi><mi>o</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="1em"></mspace></mrow><annotation encoding="application/x-tex">\textcolor{red}{[} \texttt{after}\ \mathit{tiempo}\ \texttt{-&gt;}\ \mathit{expresiones}\textcolor{red}{]} \qquad\qquad\quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">after</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">tiempo</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresiones</span></span><span class="mclose" style="color: red;">]</span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 1em;"></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">end</mtext><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace><mspace width="2em"></mspace></mrow><annotation encoding="application/x-tex">\texttt{end} \qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad\qquad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61111em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">end</span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span><span class="mspace" style="margin-right: 2em;"></span></span></span></span></span></span></p>
<p>Esencialmente <code>receive</code> es como <code>case</code> aplicado a los valores de la cola de mensajes del proceso. Se comportan igual en cuanto al funcionamiento de las cláusulas, la diferencia es que <code>receive</code> dispone de una cláusula <code>after</code>, que requiere de un valor que representa el máximo tiempo de espera en milisegundos para recibir un mensaje. Si el tiempo de espera se ha agotado, se ejecuta el cuerpo de expresiones y se sale de la expresión <code>receive</code>. Los valores que admite son enteros entre <code>0</code> y <code>4294967295</code>. Si se omite la cláusula <code>after</code>, por defecto se asigna al <em>tiempo</em> el átomo <code>infinity</code>, indicando así que se ha de esperar indefinidamente hasta recibir un mensaje.</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token variable">PID</span> <span class="token operator">=</span> <span class="token function">spawn</span><span class="token punctuation">(</span>
        <span class="token keyword">fun</span> <span class="token variable">Loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
            <span class="token keyword">receive</span>
                <span class="token atom">stop</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
                    <span class="token atom">stop</span><span class="token punctuation">;</span>
                <span class="token variable">X</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
                    <span class="token atom">io</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"~p~n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">X</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token variable">Loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token variable">PID</span> <span class="token operator">!</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span>
    <span class="token variable">PID</span> <span class="token operator">!</span> <span class="token punctuation">{</span><span class="token atom">data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token atom">a</span><span class="token punctuation">,</span><span class="token atom">b</span><span class="token punctuation">,</span><span class="token atom">c</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token variable">PID</span> <span class="token operator">!</span> <span class="token atom">stop</span><span class="token punctuation">,</span>
    <span class="token variable">PID</span> <span class="token operator">!</span> <span class="token string">"Bye"</span><span class="token punctuation">.</span>
</code></pre>
<p>Al ejecutar esta función veremos los mensajes <code>"Hello"</code>  y <code>{data, [a,b,c]}</code>, pero no veremos <code>"Bye"</code> porque el proceso ya finalizó.</p>
<h3 id="poniendo-nombres-y-alias">Poniendo nombres y alias</h3>
<p>Erlang permite poner asociar a un PID un átomo como nombre. Para gestionarlo tenemos las siguientes funciones nativas:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>register(Nombre, PID)</code></td>
<td align="left">Asocia un átomo como nombre para un PID.</td>
</tr>
<tr>
<td align="center"><code>registered()</code></td>
<td align="left">Da la lista de todos los nombres registrados.</td>
</tr>
<tr>
<td align="center"><code>whereis(Nombre)</code></td>
<td align="left">Da el PID asociado a un nombre registrado o <code>undefined</code> si no está registrado.</td>
</tr>
</tbody>
</table><p>Además podemos crear un alias para un proceso con la función <code>alias()</code>, que devuelve una referencia asociada al proceso que invoca la función.  Con <code>unalias(Referencia)</code> se desactiva el alias registrado.</p>
<h3 id="controlando-procesos">Controlando procesos</h3>
<p>Erlang permite dos modos de controlar la muerte prematura de procesos. El primero es con <strong>enlaces</strong>, que conecta dos procesos entre sí y cuando uno muere el otro también lo hace recibiendo una <em>excepción</em>. Podemos crear un proceso enlazado al actual con:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn_link(</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn\char95link(} \mathit{funci\acute{o}n} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn_link(</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn_link(</mtext><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>a</mi><mi>r</mi><mi>g</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn\char95link(} \mathit{m\acute{o}dulo} \texttt{,} \mathit{funci\acute{o}n} \texttt{,} \mathit{argumentos} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn_link(</span></span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">argumentos</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Si queremos enlazar un proceso ya creado al actual usaremos <code>link(PID)</code>, pudiendo revertir el enlace con <code>unlink(PID)</code>. También se puede cambiar el comportamiento por defecto, para capturar la excepción como si fuera un mensaje recibido con <code>process_flag(trap_exit, true)</code>, mensajes que tendrían la forma:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mtext mathvariant="monospace">{’EXIT’,</mtext><mtext>&nbsp;</mtext></mrow><mrow><mi>p</mi><mi>i</mi><mi>d</mi></mrow><mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext></mrow><mrow><mi>m</mi><mi>o</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>o</mi></mrow><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char123'EXIT', } \mathit{pid} \texttt{, } \mathit{motivo} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">{’EXIT’,&nbsp;</span></span><span class="mord"><span class="mord mathit">pid</span></span><span class="mord text"><span class="mord texttt">,&nbsp;</span></span><span class="mord"><span class="mord mathit">motivo</span></span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>El <em>pid</em> es el identificador de proceso que ha muerto y el <em>motivo</em> es la información relativa a la excepción, que dependiendo del tipo tendrá la siguiente forma:</p>

<table>
<thead>
<tr>
<th align="center">Tipo</th>
<th align="center">Forma</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>exit(Valor)</code></td>
<td align="center"><code>Valor</code></td>
</tr>
<tr>
<td align="center"><code>error(Valor)</code></td>
<td align="center"><code>{Valor, Pila}</code></td>
</tr>
<tr>
<td align="center"><code>throw(Valor)</code></td>
<td align="center"><code>{{nocatch, Valor}, Pila}</code></td>
</tr>
</tbody>
</table><blockquote>
<p>Al activar el <em>flag</em> <code>trap_exit</code>, cuando termine un proceso de forma normal se recibirá un mensaje con la forma <code>{'EXIT', PID, normal}</code>, siendo <em>PID</em> el identificador del proceso que acaba de terminar. Esto es importante, porque <code>exit(normal)</code> es considerada una terminación normal del proceso, por lo que usarlo no finalizará al proceso enlazado si no tiene el <em>flag</em> <code>trap_exit</code> activado.</p>
</blockquote>
<p>El segundo modo es con <strong>monitores</strong>, que conecta dos procesos entre sí, donde uno es el monitor y el otro el monitorizado. Cuando el proceso monitorizado muere, el proceso monitor recibe un mensaje con la forma:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mtext mathvariant="monospace">{’DOWN’,</mtext><mtext>&nbsp;</mtext></mrow><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>i</mi><mi>a</mi></mrow><mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mtext mathvariant="monospace">process,</mtext><mtext>&nbsp;</mtext></mrow><mrow><mi>p</mi><mi>i</mi><mi>d</mi></mrow><mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext></mrow><mrow><mi>m</mi><mi>o</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>o</mi></mrow><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char123'DOWN', } \mathit{referencia} \texttt{, process, } \mathit{pid} \texttt{, } \mathit{motivo} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">{’DOWN’,&nbsp;</span></span><span class="mord"><span class="mord mathit">referencia</span></span><span class="mord text"><span class="mord texttt">,&nbsp;process,&nbsp;</span></span><span class="mord"><span class="mord mathit">pid</span></span><span class="mord text"><span class="mord texttt">,&nbsp;</span></span><span class="mord"><span class="mord mathit">motivo</span></span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>Podemos crear un proceso monitorizado por el actual con:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn_monitor(</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn\char95monitor(} \mathit{funci\acute{o}n} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn_monitor(</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn_monitor(</mtext><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>a</mi><mi>r</mi><mi>g</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn\char95monitor(} \mathit{m\acute{o}dulo} \texttt{,} \mathit{funci\acute{o}n} \texttt{,} \mathit{argumentos} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn_monitor(</span></span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">argumentos</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>El otro método, para monitorizar un proceso, es usando la función <code>monitor(process, PID)</code> para activarlo, que nos devuelve una referencia para identificar la relación, y <code>demonitor(Referencia)</code> para desactivarlo.</p>
<p>Es posible finalizar la ejecución de un proceso con la función <code>exit(PID, Motivo)</code>. Al usar el átomo <code>kill</code>, se asume que se está matando al proceso de forma abrupta, obteniendo <code>killed</code> como motivo de la excepción al capturarla con un mensaje. Se pueden usar otros valores para terminar un proceso, pero intentarlo con <code>normal</code> no funcionará. Si un proceso termina desde dentro con <code>exit(kill)</code>, el motivo que se capturará como mensaje es <code>kill</code> en lugar de <code>killed</code>.</p>
<h3 id="diccionario-del-proceso">Diccionario del proceso</h3>
<p>Todo proceso tiene asociado al mismo un diccionario interno. Lo podemos manejar con las siguientes funciones:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>put(Clave, Valor)</code></td>
<td align="left">Asigna un valor a una clave.</td>
</tr>
<tr>
<td align="center"><code>get(Clave)</code></td>
<td align="left">Obtiene el valor de una clave. Si no existe se devuelve <code>undefined</code>.</td>
</tr>
<tr>
<td align="center"><code>get()</code></td>
<td align="left">Devuelve el contenido como una lista <code>{Clave, Valor}</code>.</td>
</tr>
<tr>
<td align="center"><code>get_keys(Valor)</code></td>
<td align="left">Obtiene una lista con las claves que tienen el valor indicado.</td>
</tr>
<tr>
<td align="center"><code>erase(Clave)</code></td>
<td align="left">Borra una clave del diccionario. Si la clave existe devuelve el valor asociado y si no <code>undefined</code>.</td>
</tr>
<tr>
<td align="center"><code>erase()</code></td>
<td align="left">Borra el contenido del diccionario, devolviéndolo como una lista <code>{Clave, Valor}</code>.</td>
</tr>
</tbody>
</table><h3 id="procesos-distribuidos">Procesos distribuidos</h3>
<p>Para crear un nodo hace falta iniciar la máquina virtual de Erlang dándole un nombre de nodo. Las opciones para configurar un nodo con el comando con <code>erl</code> son:</p>

<table>
<thead>
<tr>
<th align="center">Opción</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>-sname Nombre</code></td>
<td align="left">Activa el nodo con un nombre corto.</td>
</tr>
<tr>
<td align="center"><code>-name Nombre</code></td>
<td align="left">Activa el nodo con un nombre largo.</td>
</tr>
<tr>
<td align="center"><code>-setcookie Cookie</code></td>
<td align="left">Configura la cookie del nodo.</td>
</tr>
<tr>
<td align="center"><code>-setcookie Nodo Cookie</code></td>
<td align="left">Configura la cookie del nodo.</td>
</tr>
<tr>
<td align="center"><code>-hidden</code></td>
<td align="left">El nodo será invisible al resto de la red de nodos.</td>
</tr>
<tr>
<td align="center"><code>-connect_all false</code></td>
<td align="left">Sólo se permiten las conexiones explícitas.</td>
</tr>
</tbody>
</table><p>Un nombre de nodo suele ser un átomo con la forma <code>Nombre@Máquina</code>, donde <em>máquina</em> varía dependiendo de si se elige un nombre corto o largo. La red de nodos de Erlang no está preparada para temas de seguridad, pues el sistema fue diseñado en los años 80, cuando el acceso a las redes era más rudimentario. Para separar las redes de nodos se puede usar una <em>cookie</em>, que es un átomo, para que sólo puedan conectarse aquellos nodos que comparten la misma <em>cookie</em>.</p>
<p>Algunas funciones nativas para gestionar los nodos son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>node()</code></td>
<td align="left">Da el nombre del nodo actual.</td>
</tr>
<tr>
<td align="center"><code>node(Valor)</code></td>
<td align="left">Da el nombre del nodo que encaja con el <em>valor</em> indicado, que puede ser un PID, una referencia o un puerto.</td>
</tr>
<tr>
<td align="center"><code>nodes()</code></td>
<td align="left">Da la lista de nodos actual.</td>
</tr>
<tr>
<td align="center"><code>nodes(Valor)</code></td>
<td align="left">Da la lista de nodos actual en base a la opción indicada como <em>valor</em>.</td>
</tr>
<tr>
<td align="center"><code>is_alive()</code></td>
<td align="left">Devuelve si el nodo actual puede conectarse al resto de nodos.</td>
</tr>
<tr>
<td align="center"><code>monitor_node(Nodo, Bool)</code></td>
<td align="left">Monitoriza el estado de un nodo, recibiendo <code>{nodedown, Nodo}</code> como mensaje si se pierde la conexión.</td>
</tr>
<tr>
<td align="center"><code>erlang:get_cookie()</code></td>
<td align="left">Da la <em>cookie</em> actual del nodo.</td>
</tr>
<tr>
<td align="center"><code>erlang:get_cookie(Nodo)</code></td>
<td align="left">Da la <em>cookie</em> actual de un nodo.</td>
</tr>
<tr>
<td align="center"><code>erlang:set_cookie(Cookie)</code></td>
<td align="left">Cambia la <em>cookie</em> actual del nodo.</td>
</tr>
<tr>
<td align="center"><code>erlang:set_cookie(Nodo, Cookie)</code></td>
<td align="left">Cambia la <em>cookie</em> actual de un nodo.</td>
</tr>
<tr>
<td align="center"><code>erlang:disconnect_node(Nodo)</code></td>
<td align="left">Desconecta un nodo de la red.</td>
</tr>
</tbody>
</table><p>Además podemos crear un proceso en un nodo que queramos con:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn(</mtext><mrow><mi>n</mi><mi>o</mi><mi>d</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn(} \mathit{nodo} \texttt{,} \mathit{funci\acute{o}n} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn(</span></span><span class="mord"><span class="mord mathit">nodo</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">spawn(</mtext><mrow><mi>n</mi><mi>o</mi><mi>d</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>a</mi><mi>r</mi><mi>g</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{spawn(} \mathit{nodo} \texttt{,} \mathit{m\acute{o}dulo} \texttt{,} \mathit{funci\acute{o}n} \texttt{,} \mathit{argumentos} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">spawn(</span></span><span class="mord"><span class="mord mathit">nodo</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">funci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">argumentos</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>También se puede aplicar esto para el caso de <code>spawn_link</code> y <code>spawn_monitor</code>.</p>
<h2 id="comportamientos">Comportamientos</h2>
<p>Lo <em>comportamientos</em> en Erlang es un tipo de interfaz que un módulo puede implementar. Esta interfaz tienen que tener una serie de funciones determinadas, para que el módulo, que define la interfaz de comportamiento, pueda operar con el módulo que la implementa. Estas funciones que ha de tener un módulo para implementar un <em>comportamiento</em> se llaman <em>callbacks</em>. Declaramos la implementación de un <em>comportamiento</em> con el siguiente atributo:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">-behaviour(</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{-behaviour(} \mathit{nombre} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">-behaviour(</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>El nombre es un átomo con el nombre del módulo que define el <em>comportamiento</em> en cuestión, ya sea uno definido por el usuario o uno de los siguientes de la biblioteca estándar de OTP: <code>gen_server</code>, <code>gen_statem</code>, <code>gen_event</code>, <code>supervisor</code>. Erlang también permite usar <code>behavior</code> como etiqueta del atributo.</p>
<p>Para crear una interfaz de comportamiento propia, dentro de nuestro módulo tendremos que indicar una lista de atributos que definan los <em>callbacks</em> a implementar, usando una sintaxis similar a la <a href="https://www.erlang.org/doc/reference_manual/typespec.html">especificación de tipos</a>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">-callback</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">(</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>v</mi><mi>a</mi><msub><mi>r</mi><mn mathvariant="italic">1</mn></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mo>:</mo><mo>:</mo></mrow><mtext>&nbsp;</mtext><mrow><mi>t</mi><mi>i</mi><mi>p</mi><msub><mi>o</mi><mn mathvariant="italic">1</mn></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mo>…</mo><mtext mathvariant="monospace">,</mtext><mrow><mi>v</mi><mi>a</mi><msub><mi>r</mi><mi>n</mi></msub></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mo>:</mo><mo>:</mo></mrow><mtext>&nbsp;</mtext><mrow><mi>t</mi><mi>i</mi><mi>p</mi><msub><mi>o</mi><mi>n</mi></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext><mtext>&nbsp;</mtext><mtext mathvariant="monospace">-&gt;</mtext><mtext>&nbsp;</mtext><mrow><mi>t</mi><mi>i</mi><mi>p</mi><mi>o</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{-callback}\ \mathit{nombre} \texttt{(} \textcolor{red}{[} \mathit{var_1}\ \textcolor{red}{[} \mathtt{::}\ \mathit{tipo_1} \textcolor{red}{]} \textcolor{red}{[} \texttt{,} \dots \texttt{,} \mathit{var_n}\ \textcolor{red}{[} \mathtt{::}\ \mathit{tipo_n} \textcolor{red}{]} \textcolor{red}{]} \textcolor{red}{]} \texttt{)}\ \texttt{-&gt;}\ \mathit{tipo}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">-callback</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">va</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mrel">::</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">tip</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">va</span><span class="mord"><span class="mord mathit">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mrel">::</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">tip</span><span class="mord"><span class="mord mathit">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]]]</span><span class="mord text"><span class="mord texttt">)</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">-&gt;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">tipo</span></span></span></span></span></span></span></p>
<p>Además tenemos el atributo de módulo <code>optional_callbacks</code>, que tiene como valor una lista de los <em>callbacks</em> (<code>Nombre/Aridad</code>) que son opcionales para implementar la interfaz de comportamiento.</p>
<p>Por ejemplo, creamos la siguiente interfaz de comportamiento:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token atom">foobeh</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token comment">% Otros atributos</span>

<span class="token operator">-</span><span class="token atom">callback</span> <span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token atom">callback</span> <span class="token function">pong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token comment">% Otras funciones</span>
</code></pre>
<p>Para implementarla tendremos que:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token atom">foo</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token function">behaviour</span><span class="token punctuation">(</span><span class="token atom">foobeh</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token atom">ping</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token atom">pong</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token comment">% Otros atributos</span>

<span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">.</span>
<span class="token function">pong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">false</span><span class="token punctuation">.</span>

<span class="token comment">% Otras funciones</span>
</code></pre>
<h3 id="el-comportamiento-gen_server">El comportamiento: <code>gen_server</code></h3>
<p>Este comportamiento se utiliza para crear <a href="https://www.erlang.org/doc/design_principles/gen_server_concepts.html">servidores genéricos</a> que ofrecen una serie de servicios mediante peticiones. Los eventos que se han de implementar son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="center">Resultados</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>init</code></td>
<td align="center"><code>(Argumentos)</code></td>
<td align="center"><code>{ok,Estado}</code><br><code>{ok,Estado,Extra}</code><br><code>{stop,Motivo}</code><br><code>ignore</code></td>
<td align="left">Inicialización del servidor.</td>
</tr>
<tr>
<td align="center"><code>handle_call</code></td>
<td align="center"><code>(Petición, Origen, Estado)</code></td>
<td align="center"><code>{reply,Resultado,Estado}</code><br><code>{reply,Resultado,Estado,Extra}</code><br><code>{noreply,Estado}</code><br><code>{noreply,Estado,Extra}</code><br><code>{stop,Motivo,Estado}</code><br><code>{stop,Motivo,Resultado,Estado}</code></td>
<td align="left">Peticiones con respuesta.</td>
</tr>
<tr>
<td align="center"><code>handle_cast</code></td>
<td align="center"><code>(Petición, Estado)</code></td>
<td align="center"><code>{noreply,Estado}</code><br><code>{noreply,Estado,Extra}</code><br><code>{stop,Motivo,Estado}</code></td>
<td align="left">Peticiones sin respuesta.</td>
</tr>
<tr>
<td align="center"><code>handle_info</code></td>
<td align="center"><code>(Mensaje, Estado)</code></td>
<td align="center"><code>{noreply,Estado}</code><br><code>{noreply,Estado,Extra}</code><br><code>{stop,Motivo,Estado}</code></td>
<td align="left">Mensajes recibidos que no son peticiones para el servidor.</td>
</tr>
<tr>
<td align="center"><code>code_change</code></td>
<td align="center"><code>(Versión, Estado, Extra)</code></td>
<td align="center"><code>{ok,Estado}</code><br><code>{error,Motivo}</code></td>
<td align="left">Cambio en caliente.</td>
</tr>
<tr>
<td align="center"><code>terminate</code></td>
<td align="center"><code>(Motivo, Estado)</code></td>
<td align="center">-</td>
<td align="left">Terminación del servidor.</td>
</tr>
</tbody>
</table><p>Sólo son obligatorias <code>init</code>, <code>handle_call</code> y <code>handle_cast</code>, el resto son opcionales. En el caso de <code>terminate</code> podemos devolver cualquier valor que necesitemos. En el caso de <code>handle_info</code>, uno de sus usos es gestionar los mensajes que recibe cuando está enlazado o monitoriza otro proceso.</p>
<p>Las opciones <em>extra</em> en la respuesta pueden ser <code>Timeout</code> e <code>hibernate</code>. El primero es un número entero de tiempo de espera en milisegundos o el átomo <code>infinity</code>, que es el valor por defecto como opción. El segundo envía al servidor a un estado de hibernación, a la espera de recibir un mensaje para reactivarse.</p>
<blockquote>
<p>El cambio en caliente (<em>hot swapping</em>) se refiere a cuando se carga en la máquina virtual otra versión de un módulo ya cargado. Comportamientos como el <code>gen_server</code> reaccionan ante esta eventualidad invocando a <code>code_change</code>, donde la <em>versión</em> puede ser o bien un átomo que identifica la nueva versión, o tener la forma <code>{down, Versión}</code> cuando se trata de cargar una versión anterior. Con este evento podemos transformar la información de estado del servidor, para adaptarla a la siguiente versión cargada.</p>
</blockquote>
<p>Las operaciones que gestionan el comportamiento están en el módulo <a href="https://www.erlang.org/doc/man/gen_server.html"><code>gen_server</code></a>, entre las que tenemos las siguientes funciones:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
<th align="center">Evento</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>start</code></td>
<td align="center"><code>(Módulo, Argumentos, Opciones)</code><br><code>(Nombre, Módulo, Argumentos, Opciones)</code></td>
<td align="left">Crea un proceso que ejecuta el servidor.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>start_link</code></td>
<td align="center"><code>(Módulo, Argumentos, Opciones)</code><br><code>(Nombre, Módulo, Argumentos, Opciones)</code></td>
<td align="left">Crea un proceso enlazado que ejecuta el servidor.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>start_monitor</code></td>
<td align="center"><code>(Módulo, Argumentos, Opciones)</code><br><code>(Nombre, Módulo, Argumentos, Opciones)</code></td>
<td align="left">Crea un proceso monitorizado que ejecuta el servidor.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>stop</code></td>
<td align="center"><code>(Identificador)</code><br><code>(Identificador, Motivo, Timeout)</code></td>
<td align="left">Detiene un servidor creado.</td>
<td align="center"><code>terminate</code></td>
</tr>
<tr>
<td align="center"><code>call</code></td>
<td align="center"><code>(Identificador, Petición)</code><br><code>(Identificador, Petición, Timeout)</code></td>
<td align="left">Envía una petición que espera una respuesta de forma síncrona.</td>
<td align="center"><code>handle_call</code></td>
</tr>
<tr>
<td align="center"><code>cast</code></td>
<td align="center"><code>(Identificador, Petición)</code></td>
<td align="left">Envía una petición que no espera una respuesta de forma asíncrona.</td>
<td align="center"><code>handle_cast</code></td>
</tr>
</tbody>
</table><p>El parámetro <em>nombre</em>, cuando se inicia un servidor, sirve para registrar el proceso con un átomo, para ello se puede usar <code>{local,Nombre}</code> o <code>{global,Nombre}</code>, entre otras opciones. Al indicar <code>local</code> se registra el proceso sólo en el nodo actual, mientras que con <code>global</code> se registra en la red de nodos.</p>
<h3 id="el-comportamiento-gen_statem">El comportamiento: <code>gen_statem</code></h3>
<p>Este comportamiento se utiliza para crear <a href="https://www.erlang.org/doc/design_principles/statem.html">máquinas de estados</a> y sustituye al módulo <a href="https://www.erlang.org/doc/man/gen_fsm.html"><code>gen_fsm</code></a>. Los eventos que se han de implementar son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="center">Resultados</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>init</code></td>
<td align="center"><code>(Argumentos)</code></td>
<td align="center"><code>{ok,Estado,Datos}</code><br><code>{ok,Estado,Datos,Acciones}</code><br><code>{stop,Motivo}</code><br><code>ignore</code></td>
<td align="left">Inicialización de la máquina de estados.</td>
</tr>
<tr>
<td align="center"><code>callback_mode</code></td>
<td align="center"><code>()</code></td>
<td align="center"><code>state_functions</code><br><code>handle_event_function</code><br><code>[state_functions,state_enter]</code><br><code>[handle_event_function,state_enter]</code></td>
<td align="left">Configuración del modo de la máquina de estados.</td>
</tr>
<tr>
<td align="center"><code>Estado</code></td>
<td align="center"><code>(enter, EstAnt, Datos)</code><br><code>(Evento, Mensaje, Datos)</code></td>
<td align="center"><code>{next_state,Estado,Datos}</code><br><code>{next_state,Estado,Datos,Acciones}</code><br><code>{keep_state,Datos}</code><br><code>{keep_state,Datos,Acciones}</code><br><code>keep_state_and_data</code><br><code>{keep_state_and_data,Acciones}</code><br><code>{repeat_state,Datos}</code><br><code>{repeat_state,Datos,Acciones}</code><br><code>repeat_state_and_data</code><br><code>{repeat_state_and_data,Acciones}</code><br><code>stop</code><br><code>{stop,Motivo}</code><br><code>{stop,Motivo,Datos}</code><br><code>{stop_and_reply,Motivo,Respuestas}</code><br><code>{stop_and_reply,Motivo,Respuestas,Datos}</code></td>
<td align="left">Gestión del estado <code>Estado</code>.</td>
</tr>
<tr>
<td align="center"><code>handle_event</code></td>
<td align="center"><code>(enter, EstAnt, Estado, Datos)</code><br><code>(Evento, Mensaje, Estado, Datos)</code></td>
<td align="center"><code>{next_state,Estado,Datos}</code><br><code>{next_state,Estado,Datos,Acciones}</code><br><code>{keep_state,Datos}</code><br><code>{keep_state,Datos,Acciones}</code><br><code>keep_state_and_data</code><br><code>{keep_state_and_data,Acciones}</code><br><code>{repeat_state,Datos}</code><br><code>{repeat_state,Datos,Acciones}</code><br><code>repeat_state_and_data</code><br><code>{repeat_state_and_data,Acciones}</code><br><code>stop</code><br><code>{stop,Motivo}</code><br><code>{stop,Motivo,Datos}</code><br><code>{stop_and_reply,Motivo,Respuestas}</code><br><code>{stop_and_reply,Motivo,Respuestas,Datos}</code></td>
<td align="left">Gestión de los estados.</td>
</tr>
<tr>
<td align="center"><code>code_change</code></td>
<td align="center"><code>()</code></td>
<td align="center"><code>{ok,Estado,Datos}</code><br><code>Motivo</code></td>
<td align="left">Cambio en caliente.</td>
</tr>
<tr>
<td align="center"><code>terminate</code></td>
<td align="center"><code>()</code></td>
<td align="center">-</td>
<td align="left">Terminación de la máquina de estados.</td>
</tr>
</tbody>
</table><p>A diferencia del anterior comportamiento, el estado aquí se refiere al nombre del estado que se está ejecutando dentro de la máquina virtual, por lo que los datos es la información interna que equivale al estado de un servidor genérico.</p>
<p>Sólo son obligatorias <code>init</code> y <code>callback_mode</code>, más las funciones <code>Estado</code> o <code>handle_event</code>, dependiendo de la configuración. El resto de funciones son opcionales.</p>
<p>Una vez se ha inicializado la máquina, se invoca el evento para configurar el modo de funcionamiento con <code>callback_mode</code>, que tiene que devolver como mínimo una de las dos siguientes opciones:</p>
<ul>
<li><code>state_functions</code>: Los eventos se gestionan con las funciones <code>Estado/3</code>, requiriendo una función particular para cada estado de la máquina.</li>
<li><code>handle_event_function</code>: Los eventos se gestionan con la función <code>handle_event/4</code>.</li>
</ul>
<p>De añadir el valor <code>state_enter</code>, se indicará que además habrá un evento de entrada para cada estado de la máquina.</p>
<p>Al gestionar los eventos que reciben los estados tenemos dos situaciones:</p>
<ul>
<li>Si el primer parámetro es <code>enter</code>, es que tenemos activada la configuración de entrada a los estados, por lo que <code>EstAnt</code> será el estado anterior del que viene la máquina, salvo en el primer estado que entrará, que al no haber habido uno previo el valor será el propio estado.</li>
<li>Si el primer parámetro es un <em>evento</em>, tendremos como eventos las siguientes posibilidades: <code>{call,Origen}</code>, <code>cast</code>, <code>info</code>, <code>timeout</code>, <code>{timeout,Nombre}</code>, <code>state_timeout</code> o <code>internal</code>. El parámetro <em>mensaje</em> es la información que acompaña al evento generado para el estado.</li>
</ul>
<p>Luego, al devolver la respuesta al comportamiento, <code>Respuestas</code> puede ser la tupla <code>{reply,Origen,Respuesta}</code> o una lista de varias de ellas. Algo similar ocurre con <code>Acciones</code> que puede ser uno de los siguientes elementos, así como una lista de varios de ellos:</p>

<table>
<thead>
<tr>
<th align="center">Acciones</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>hibernate</code><br><code>{hibernate,Bool}</code></td>
<td align="left">Manda a hibernar al proceso.</td>
</tr>
<tr>
<td align="center"><code>postpone</code><br><code>{postpone,Bool}</code></td>
<td align="left">Pospone el evento actual.</td>
</tr>
<tr>
<td align="center"><code>{state_timeout,Timeout,Mensaje}</code><br><code>{state_timeout,Timeout,Mensaje,Opciones}</code><br><code>{state_timeout,update,Mensaje}</code><br><code>{state_timeout,cancel}</code></td>
<td align="left">Inicia, actualiza o cancela el <em>timeout</em> de un estado.</td>
</tr>
<tr>
<td align="center"><code>{{timeout,Nombre},Timeout,Mensaje}</code><br><code>{{timeout,Nombre},Timeout,Mensaje, Opciones}</code><br><code>{{timeout,Nombre},update,Mensaje}</code><br><code>{{timeout,Nombre},cancel}</code></td>
<td align="left">Inicia, actualiza o cancela el <em>timeout</em> genérico.</td>
</tr>
<tr>
<td align="center"><code>{timeout,Timeout,Mensaje}</code><br><code>{timeout,Timeout,Mensaje,Opciones}</code><br><code>Timeout</code></td>
<td align="left">Inicia un evento de tipo <em>timeout</em>.</td>
</tr>
<tr>
<td align="center"><code>{reply,Origen,Respuesta}</code></td>
<td align="left">Responde al proceso que activó el evento.</td>
</tr>
<tr>
<td align="center"><code>{next_event,Evento,Mensaje}</code></td>
<td align="left">Genera un evento.</td>
</tr>
<tr>
<td align="center"><code>{change_callback_module,Módulo}</code></td>
<td align="left">Cambia el módulo encargado de gestionar los estados.</td>
</tr>
<tr>
<td align="center"><code>{push_callback_module,Módulo}</code></td>
<td align="left">Añade un módulo a la pila de módulos que gestionan los estados.</td>
</tr>
<tr>
<td align="center"><code>pop_callback_module</code></td>
<td align="left">Saca un módulo a la pila de módulos que gestionan los estados.</td>
</tr>
</tbody>
</table><p>Las operaciones que gestionan el comportamiento están en el módulo <a href="https://www.erlang.org/doc/man/gen_statem.html"><code>gen_statem</code></a>, entre las que tenemos las siguientes funciones:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
<th align="center">Evento</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>start</code></td>
<td align="center"><code>(Módulo, Argumentos, Opciones)</code><br><code>(Nombre, Módulo, Argumentos, Opciones)</code></td>
<td align="left">Crea un proceso que ejecuta la máquina.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>start_link</code></td>
<td align="center"><code>(Módulo, Argumentos, Opciones)</code><br><code>(Nombre, Módulo, Argumentos, Opciones)</code></td>
<td align="left">Crea un proceso enlazado que ejecuta la máquina.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>start_monitor</code></td>
<td align="center"><code>(Módulo, Argumentos, Opciones)</code><br><code>(Nombre, Módulo, Argumentos, Opciones)</code></td>
<td align="left">Crea un proceso monitorizado que ejecuta la máquina.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>stop</code></td>
<td align="center"><code>(Identificador)</code><br><code>(Identificador, Motivo, Timeout)</code></td>
<td align="left">Detiene una máquina creada.</td>
<td align="center"><code>terminate</code></td>
</tr>
<tr>
<td align="center"><code>call</code></td>
<td align="center"><code>(Identificador, Mensaje)</code><br><code>(Identificador, Mensaje, Timeout)</code></td>
<td align="left">Envía un mensaje que espera una respuesta de forma síncrona.</td>
<td align="center"><code>Estado</code><br><code>handle_event</code></td>
</tr>
<tr>
<td align="center"><code>cast</code></td>
<td align="center"><code>(Identificador, Mensaje)</code></td>
<td align="left">Envía un mensaje que no espera una respuesta de forma asíncrona.</td>
<td align="center"><code>Estado</code><br><code>handle_event</code></td>
</tr>
</tbody>
</table><p>El parámetro <em>nombre</em>, cuando se inicia una máquina de estados, sirve para registrar el proceso con un átomo, para ello se puede usar <code>{local,Nombre}</code> o <code>{global,Nombre}</code>, entre otras opciones. Al indicar <code>local</code> se registra el proceso sólo en el nodo actual, mientras que con <code>global</code> se registra en la red de nodos.</p>
<h3 id="el-comportamiento-gen_event">El comportamiento: <code>gen_event</code></h3>
<p>Este comportamiento se utiliza para la <a href="https://www.erlang.org/doc/design_principles/events.html">gestión de eventos</a> en un programa. Los eventos que se han de implementar son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="center">Resultados</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>init</code></td>
<td align="center"><code>(Argumentos)</code></td>
<td align="center"><code>{ok,Estado}</code><br><code>{ok,Estado,hibernate}</code><br><code>{error,Motivo}</code></td>
<td align="left">Inicialización del gestor de eventos.</td>
</tr>
<tr>
<td align="center"><code>handle_call</code></td>
<td align="center"><code>(Petición, Estado)</code></td>
<td align="center"><code>{ok,Resultado,Estado}</code><br><code>{ok,Resultado,Estado,hibernate}</code><br><code>{swap_handler,Result,Args1,Estado,Gest2,Args2}</code><br><code>{remove_handler,Resultado}</code></td>
<td align="left">Peticiones con respuesta.</td>
</tr>
<tr>
<td align="center"><code>handle_event</code></td>
<td align="center"><code>(Evento, Estado)</code></td>
<td align="center"><code>{ok,Estado}</code><br><code>{ok,Estado,hibernate}</code><br><code>{swap_handler,Args1,Estado,Gest2,Args2}</code><br><code>remove_handler</code></td>
<td align="left">Peticiones sin respuesta.</td>
</tr>
<tr>
<td align="center"><code>handle_info</code></td>
<td align="center"><code>(Mensaje, Estado)</code></td>
<td align="center"><code>{ok,Estado}</code><br><code>{ok,Estado,hibernate}</code><br><code>{swap_handler,Args1,Estado,Gest2,Args2}</code><br><code>remove_handler</code></td>
<td align="left">Mensajes recibidos que no son peticiones.</td>
</tr>
<tr>
<td align="center"><code>code_change</code></td>
<td align="center"><code>(Versión, Estado, Extra)</code></td>
<td align="center"><code>{ok,Estado}</code></td>
<td align="left">Cambio en caliente.</td>
</tr>
<tr>
<td align="center"><code>terminate</code></td>
<td align="center"><code>(Motivo, Estado)</code></td>
<td align="center">-</td>
<td align="left">Terminación del gestor.</td>
</tr>
</tbody>
</table><p>Sólo son obligatorias <code>init</code>, <code>handle_call</code> y <code>handle_event</code>, el resto son opcionales. Los valores de <code>Gest2</code> son indicar un módulo con un átomo o la tupla <code>{Módulo,Id}</code>.</p>
<p>Las operaciones que gestionan el comportamiento están en el módulo <a href="https://www.erlang.org/doc/man/gen_event.html"><code>gen_event</code></a>, entre las que tenemos las siguientes funciones:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
<th align="center">Evento</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>start</code></td>
<td align="center"><code>(Opciones)</code><br><code>(Nombre, Opciones)</code></td>
<td align="left">Crea un proceso que procesa eventos.</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center"><code>start_link</code></td>
<td align="center"><code>()</code><br><code>(Opciones)</code><br><code>(Nombre, Opciones)</code></td>
<td align="left">Crea un proceso enlazado que procesa eventos.</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center"><code>start_monitor</code></td>
<td align="center"><code>()</code><br><code>(Opciones)</code><br><code>(Nombre, Opciones)</code></td>
<td align="left">Crea un proceso monitorizado que procesa eventos.</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center"><code>add_handler</code></td>
<td align="center"><code>(Identificador, Gestor, Argumentos)</code></td>
<td align="left">Añade un gestor de eventos al proceso.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>add_sup_handler</code></td>
<td align="center"><code>(Identificador, Gestor, Argumentos)</code></td>
<td align="left">Añade un gestor de eventos al proceso, cuyas peticiones estarán supervisadas mediante enlace.</td>
<td align="center"><code>init</code></td>
</tr>
<tr>
<td align="center"><code>swap_handler</code></td>
<td align="center"><code>(Identificador, {Gestor1, Args1}, {Gestor2, Args2})</code></td>
<td align="left">Intercambia un gestor de eventos en el proceso.</td>
<td align="center"><code>terminate</code><br><code>init</code></td>
</tr>
<tr>
<td align="center"><code>swap_sup_handler</code></td>
<td align="center"><code>(Identificador, {Gestor1, Args1}, {Gestor2, Args2})</code></td>
<td align="left">Intercambia un gestor de eventos en el proceso, por uno nuevo supervisado.</td>
<td align="center"><code>terminate</code><br><code>init</code></td>
</tr>
<tr>
<td align="center"><code>delete_handler</code></td>
<td align="center"><code>(Identificador, Gestor, Argumentos)</code></td>
<td align="left">Elimina un gestor de eventos del proceso.</td>
<td align="center"><code>terminate</code></td>
</tr>
<tr>
<td align="center"><code>stop</code></td>
<td align="center"><code>(Identificador)</code><br><code>(Identificador, Motivo, Timeout)</code></td>
<td align="left">Detiene un gestor creado.</td>
<td align="center"><code>terminate</code></td>
</tr>
<tr>
<td align="center"><code>call</code></td>
<td align="center"><code>(Identificador, Gestor, Petición)</code><br><code>(Identificador, Gestor, Petición, Timeout)</code></td>
<td align="left">Envía una petición síncrona que espera una respuesta.</td>
<td align="center"><code>handle_call</code></td>
</tr>
<tr>
<td align="center"><code>notify</code></td>
<td align="center"><code>(Identificador, Evento)</code></td>
<td align="left">Envía un evento asíncrono.</td>
<td align="center"><code>handle_event</code></td>
</tr>
<tr>
<td align="center"><code>sync_notify</code></td>
<td align="center"><code>(Identificador, Evento)</code></td>
<td align="left">Envía un evento síncrono.</td>
<td align="center"><code>handle_event</code></td>
</tr>
</tbody>
</table><p>El parámetro <em>nombre</em>, cuando se inicia un procesador de eventos, sirve para registrar el proceso con un átomo, para ello se puede usar <code>{local,Nombre}</code> o <code>{global,Nombre}</code>, entre otras opciones. Al indicar <code>local</code> se registra el proceso sólo en el nodo actual, mientras que con <code>global</code> se registra en la red de nodos. El <em>nombre</em> se puede usar como una opción con las funciones <code>start/1</code>. El parámetro <em>gestor</em> de nuevo es el nombre del módulo que gestiona los eventos o una tupla <code>{Módulo,Id}</code>.</p>
<p>El funcionamiento del gestor de eventos consiste en crear un proceso, que va a administrar los gestores encargados de procesar los eventos que se produzcan, esto se hace con las funciones <code>start</code>. Una vez creado, se irán añadiendo gestores con <code>add_handler</code>. Configurado ya los gestores, se procederá a notificar los eventos con <code>notify</code>. El uso de <code>sync_notify</code> se reserva para cuando necesitamos que nuestro programa espere a que se termine de procesar el evento notificado. Si necesitamos hacer una petición con respuesta, usaremos la función <code>call</code>, para obtener información interna del gestor, por ejemplo.</p>
<h3 id="el-comportamiento-supervisor">El comportamiento: <code>supervisor</code></h3>
<p>Este comportamiento se utiliza para <a href="https://www.erlang.org/doc/design_principles/sup_princ.html">supervisar</a> la ejecución de procesos. Los eventos que se han de implementar son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="center">Resultados</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>init</code></td>
<td align="center"><code>(Argumentos)</code></td>
<td align="center"><code>{ok,{Config,[Hijo]}}</code><br><code>ignore</code></td>
<td align="left">Inicialización del supervisor.</td>
</tr>
</tbody>
</table><p>La inicialización debe devolver una <em>configuración</em> del modo de funcionamiento del supervisor, así como una especificación de cada <em>hijo</em>, cuyas estructuras son:</p>

<table>
<thead>
<tr>
<th align="center">Variable</th>
<th align="left">Valores</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>Config</code></td>
<td align="left"><code>{Estrategia, Intensidad, Periodo}</code></td>
</tr>
<tr>
<td align="center"><code>Config</code></td>
<td align="left"><code>#{strategy =&gt; Estrategia, intensity =&gt; Intensidad, period =&gt; Periodo, auto_shutdown =&gt; Apagado}</code></td>
</tr>
<tr>
<td align="center"><code>Hijo</code></td>
<td align="left"><code>{Identificador, Llamada, Reinicio, Apagado, Tipo, Módulos}</code></td>
</tr>
<tr>
<td align="center"><code>Hijo</code></td>
<td align="left"><code>#{id =&gt; Identificador, start =&gt; Llamada, restart =&gt; Reinicio, significant =&gt; Significativo, shutdown =&gt; Apagado, type =&gt; Tipo, modules =&gt; Módulos}</code></td>
</tr>
</tbody>
</table><p>Los valores que para la <em>configuración</em> son:</p>

<table>
<thead>
<tr>
<th align="center">Variable</th>
<th align="center">Defecto</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>Estrategia</code></td>
<td align="center"><code>one_for_one</code></td>
<td align="left">Estrategia de reinicio ante la terminación de los hijos:<br>- <code>one_for_one</code> = Sólo el proceso terminado.<br>- <code>one_for_all</code> = Todos los procesos.<br>- <code>rest_for_one</code> = El proceso terminado y los siguientes.<br>- <code>simple_one_for_one</code> = Sólo el proceso terminado.</td>
</tr>
<tr>
<td align="center"><code>Intensidad</code></td>
<td align="center"><code>1</code></td>
<td align="left">Número de reinicios máximos durante el periodo configurado. Superar la cifra aquí configurada finalizará la ejecución del supervisor y la de sus hijos. El valor será un entero mayor o igual que cero.</td>
</tr>
<tr>
<td align="center"><code>Periodo</code></td>
<td align="center"><code>5</code></td>
<td align="left">Tiempo en segundos máximos para el límite de reinicios máximos. El valor será un entero mayor que cero.</td>
</tr>
<tr>
<td align="center"><code>Apagado</code></td>
<td align="center"><code>never</code></td>
<td align="left">Estrategia de finalización ante la finalización de los hijos significativos del supervisor:<br>- <code>never</code> = Nunca.<br>- <code>any_significant</code> = Al morir alguno.<br>- <code>all_significant</code> = Al morir todos.</td>
</tr>
</tbody>
</table><p>Los valores que para la <em>especificación de un hijo</em> son:</p>

<table>
<thead>
<tr>
<th align="center">Variable</th>
<th align="center">Defecto</th>
<th align="left">Valores</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>Identificador</code></td>
<td align="center">-</td>
<td align="left">Nombre identificador del proceso.</td>
</tr>
<tr>
<td align="center"><code>Llamada</code></td>
<td align="center">-</td>
<td align="left">Función de llamada para crear el proceso:<br><code>{Módulo, Función, Argumentos}</code></td>
</tr>
<tr>
<td align="center"><code>Reinicio</code></td>
<td align="center"><code>permanent</code></td>
<td align="left">Estrategia ante la terminación del proceso:<br>- <code>permanent</code> = Reiniciar siempre.<br>- <code>transient</code> = Reiniciar cuando falla.<br>- <code>temporary</code> = Reiniciar nunca.</td>
</tr>
<tr>
<td align="center"><code>Significativo</code></td>
<td align="center"><code>false</code></td>
<td align="left">Indica si el proceso es un hijo significativo con un <code>true</code> o <code>false</code>.</td>
</tr>
<tr>
<td align="center"><code>Apagado</code></td>
<td align="center"><code>infinity</code></td>
<td align="left">Estrategia para terminar el proceso:<br>- <code>brutal_kill</code> = Muerte inmediata.<br>- <code>Timeout</code> = Muerte después de un tiempo.<br>- <code>infinity</code> = Esperar a que termine.</td>
</tr>
<tr>
<td align="center"><code>Tipo</code></td>
<td align="center"><code>worker</code></td>
<td align="left">Tipo de proceso:<br>- <code>worker</code> = Trabajador.<br>- <code>supervisor</code> = Supervisor.</td>
</tr>
<tr>
<td align="center"><code>Módulos</code></td>
<td align="center"><code>[Módulo]</code></td>
<td align="left">Si el proceso implementa un comportamiento como <code>supervisor</code>, <code>gen_server</code> o <code>gen_statem</code>, con <code>[Módulo]</code> se indica cuál es el módulo con los <em>callbacks</em>, mientras que el valor <code>dynamic</code> se usa para los procesos de <code>gen_event</code>. Si no se indica su valor, es tomado del <em>módulo</em> indicado en la <em>llamada</em>.</td>
</tr>
</tbody>
</table><p>Las operaciones que gestionan el comportamiento están en el módulo <a href="https://www.erlang.org/doc/man/supervisor.html"><code>supervisor</code></a>, entre las que tenemos las siguientes funciones:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>start_link</code></td>
<td align="center"><code>(Módulo, Argumentos)</code><br><code>(Nombre, Módulo, Argumentos)</code></td>
<td align="left">Crea un proceso enlazado de un supervisor.</td>
</tr>
<tr>
<td align="center"><code>start_child</code></td>
<td align="center"><code>(IdSup, Hijo)</code></td>
<td align="left">Añade una especificación de un hijo del supervisor e inicia su proceso.</td>
</tr>
<tr>
<td align="center"><code>terminate_child</code></td>
<td align="center"><code>(IdSup, IdHijo)</code></td>
<td align="left">Termina un proceso hijo del supervisor.</td>
</tr>
<tr>
<td align="center"><code>restart_child</code></td>
<td align="center"><code>(IdSup, IdHijo)</code></td>
<td align="left">Reinicia un proceso hijo del supervisor.</td>
</tr>
<tr>
<td align="center"><code>delete_child</code></td>
<td align="center"><code>(IdSup, IdHijo)</code></td>
<td align="left">Borra una especificación de un hijo del supervisor.</td>
</tr>
<tr>
<td align="center"><code>get_childspec</code></td>
<td align="center"><code>(IdSup, IdHijo)</code></td>
<td align="left">Devuelve la especificación de un hijo del supervisor.</td>
</tr>
<tr>
<td align="center"><code>count_children</code></td>
<td align="center"><code>(IdSup)</code></td>
<td align="left">Devuelve el estado actual de los hijos del supervisor.</td>
</tr>
<tr>
<td align="center"><code>which_children</code></td>
<td align="center"><code>(IdSup)</code></td>
<td align="left">Devuelve una lista de todos los hijos del supervisor.</td>
</tr>
<tr>
<td align="center"><code>check_childspecs</code></td>
<td align="center"><code>(Hijos)</code><br><code>(Hijos, Apagado)</code></td>
<td align="left">Comprueba si una lista de especificaciones es correcta.</td>
</tr>
</tbody>
</table><p>Con <code>start_link</code> se inicia el proceso de supervisión, que invoca la función <code>init</code>. Se pueden gestionar hijos de forma dinámica usando <code>start_child</code>, <code>terminate_child</code>, <code>restart_child</code> y <code>delete_child</code>.</p>
<p>El parámetro <em>nombre</em>, cuando se inicia un supervisor, sirve para registrar el proceso con un átomo, para ello se puede usar <code>{local,Nombre}</code> o <code>{global,Nombre}</code>, entre otras opciones. Al indicar <code>local</code> se registra el proceso sólo en el nodo actual, mientras que con <code>global</code> se registra en la red de nodos.</p>
<p>Cuando el supervisor está configurado como <code>simple_one_for_one</code>, sólo se podrá tener una única especificación de hijo para supervisar, porque todos los hijos que se supervisen van a ser instancias dinámicas de esta especificación. Por ello, el parámetro <em>hijo</em> de <code>start_child</code>, en lugar de ser una especificación, es una lista de argumentos que se concatena a la llamada indicada en la especificación única del supervisor.</p>
<h3 id="el-comportamiento-application">El comportamiento: <code>application</code></h3>
<p>Este comportamiento se utiliza para <a href="https://www.erlang.org/doc/design_principles/applications.html">controlar aplicaciones</a> de Erlang. Los eventos que se han de implementar son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="center">Resultados</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>start</code></td>
<td align="center"><code>(Tipo, Argumentos)</code></td>
<td align="center"><code>{ok,PID}</code><br><code>{ok,PID,Estado}</code><br><code>{error,Motivo}</code></td>
<td align="left">Inicio de la aplicación.</td>
</tr>
<tr>
<td align="center"><code>prep_stop</code></td>
<td align="center"><code>(Estado)</code></td>
<td align="center"><code>Estado</code></td>
<td align="left">La aplicación va a finalizar pero todavía no lo ha hecho.</td>
</tr>
<tr>
<td align="center"><code>stop</code></td>
<td align="center"><code>(Estado)</code></td>
<td align="center">-</td>
<td align="left">Fin de la aplicación.</td>
</tr>
</tbody>
</table><p>El <em>tipo</em> en la inicialización habitualmente es <code>normal</code>, pero en aplicaciones distribuidas nos podemos encontrar con <code>{takeover,Nodo}</code> y <code>{failover,Nodo}</code>. Los <em>argumentos</em> corresponden con los valores definidos en la clave <code>mod</code> del fichero de configuración de la aplicación.</p>
<p>Las operaciones que gestionan el comportamiento están en el módulo <a href="https://www.erlang.org/doc/man/application.html"><code>application</code></a>, entre las que tenemos las siguientes funciones:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>start</code></td>
<td align="center"><code>(Aplicación)</code><br><code>(Aplicación, Modo)</code></td>
<td align="left">Inicia una aplicación.</td>
</tr>
<tr>
<td align="center"><code>stop</code></td>
<td align="center"><code>(Application)</code></td>
<td align="left">Detiene una aplicación.</td>
</tr>
<tr>
<td align="center"><code>unload</code></td>
<td align="center"><code>(Aplicación)</code></td>
<td align="left">Quita una aplicación cargada.</td>
</tr>
<tr>
<td align="center"><code>loaded_applications</code></td>
<td align="center"><code>()</code></td>
<td align="left">Devuelve las aplicaciones cargadas.</td>
</tr>
<tr>
<td align="center"><code>which_applications</code></td>
<td align="center"><code>()</code><br><code>(Timeout)</code></td>
<td align="left">Devuelve las aplicaciones que están ejecutándose.</td>
</tr>
<tr>
<td align="center"><code>get_all_env</code></td>
<td align="center"><code>()</code><br><code>(Aplicación)</code></td>
<td align="left">Devuelve los valores definidos en el entorno de la aplicación.</td>
</tr>
<tr>
<td align="center"><code>get_env</code></td>
<td align="center"><code>(Clave)</code><br><code>(Aplicación, Clave)</code><br><code>(Aplicación, Clave, Defecto)</code></td>
<td align="left">Devuelve un valor definido en el entorno de la aplicación.</td>
</tr>
<tr>
<td align="center"><code>set_env</code></td>
<td align="center"><code>(Configuración)</code><br><code>(Configuración, Opciones)</code><br><code>(Aplicación, Clave, Valor)</code><br><code>(Aplicación, Clave, Valor, Opciones)</code></td>
<td align="left">Modifica un valor definido en el entorno de la aplicación.</td>
</tr>
<tr>
<td align="center"><code>get_all_key</code></td>
<td align="center"><code>()</code><br><code>(Aplicación)</code></td>
<td align="left">Devuelve las claves usadas en la configuración de la aplicación.</td>
</tr>
<tr>
<td align="center"><code>get_key</code></td>
<td align="center"><code>(Clave)</code><br><code>(Aplicación, Clave)</code></td>
<td align="left">Devuelve un valor de la configuración de la aplicación.</td>
</tr>
</tbody>
</table><p>Para poder aplicar este comportamiento es necesario que el proyecto siga la siguiente estructura durante el desarrollo:</p>
<pre><code>my_app
├── doc
│   ├── internal
│   ├── examples
│   └── src
├── include
├── priv
├── src
│   └── my_app.app.src
└── test
</code></pre>
<p>El directorio <code>src</code> es obligatorio. Son opcionales <code>priv</code> e <code>include</code>. Son recomendados <code>doc</code> y <code>test</code>. Para la versión de lanzamiento esta es la estructura necesaria:</p>
<pre><code>my_app-version
├── bin
├── doc
│   ├── examples
│   ├── html
│   ├── internal
│   ├── man [1-9]
│   └── pdf
├── ebin
│   └── my_app.app
├── include
├── priv
│   ├── bin
│   └── lib
└── src
</code></pre>
<p>El directorio <code>ebin</code> es obligatorio. Son opcionales <code>src</code>, <code>priv</code>, <code>include</code>, <code>bin</code> y <code>doc</code>. Son recomendados <code>priv/lib</code> y <code>priv/bin</code>. Pero sobre todo es importante tener el fichero <a href="https://www.erlang.org/doc/man/app.html"><code>.app</code></a> que configura la aplicación y que tiene la siguiente forma:</p>
<pre><code>{application, Nombre,
  [{description,           Descripción},
   {id,                    Identificador},
   {vsn,                   Versión},
   {modules,               Módulos},
   {maxP,                  Procesos},
   {maxT,                  Tiempo},
   {registered,            Nombres},
   {included_applications, Aplicaciones},
   {optional_applications, Aplicaciones},
   {applications,          Aplicaciones},
   {env,                   Entorno},
   {mod,                   {Módulo, Argumentos}},
   {start_phases,          Fases},
   {runtime_dependencies,  Dependencias}]}.
</code></pre>
<p>Cuyos tipos y valores son:</p>

<table>
<thead>
<tr>
<th align="center">Elemento</th>
<th align="center">Tipo</th>
<th align="center">Defecto</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>Nombre</code></td>
<td align="center"><code>atom()</code></td>
<td align="center">-</td>
<td align="left">Nombre de la aplicación.</td>
</tr>
<tr>
<td align="center"><code>description</code></td>
<td align="center"><code>string()</code></td>
<td align="center"><code>""</code></td>
<td align="left">Identificador del producto.</td>
</tr>
<tr>
<td align="center"><code>id</code></td>
<td align="center"><code>string()</code></td>
<td align="center"><code>""</code></td>
<td align="left">Identificador del producto.</td>
</tr>
<tr>
<td align="center"><code>vsn</code></td>
<td align="center"><code>string()</code></td>
<td align="center"><code>""</code></td>
<td align="left">Versión de la aplicación.</td>
</tr>
<tr>
<td align="center"><code>modules</code></td>
<td align="center"><code>[atom()]</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Módulos que introduce la aplicación.</td>
</tr>
<tr>
<td align="center"><code>maxP</code></td>
<td align="center"><code>int()</code></td>
<td align="center"><code>infinity</code></td>
<td align="left">Número máximo de procesos.</td>
</tr>
<tr>
<td align="center"><code>maxT</code></td>
<td align="center"><code>int()</code></td>
<td align="center"><code>infinity</code></td>
<td align="left">Tiempo máximo de ejecución.</td>
</tr>
<tr>
<td align="center"><code>registered</code></td>
<td align="center"><code>[atom()]</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Nombres registrados por la aplicación.</td>
</tr>
<tr>
<td align="center"><code>included_applications</code></td>
<td align="center"><code>[atom()]</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Aplicaciones incluidas que serán cargadas pero no iniciadas automáticamente.</td>
</tr>
<tr>
<td align="center"><code>optional_applications</code></td>
<td align="center"><code>[atom()]</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Aplicaciones opcionales de las que depende la aplicación.</td>
</tr>
<tr>
<td align="center"><code>applications</code></td>
<td align="center"><code>[atom()]</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Aplicaciones de las que depende y que serán cargadas e iniciadas.</td>
</tr>
<tr>
<td align="center"><code>env</code></td>
<td align="center"><code>[{atom(), term()}]</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Entorno con información necesaria para la aplicación.</td>
</tr>
<tr>
<td align="center"><code>mod</code></td>
<td align="center"><code>{atom(), list()}</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Llamada inicial para arrancar la aplicación.</td>
</tr>
<tr>
<td align="center"><code>start_phases</code></td>
<td align="center"><code>{atom(), list()}</code></td>
<td align="center"><code>undefined</code></td>
<td align="left">Fases para arrancar la aplicación.</td>
</tr>
<tr>
<td align="center"><code>runtime_dependencies</code></td>
<td align="center"><code>[string()]</code></td>
<td align="center"><code>[]</code></td>
<td align="left">Dependencias que tiene la aplicación para ser ejecutada.</td>
</tr>
</tbody>
</table><p>Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token punctuation">{</span><span class="token atom">application</span><span class="token punctuation">,</span> <span class="token atom">my_app</span><span class="token punctuation">,</span>
 <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token atom">description</span><span class="token punctuation">,</span> <span class="token string">"My App"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token atom">vsn</span><span class="token punctuation">,</span> <span class="token string">"1.0"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token atom">modules</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token atom">my_app</span><span class="token punctuation">,</span> <span class="token atom">my_sup</span><span class="token punctuation">,</span> <span class="token atom">my_worker</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token atom">registered</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token atom">my_worker</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token atom">applications</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token atom">kernel</span><span class="token punctuation">,</span> <span class="token atom">stdlib</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token atom">mod</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token atom">my_app</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
 <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">.</span>
</code></pre>
<p>Tenemos una aplicación con tres módulos, un nombre que se va a registrar y unas dependencias. Con esto llamaríamos a la función <code>start</code> de <code>application</code>, indicando que la aplicación es <code>my_app</code> y eligiendo uno de los siguientes modos:</p>
<ul>
<li><code>permanent</code>: Si termina normal se cierran las otras aplicaciones y se apaga la máquina virtual. Si termina abruptamente ocurre lo mismo que al terminar normal.</li>
<li><code>transient</code>: Si termina normal no ocurre nada. Si termina abruptamente se informa del fallo, se cierran las otras aplicaciones y se apagar la máquina virtual.</li>
<li><code>temporary</code>: Este es el valor por defecto. Si termina normal no ocurre nada. Si termina abruptamente se informa del fallo, y la aplicación termina sin reiniciarse.</li>
</ul>
<p>Cuando queramos acceder a función del entorno definido en la configuración se puede usar la función <code>get_env</code>, que salvo que le hayamos indicado un valor de retorno por <em>defecto</em>, si no se encuentra la clave nos devolverá <code>undefined</code>, en caso contrario nos devuelve <code>{ok,Valor}</code>. Y para apagar la aplicación se utiliza la función <code>stop</code>.</p>
<h2 id="la-biblioteca-estándar">La biblioteca estándar</h2>
<h3 id="aplicaciones-de-la-plataforma">Aplicaciones de la plataforma</h3>
<p>Estas son las <a href="https://www.erlang.org/doc/applications.html">aplicaciones</a> que conforma la plataforma Erlang/OTP:</p>

<table>
<thead>
<tr>
<th align="center">Categoría</th>
<th align="center">Aplicación</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Básico</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/compiler/index.html"><code>compiler</code></a></td>
<td align="left">Compilador de Erlang.</td>
</tr>
<tr>
<td align="center">Básico</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/erts/index.html"><code>erts</code></a></td>
<td align="left">Entorno de ejecución de Erlang.</td>
</tr>
<tr>
<td align="center">Básico</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/kernel/index.html"><code>kernel</code></a></td>
<td align="left">Núcleo de ejecución de Erlang.</td>
</tr>
<tr>
<td align="center">Básico</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/sasl/index.html"><code>sasl</code></a></td>
<td align="left">Sistema para soporte de bibliotecas.</td>
</tr>
<tr>
<td align="center">Básico</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/stdlib/index.html"><code>stdlib</code></a></td>
<td align="left">Bibliotecas básicas de Erlang.</td>
</tr>
<tr>
<td align="center">Datos</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/mnesia/index.html"><code>mnesia</code></a></td>
<td align="left">Base de datos distribuida <a href="https://es.wikipedia.org/wiki/NoSQL">NoSQL</a>.</td>
</tr>
<tr>
<td align="center">Datos</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/odbc/index.html"><code>odbc</code></a></td>
<td align="left">Interfaz para bases de datos <a href="https://es.wikipedia.org/wiki/SQL">SQL</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/asn1/index.html"><code>asn1</code></a></td>
<td align="left">Soporte para <a href="https://es.wikipedia.org/wiki/ASN.1">ASN.1</a> (notación de sintaxis abstracta).</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/crypto/index.html"><code>crypto</code></a></td>
<td align="left">Soporte para criptografía.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/diameter/index.html"><code>diameter</code></a></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/Diameter_%28protocolo%29">Diameter</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/eldap/index.html"><code>eldap</code></a></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/Protocolo_ligero_de_acceso_a_directorios">LDAP</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/erl_interface/index.html"><code>erl_interface</code></a></td>
<td align="left">Interfaz de bajo nivel con <a href="https://es.wikipedia.org/wiki/C_%28lenguaje_de_programaci%C3%B3n%29">C</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/ftp/index.html"><code>ftp</code></a></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/Protocolo_de_transferencia_de_archivos">FTP</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/inets/index.html"><code>inets</code></a></td>
<td align="left">Soporte para servidores <a href="https://es.wikipedia.org/wiki/Protocolo_de_transferencia_de_hipertexto">HTTP</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/jinterface/index.html"><code>jinterface</code></a></td>
<td align="left">Interfaz de bajo nivel con <a href="https://es.wikipedia.org/wiki/Java_%28lenguaje_de_programaci%C3%B3n%29">Java</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/megaco/index.html"><code>megaco</code></a></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/Megaco">Megaco/H.248</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/public_key/index.html"><code>public_key</code></a></td>
<td align="left">Soporte para <a href="https://es.wikipedia.org/wiki/Criptograf%C3%ADa_asim%C3%A9trica">claves públicas</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/ssh/index.html"><code>ssh</code></a></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/Secure_Shell">SSH</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/ssl/index.html"><code>ssl</code></a></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/Seguridad_de_la_capa_de_transporte">SSL</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/tftp/index.html"><code>tftp</code></a></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/TFTP">TFTP</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/wx/index.html"><code>wx</code></a></td>
<td align="left">Soporte para <a href="https://es.wikipedia.org/wiki/WxWidgets">wxWidgets</a>.</td>
</tr>
<tr>
<td align="center">Interfaces</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/xmerl/index.html"><code>xmerl</code></a></td>
<td align="left">Soporte para el formato <a href="https://es.wikipedia.org/wiki/Extensible_Markup_Language">XML 1.0</a>.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/debugger/index.html"><code>debugger</code></a></td>
<td align="left">Depurador de Erlang.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/dialyzer/index.html"><code>dialyzer</code></a></td>
<td align="left">Analizador de tipos.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/et/index.html"><code>et</code></a></td>
<td align="left">Trazador de eventos.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/observer/index.html"><code>observer</code></a></td>
<td align="left">Inspector de sistemas distribuidos.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/parsetools/index.html"><code>parsetools</code></a></td>
<td align="left">Parser y análisis léxico de código.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/reltool/index.html"><code>reltool</code></a></td>
<td align="left">Gestor de aplicaciones para su lanzamiento final.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/runtime_tools/index.html"><code>runtime_tools</code></a></td>
<td align="left">Herramientas para la ejecución.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/syntax_tools/index.html"><code>syntax_tools</code></a></td>
<td align="left">Soporte para <a href="https://es.wikipedia.org/wiki/%C3%81rbol_de_sintaxis_abstracta">árboles sintácticos abstractos</a> de Erlang.</td>
</tr>
<tr>
<td align="center">Herramientas</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/tools/index.html"><code>tools</code></a></td>
<td align="left">Herramientas auxiliares del sistema.</td>
</tr>
<tr>
<td align="center">Tests</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/common_test/index.html"><code>common_test</code></a></td>
<td align="left">Testing automático para aplicaciones.</td>
</tr>
<tr>
<td align="center">Tests</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/eunit/index.html"><code>eunit</code></a></td>
<td align="left">Test unitarios para módulos.</td>
</tr>
<tr>
<td align="center">Documentación</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/edoc/index.html"><code>edoc</code></a></td>
<td align="left">Genera documentación tomando las etiquetas en los comentarios de un módulo.</td>
</tr>
<tr>
<td align="center">Documentación</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/erl_docgen/index.html"><code>erl_docgen</code></a></td>
<td align="left">Genera documentación para la OTP.</td>
</tr>
<tr>
<td align="center">Mantenimiento</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/os_mon/index.html"><code>os_mon</code></a></td>
<td align="left">Monitor de recursos del sistema operativo.</td>
</tr>
<tr>
<td align="center">Mantenimiento</td>
<td align="center"><a href="https://www.erlang.org/doc/apps/snmp/index.html"><code>snmp</code></a></td>
<td align="left">Gestiona el protocolo SNMP.</td>
</tr>
</tbody>
</table><h3 id="módulos-de-erts">Módulos de <code>erts</code></h3>
<p>Los módulos principales son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>atomics</code></td>
<td align="left">Soporte para operaciones atómicas.</td>
</tr>
<tr>
<td align="center"><code>counters</code></td>
<td align="left">Soporte para operaciones de conteo.</td>
</tr>
<tr>
<td align="center"><code>erlang</code></td>
<td align="left">Funciones nativas del lenguaje.</td>
</tr>
<tr>
<td align="center"><code>erl_driver</code></td>
<td align="left">Interfaz para drivers de Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_nif</code></td>
<td align="left">Interfaz para funciones nativas de usuario.</td>
</tr>
<tr>
<td align="center"><code>erl_prim_loader</code></td>
<td align="left">Cargador de bajo nivel de Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_tracer</code></td>
<td align="left">Comportamiento de trazado en Erlang.</td>
</tr>
<tr>
<td align="center"><code>init</code></td>
<td align="left">Gestor del arranque del sistema Erlang.</td>
</tr>
<tr>
<td align="center"><code>persistent_term</code></td>
<td align="left">Persistencia de datos.</td>
</tr>
<tr>
<td align="center"><code>zlib</code></td>
<td align="left">Interfaz para ficheros <code>.zip</code>.</td>
</tr>
</tbody>
</table><h3 id="módulos-de-kernel">Módulos de <code>kernel</code></h3>
<p>Los módulos generales del sistema son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>application</code></td>
<td align="left">Soporte para aplicaciones OTP genéricas.</td>
</tr>
<tr>
<td align="center"><code>code</code></td>
<td align="left">Servidor de código Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_boot_server</code></td>
<td align="left">Servidor de arranque para otras máquinas Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_ddll</code></td>
<td align="left">Carga y enlace dinámica de drivers en Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_epmd</code></td>
<td align="left">Interfaz para el <a href="https://www.erlang.org/doc/man/epmd.html"><code>epmd</code></a>.</td>
</tr>
<tr>
<td align="center"><code>error_handler</code></td>
<td align="left">Gestor por defecto de errores del sistema.</td>
</tr>
<tr>
<td align="center"><code>file</code></td>
<td align="left">Operaciones con ficheros.</td>
</tr>
<tr>
<td align="center"><code>global</code></td>
<td align="left">Sistema para registrar nombres globales.</td>
</tr>
<tr>
<td align="center"><code>global_group</code></td>
<td align="left">Grupos de nodos para los grupos de registro de nombres globales.</td>
</tr>
<tr>
<td align="center"><code>heart</code></td>
<td align="left">Sistema para monitorizar el proceso <code>heart</code>, que controla qué nodos Erlang de la red siguen vivos.</td>
</tr>
<tr>
<td align="center"><code>os</code></td>
<td align="left">Operaciones del sistema operativo.</td>
</tr>
<tr>
<td align="center"><code>pg</code></td>
<td align="left">Grupos de procesos con nombre distribuidos.</td>
</tr>
<tr>
<td align="center"><code>seq_trace</code></td>
<td align="left">Trazado secuencial de transferencias de información.</td>
</tr>
</tbody>
</table><p>Los módulos de comunicaciones son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>erpc</code></td>
<td align="left">Llamadas a rutinas remotas (<a href="https://es.wikipedia.org/wiki/Llamada_a_procedimiento_remoto">RPC</a>) mejoradas.</td>
</tr>
<tr>
<td align="center"><code>gen_sctp</code></td>
<td align="left">Comunicación con <em>sockets</em> usando <a href="https://es.wikipedia.org/wiki/Stream_Control_Transmission_Protocol">SCTP</a>.</td>
</tr>
<tr>
<td align="center"><code>gen_tcp</code></td>
<td align="left">Comunicación con <em>sockets</em> usando <a href="https://es.wikipedia.org/wiki/Protocolo_de_control_de_transmisi%C3%B3n">TCP</a>.</td>
</tr>
<tr>
<td align="center"><code>gen_udp</code></td>
<td align="left">Comunicación con <em>sockets</em> usando <a href="https://es.wikipedia.org/wiki/Protocolo_de_datagramas_de_usuario">UDP</a>.</td>
</tr>
<tr>
<td align="center"><code>inet</code></td>
<td align="left">Soporte para el protocolo <a href="https://es.wikipedia.org/wiki/Protocolo_de_control_de_transmisi%C3%B3n">TCP/IP</a>.</td>
</tr>
<tr>
<td align="center"><code>inet_res</code></td>
<td align="left">Cliente <a href="https://es.wikipedia.org/wiki/Sistema_de_nombres_de_dominio">DNS</a> básico.</td>
</tr>
<tr>
<td align="center"><code>net</code></td>
<td align="left">Soporte para la interfaz de red.</td>
</tr>
<tr>
<td align="center"><code>net_adm</code></td>
<td align="left">Rutinas para administrar la red de nodos Erlang.</td>
</tr>
<tr>
<td align="center"><code>net_kernel</code></td>
<td align="left">Núcleo de la red de nodos Erlang.</td>
</tr>
<tr>
<td align="center"><code>rpc</code></td>
<td align="left">Llamadas a rutinas remotas (<a href="https://es.wikipedia.org/wiki/Llamada_a_procedimiento_remoto">RPC</a>).</td>
</tr>
<tr>
<td align="center"><code>socket</code></td>
<td align="left">Interfaz para manejar <em>sockets</em>.</td>
</tr>
</tbody>
</table><p>Los módulos de registro de eventos son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>disk_log</code></td>
<td align="left">Sistema de registro de eventos (<em>logs</em>) con ficheros.</td>
</tr>
<tr>
<td align="center"><code>logger</code></td>
<td align="left">Interfaz para el registro de eventos (<em>logs</em>).</td>
</tr>
<tr>
<td align="center"><code>logger_filters</code></td>
<td align="left">Filtrado del registro de eventos (<em>logs</em>).</td>
</tr>
<tr>
<td align="center"><code>logger_formatter</code></td>
<td align="left">Formato para el registro de eventos (<em>logs</em>).</td>
</tr>
<tr>
<td align="center"><code>logger_std_h</code></td>
<td align="left">Gestor estándar del registro de eventos (<em>logs</em>).</td>
</tr>
<tr>
<td align="center"><code>logger_disk_log_h</code></td>
<td align="left">Registro de eventos (<em>logs</em>) con ficheros.</td>
</tr>
<tr>
<td align="center"><code>wrap_log_reader</code></td>
<td align="left">Servicio para leer registros de disco de tipo <em>wrap</em> formateados internamente.</td>
</tr>
</tbody>
</table><h3 id="módulos-de-stdlib">Módulos de <code>stdlib</code></h3>
<p>Los módulos generales son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>base64</code></td>
<td align="left">Codificación y decodificación con <a href="https://es.wikipedia.org/wiki/Base64">Base64</a> (<a href="https://www.ietf.org/rfc/rfc2045.txt">RFC 2045</a>).</td>
</tr>
<tr>
<td align="center"><code>c</code></td>
<td align="left">Interfaz de la consola Erlang.</td>
</tr>
<tr>
<td align="center"><code>calendar</code></td>
<td align="left">Manejo de fechas y horas.</td>
</tr>
<tr>
<td align="center"><code>erl_error</code></td>
<td align="left">Utilidades para informar de errores.</td>
</tr>
<tr>
<td align="center"><code>erl_tar</code></td>
<td align="left">Manejo de ficheros <code>.tar</code>.</td>
</tr>
<tr>
<td align="center"><code>file_sorter</code></td>
<td align="left">Ordena el contenido de ficheros.</td>
</tr>
<tr>
<td align="center"><code>filelib</code></td>
<td align="left">Utilidades para manejar ficheros.</td>
</tr>
<tr>
<td align="center"><code>filename</code></td>
<td align="left">Manipulación de nombres de ficheros.</td>
</tr>
<tr>
<td align="center"><code>gen_event</code></td>
<td align="left">Gestor de eventos genérico.</td>
</tr>
<tr>
<td align="center"><code>gen_server</code></td>
<td align="left">Servidor genérico.</td>
</tr>
<tr>
<td align="center"><code>gen_statem</code></td>
<td align="left">Máquina de estados genérica.</td>
</tr>
<tr>
<td align="center"><code>io</code></td>
<td align="left">Interfaz estándar de entrada y salida.</td>
</tr>
<tr>
<td align="center"><code>io_lib</code></td>
<td align="left">Funciones de entrada y salida.</td>
</tr>
<tr>
<td align="center"><code>log_mf_h</code></td>
<td align="left">Gestor de eventos que registra eventos en ficheros.</td>
</tr>
<tr>
<td align="center"><code>math</code></td>
<td align="left">Funciones matemáticas.</td>
</tr>
<tr>
<td align="center"><code>peer</code></td>
<td align="left">Inicia y controla nodos enlazados.</td>
</tr>
<tr>
<td align="center"><code>pool</code></td>
<td align="left">Gestor de distribución de carga con procesos.</td>
</tr>
<tr>
<td align="center"><code>proc_lib</code></td>
<td align="left">Funciones para la creación de procesos.</td>
</tr>
<tr>
<td align="center"><code>rand</code></td>
<td align="left">Generación de números pseudo-aleatorios.</td>
</tr>
<tr>
<td align="center"><code>re</code></td>
<td align="left">Manejo de expresiones regulares para Erlang.</td>
</tr>
<tr>
<td align="center"><code>shell</code></td>
<td align="left">Consola de comandos de Erlang.</td>
</tr>
<tr>
<td align="center"><code>shell_docs</code></td>
<td align="left">Visualización de la documentación en la consola de Erlang.</td>
</tr>
<tr>
<td align="center"><code>slave</code></td>
<td align="left">Inicia y controla nodos esclavos.</td>
</tr>
<tr>
<td align="center"><code>supervisor</code></td>
<td align="left">Supervisor genérico de procesos.</td>
</tr>
<tr>
<td align="center"><code>supervisor_bridge</code></td>
<td align="left">Puente supervisor genérico de procesos.</td>
</tr>
<tr>
<td align="center"><code>sys</code></td>
<td align="left">Interfaz para mensajes de sistema.</td>
</tr>
<tr>
<td align="center"><code>timer</code></td>
<td align="left">Manejo de temporizadores.</td>
</tr>
<tr>
<td align="center"><code>unicode</code></td>
<td align="left">Conversión de caracteres Unicode.</td>
</tr>
<tr>
<td align="center"><code>uri_string</code></td>
<td align="left">Procesado de <a href="https://es.wikipedia.org/wiki/Identificador_de_recursos_uniforme">URIs</a>.</td>
</tr>
<tr>
<td align="center"><code>win32reg</code></td>
<td align="left">Manejo del registro de Windows.</td>
</tr>
<tr>
<td align="center"><code>zip</code></td>
<td align="left">Manejo de ficheros <code>.zip</code>.</td>
</tr>
</tbody>
</table><p>Los módulos de estructuras de datos son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>array</code></td>
<td align="left">Manejo de arrays.</td>
</tr>
<tr>
<td align="center"><code>binary</code></td>
<td align="left">Manejo de binarios.</td>
</tr>
<tr>
<td align="center"><code>dict</code></td>
<td align="left">Manejo de diccionarios clave-valor. Las claves se comparan con <code>=:=</code>.</td>
</tr>
<tr>
<td align="center"><code>digraph</code></td>
<td align="left">Manejo de grafos dirigidos.</td>
</tr>
<tr>
<td align="center"><code>digraph_utils</code></td>
<td align="left">Algoritmos para grafos dirigidos.</td>
</tr>
<tr>
<td align="center"><code>gb_sets</code></td>
<td align="left">Manejo de conjuntos implementados con árboles balanceados. Los elementos se comparan con <code>==</code>.</td>
</tr>
<tr>
<td align="center"><code>gb_trees</code></td>
<td align="left">Manejo de árboles balanceados. Los elementos se comparan con <code>==</code>.</td>
</tr>
<tr>
<td align="center"><code>lists</code></td>
<td align="left">Manejo de listas.</td>
</tr>
<tr>
<td align="center"><code>maps</code></td>
<td align="left">Manejo de mapas clave-valor.</td>
</tr>
<tr>
<td align="center"><code>orddict</code></td>
<td align="left">Manejo de diccionarios clave-valor implementados con listas ordenadas. Las claves se comparan con <code>==</code>.</td>
</tr>
<tr>
<td align="center"><code>ordsets</code></td>
<td align="left">Manejo de conjuntos implementados con listas ordenadas. Los elementos se comparan con <code>==</code>.</td>
</tr>
<tr>
<td align="center"><code>proplists</code></td>
<td align="left">Manejo de listas de propiedades clave-valor. Las claves se comparan con <code>=:=</code>.</td>
</tr>
<tr>
<td align="center"><code>queue</code></td>
<td align="left">Manejo de colas.</td>
</tr>
<tr>
<td align="center"><code>sets</code></td>
<td align="left">Manejo de conjuntos. Los elementos se comparan con <code>=:=</code>.</td>
</tr>
<tr>
<td align="center"><code>sofs</code></td>
<td align="left">Manejo de conjuntos de conjuntos. Los elementos se comparan con <code>==</code>.</td>
</tr>
<tr>
<td align="center"><code>string</code></td>
<td align="left">Manejo de cadenas de texto.</td>
</tr>
</tbody>
</table><p>Los módulos de bases de datos son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>dets</code></td>
<td align="left">Base de datos <a href="https://es.wikipedia.org/wiki/NoSQL">NoSQL</a> en ficheros.</td>
</tr>
<tr>
<td align="center"><code>ets</code></td>
<td align="left">Base de datos <a href="https://es.wikipedia.org/wiki/NoSQL">NoSQL</a> en memoria.</td>
</tr>
<tr>
<td align="center"><code>ms_transform</code></td>
<td align="left">Transformación de sintaxis para crear especificaciones de ajuste de patrones.</td>
</tr>
<tr>
<td align="center"><code>qlc</code></td>
<td align="left">Interfaz de consultas a Mnesia, ETS, DETS y demás.</td>
</tr>
</tbody>
</table><p>Los módulos de gestión del lenguaje son:</p>

<table>
<thead>
<tr>
<th align="center">Módulo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>beam_lib</code></td>
<td align="left">Interfaz del formato de ficheros BEAM.</td>
</tr>
<tr>
<td align="center"><code>epp</code></td>
<td align="left">Preprocesador de código Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_anno</code></td>
<td align="left">Tipo de datos abstracto para las anotaciones del compilador de Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_eval</code></td>
<td align="left">Meta-interprete de Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_expand_records</code></td>
<td align="left">Transforma formas abstractas de código Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_features</code></td>
<td align="left">Manejo de características del lenguaje.</td>
</tr>
<tr>
<td align="center"><code>erl_id_trans</code></td>
<td align="left">Transformación de parseado identidad.</td>
</tr>
<tr>
<td align="center"><code>erl_internal</code></td>
<td align="left">Definiciones internas de Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_lint</code></td>
<td align="left"><em>Linter</em> para el lenguaje Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_parse</code></td>
<td align="left">Parser del lenguaje Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_pp</code></td>
<td align="left">Representación legible de Erlang.</td>
</tr>
<tr>
<td align="center"><code>erl_scan</code></td>
<td align="left">Generador de tokens del lenguaje Erlang.</td>
</tr>
</tbody>
</table><h3 id="funciones-nativas-del-lenguaje">Funciones nativas del lenguaje</h3>
<p>El módulo <a href="https://www.erlang.org/doc/man/erlang.html"><code>erlang</code></a> contiene la mayor parte de las funciones nativas que hay en el lenguaje. Algunas de estas funciones no requieren indicar su módulo para invocarlas. Algunas de las funciones generales son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>error</code></td>
<td align="left">Lanza un error de ejecución.</td>
</tr>
<tr>
<td align="center"><code>garbage_collect</code></td>
<td align="left">Invoca al recolector de basura.</td>
</tr>
<tr>
<td align="center"><code>halt</code></td>
<td align="left">Para el entorno de ejecución de Erlang.</td>
</tr>
<tr>
<td align="center"><code>make_ref</code></td>
<td align="left">Crea una referencia única.</td>
</tr>
<tr>
<td align="center"><code>memory</code></td>
<td align="left">Da información sobre la memoria usada por Erlang.</td>
</tr>
<tr>
<td align="center"><code>nif_error</code></td>
<td align="left">Lanza un error de ejecución.</td>
</tr>
<tr>
<td align="center"><code>raise</code></td>
<td align="left">Lanza una excepción en ejecución.</td>
</tr>
<tr>
<td align="center"><code>statistics</code></td>
<td align="left">Devuelve estadísticas sobre el sistema.</td>
</tr>
<tr>
<td align="center"><code>system_flag</code></td>
<td align="left">Modifica el comportamiento del sistema.</td>
</tr>
<tr>
<td align="center"><code>system_info</code></td>
<td align="left">Devuelve información sobre el sistema.</td>
</tr>
<tr>
<td align="center"><code>system_monitor</code></td>
<td align="left">Obtiene/modifica la configuración para monitorizar el sistema.</td>
</tr>
<tr>
<td align="center"><code>system_profile</code></td>
<td align="left">Obtiene/modifica la configuración del sistema.</td>
</tr>
<tr>
<td align="center"><code>throw</code></td>
<td align="left">Lanza una excepción en ejecución.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para comprobar tipos:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>is_atom</code></td>
<td align="left">Indica si es de tipo átomo.</td>
</tr>
<tr>
<td align="center"><code>is_binary</code></td>
<td align="left">Indica si es de tipo binario.</td>
</tr>
<tr>
<td align="center"><code>is_bitstring</code></td>
<td align="left">Indica si es de tipo binario.</td>
</tr>
<tr>
<td align="center"><code>is_boolean</code></td>
<td align="left">Indica si es de tipo booleano.</td>
</tr>
<tr>
<td align="center"><code>is_float</code></td>
<td align="left">Indica si es de tipo coma flotante.</td>
</tr>
<tr>
<td align="center"><code>is_function</code></td>
<td align="left">Indica si es de tipo función.</td>
</tr>
<tr>
<td align="center"><code>is_integer</code></td>
<td align="left">Indica si es de tipo entero.</td>
</tr>
<tr>
<td align="center"><code>is_list</code></td>
<td align="left">Indica si es de tipo lista.</td>
</tr>
<tr>
<td align="center"><code>is_map</code></td>
<td align="left">Indica si es de tipo mapa.</td>
</tr>
<tr>
<td align="center"><code>is_number</code></td>
<td align="left">Indica si es de tipo número.</td>
</tr>
<tr>
<td align="center"><code>is_pid</code></td>
<td align="left">Indica si es de tipo PID.</td>
</tr>
<tr>
<td align="center"><code>is_port</code></td>
<td align="left">Indica si es de tipo puerto.</td>
</tr>
<tr>
<td align="center"><code>is_record</code></td>
<td align="left">Indica si es de tipo registro.</td>
</tr>
<tr>
<td align="center"><code>is_reference</code></td>
<td align="left">Indica si es de tipo referencia.</td>
</tr>
<tr>
<td align="center"><code>is_tuple</code></td>
<td align="left">Indica si es de tipo tupla.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para convertir entre tipos:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>atom_to_binary</code></td>
<td align="left">De átomo a texto en binario.</td>
</tr>
<tr>
<td align="center"><code>atom_to_list</code></td>
<td align="left">De átomo a texto en lista.</td>
</tr>
<tr>
<td align="center"><code>binary_to_atom</code></td>
<td align="left">De texto en binario a átomo.</td>
</tr>
<tr>
<td align="center"><code>binary_to_existing_atom</code></td>
<td align="left">De texto en binario a átomo.</td>
</tr>
<tr>
<td align="center"><code>binary_to_float</code></td>
<td align="left">De texto en binario a coma flotante.</td>
</tr>
<tr>
<td align="center"><code>binary_to_integer</code></td>
<td align="left">De texto en binario a entero.</td>
</tr>
<tr>
<td align="center"><code>binary_to_list</code></td>
<td align="left">De binario a lista.</td>
</tr>
<tr>
<td align="center"><code>binary_to_term</code></td>
<td align="left">De binario a valor literal.</td>
</tr>
<tr>
<td align="center"><code>bitstring_to_list</code></td>
<td align="left">De binario a lista.</td>
</tr>
<tr>
<td align="center"><code>float_to_binary</code></td>
<td align="left">De coma flotante a texto en binario.</td>
</tr>
<tr>
<td align="center"><code>float_to_list</code></td>
<td align="left">De coma flotante a texto en lista.</td>
</tr>
<tr>
<td align="center"><code>fun_to_list</code></td>
<td align="left">De valor funcional a texto en lista.</td>
</tr>
<tr>
<td align="center"><code>integer_to_binary</code></td>
<td align="left">De entero a texto en binario.</td>
</tr>
<tr>
<td align="center"><code>integer_to_list</code></td>
<td align="left">De entero a texto en lista.</td>
</tr>
<tr>
<td align="center"><code>iolist_to_binary</code></td>
<td align="left">De lista de entrada a binario.</td>
</tr>
<tr>
<td align="center"><code>iolist_to_iovec</code></td>
<td align="left">De lista de entrada a vector de entrada.</td>
</tr>
<tr>
<td align="center"><code>list_to_atom</code></td>
<td align="left">De texto en lista a átomo.</td>
</tr>
<tr>
<td align="center"><code>list_to_binary</code></td>
<td align="left">De lista a binario.</td>
</tr>
<tr>
<td align="center"><code>list_to_bitstring</code></td>
<td align="left">De lista a binario.</td>
</tr>
<tr>
<td align="center"><code>list_to_existing_atom</code></td>
<td align="left">De texto en lista a átomo.</td>
</tr>
<tr>
<td align="center"><code>list_to_float</code></td>
<td align="left">De texto en lista a coma flotante.</td>
</tr>
<tr>
<td align="center"><code>list_to_integer</code></td>
<td align="left">De texto en lista a entero.</td>
</tr>
<tr>
<td align="center"><code>list_to_pid</code></td>
<td align="left">De texto en lista a PID.</td>
</tr>
<tr>
<td align="center"><code>list_to_port</code></td>
<td align="left">De texto en lista a puerto.</td>
</tr>
<tr>
<td align="center"><code>list_to_ref</code></td>
<td align="left">De texto en lista a referencia.</td>
</tr>
<tr>
<td align="center"><code>list_to_tuple</code></td>
<td align="left">De lista a tupla.</td>
</tr>
<tr>
<td align="center"><code>pid_to_list</code></td>
<td align="left">De PID a texto en lista.</td>
</tr>
<tr>
<td align="center"><code>port_to_list</code></td>
<td align="left">De puerto a texto en lista.</td>
</tr>
<tr>
<td align="center"><code>ref_to_list</code></td>
<td align="left">De referencia a texto en lista.</td>
</tr>
<tr>
<td align="center"><code>term_to_binary</code></td>
<td align="left">De valor literal a binario.</td>
</tr>
<tr>
<td align="center"><code>term_to_iovec</code></td>
<td align="left">De valor literal a vector de entrada.</td>
</tr>
<tr>
<td align="center"><code>tuple_to_list</code></td>
<td align="left">De tupla a lista.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para temas numéricos:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>abs</code></td>
<td align="left">Devuelve el valor absoluto de un número.</td>
</tr>
<tr>
<td align="center"><code>adler32</code></td>
<td align="left">Calcula un <em>checksum</em> <a href="https://en.wikipedia.org/wiki/Adler-32"><em>Adler-32</em></a>.</td>
</tr>
<tr>
<td align="center"><code>adler32_combine</code></td>
<td align="left">Calcula un <em>checksum</em> <a href="https://en.wikipedia.org/wiki/Adler-32"><em>Adler-32</em></a>.</td>
</tr>
<tr>
<td align="center"><code>ceil</code></td>
<td align="left">Devuelve el menor entero igual o mayor que el número actual.</td>
</tr>
<tr>
<td align="center"><code>crc32</code></td>
<td align="left">Calcula un <em>checksum</em> <a href="https://es.wikipedia.org/wiki/Verificaci%C3%B3n_de_redundancia_c%C3%ADclica"><em>CRC-32</em></a>.</td>
</tr>
<tr>
<td align="center"><code>crc32_combine</code></td>
<td align="left">Calcula un <em>checksum</em> <a href="https://es.wikipedia.org/wiki/Verificaci%C3%B3n_de_redundancia_c%C3%ADclica"><em>CRC-32</em></a>.</td>
</tr>
<tr>
<td align="center"><code>external_size</code></td>
<td align="left">Calcula el tamaño en bytes de un valor literal.</td>
</tr>
<tr>
<td align="center"><code>float</code></td>
<td align="left">Transforma un número en coma flotante.</td>
</tr>
<tr>
<td align="center"><code>floor</code></td>
<td align="left">Devuelve el mayor entero igual o menor que el número actual.</td>
</tr>
<tr>
<td align="center"><code>max</code></td>
<td align="left">Devuelve el valor mayor.</td>
</tr>
<tr>
<td align="center"><code>md5</code></td>
<td align="left">Calcula un <a href="https://es.wikipedia.org/wiki/MD5">MD5</a>.</td>
</tr>
<tr>
<td align="center"><code>md5_final</code></td>
<td align="left">Finaliza el cálculo de un <a href="https://es.wikipedia.org/wiki/MD5">MD5</a>.</td>
</tr>
<tr>
<td align="center"><code>md5_init</code></td>
<td align="left">Inicia el cálculo de un <a href="https://es.wikipedia.org/wiki/MD5">MD5</a>.</td>
</tr>
<tr>
<td align="center"><code>md5_update</code></td>
<td align="left">Actualiza el cálculo de un <a href="https://es.wikipedia.org/wiki/MD5">MD5</a>.</td>
</tr>
<tr>
<td align="center"><code>min</code></td>
<td align="left">Devuelve el valor menor.</td>
</tr>
<tr>
<td align="center"><code>phash2</code></td>
<td align="left">Devuelve un <em>hash</em> para un valor literal.</td>
</tr>
<tr>
<td align="center"><code>round</code></td>
<td align="left">Redondea un número.</td>
</tr>
<tr>
<td align="center"><code>trunc</code></td>
<td align="left">Trunca un número quitando los decimales.</td>
</tr>
<tr>
<td align="center"><code>unique_integer</code></td>
<td align="left">Genera un número entero único.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar fechas y horas:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>convert_time_unit</code></td>
<td align="left">Transforma marcas de tiempo.</td>
</tr>
<tr>
<td align="center"><code>date</code></td>
<td align="left">Devuelve la fecha actual.</td>
</tr>
<tr>
<td align="center"><code>localtime</code></td>
<td align="left">Devuelve la fecha y hora actual.</td>
</tr>
<tr>
<td align="center"><code>localtime_to_universaltime</code></td>
<td align="left">Transforma a horario UTC.</td>
</tr>
<tr>
<td align="center"><code>monotonic_time</code></td>
<td align="left">Devuelve el tiempo actual de ejecución.</td>
</tr>
<tr>
<td align="center"><code>system_time</code></td>
<td align="left">Devuelve el tiempo actual del sistema.</td>
</tr>
<tr>
<td align="center"><code>time</code></td>
<td align="left">Devuelve la hora actual.</td>
</tr>
<tr>
<td align="center"><code>time_offset</code></td>
<td align="left">Devuelve la diferencia entre el tiempo monótono y el del sistema.</td>
</tr>
<tr>
<td align="center"><code>timestamp</code></td>
<td align="left">Devuelve una marca de tiempo.</td>
</tr>
<tr>
<td align="center"><code>universaltime</code></td>
<td align="left">Devuelve la fecha y hora actual en UTC.</td>
</tr>
<tr>
<td align="center"><code>universaltime_to_localtime</code></td>
<td align="left">Transforma a horario local.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar temporizadores:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>cancel_timer</code></td>
<td align="left">Cancela un temporizador.</td>
</tr>
<tr>
<td align="center"><code>read_timer</code></td>
<td align="left">Consulta un temporizador.</td>
</tr>
<tr>
<td align="center"><code>start_timer</code></td>
<td align="left">Inicia un temporizador.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar listas:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>hd</code></td>
<td align="left">Devuelve la cabeza de la lista.</td>
</tr>
<tr>
<td align="center"><code>length</code></td>
<td align="left">Devuelve el número de elementos de una lista.</td>
</tr>
<tr>
<td align="center"><code>tl</code></td>
<td align="left">Devuelve la cola de la lista.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar tuplas:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>append_element</code></td>
<td align="left">Añade una componente adicional a una tupla.</td>
</tr>
<tr>
<td align="center"><code>delete_element</code></td>
<td align="left">Borra una componente en una tupla.</td>
</tr>
<tr>
<td align="center"><code>element</code></td>
<td align="left">Devuelve una componente en una tupla.</td>
</tr>
<tr>
<td align="center"><code>insert_element</code></td>
<td align="left">Inserta una componente adicional a una tupla.</td>
</tr>
<tr>
<td align="center"><code>make_tuple</code></td>
<td align="left">Crea una tupla con todas las componentes iguales.</td>
</tr>
<tr>
<td align="center"><code>setelement</code></td>
<td align="left">Modifica una componente en una tupla.</td>
</tr>
<tr>
<td align="center"><code>tuple_size</code></td>
<td align="left">Devuelve el número de componente de una tupla.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar mapas:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>is_map_key</code></td>
<td align="left">Indica si la clave está en el mapa.</td>
</tr>
<tr>
<td align="center"><code>map_get</code></td>
<td align="left">Obtiene el valor para una clave en el mapa.</td>
</tr>
<tr>
<td align="center"><code>map_size</code></td>
<td align="left">Devuelve el número de elementos de un mapa.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar funciones o módulos:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>apply</code></td>
<td align="left">Invoca una función con una serie de argumentos.</td>
</tr>
<tr>
<td align="center"><code>check_old_code</code></td>
<td align="left">Comprueba si se está ejecutando código viejo.</td>
</tr>
<tr>
<td align="center"><code>check_process_code</code></td>
<td align="left">Comprueba si se está ejecutando código viejo.</td>
</tr>
<tr>
<td align="center"><code>function_exported</code></td>
<td align="left">Comprueba si existe una función.</td>
</tr>
<tr>
<td align="center"><code>fun_info</code></td>
<td align="left">Devuelve información relativa a una función.</td>
</tr>
<tr>
<td align="center"><code>is_builtin</code></td>
<td align="left">Indica si es de una función nativa.</td>
</tr>
<tr>
<td align="center"><code>load_nif</code></td>
<td align="left">Carga código nativo para un módulo.</td>
</tr>
<tr>
<td align="center"><code>loaded</code></td>
<td align="left">Devuelve la lista de todos los módulos cargados.</td>
</tr>
<tr>
<td align="center"><code>pre_loaded</code></td>
<td align="left">Devuelve la lista de todos los módulos pre-cargados al iniciar el entorno de ejecución de Erlang.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar otras estructuras de datos:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>binary_part</code></td>
<td align="left">Devuelve un fragmento de un binario.</td>
</tr>
<tr>
<td align="center"><code>bit_size</code></td>
<td align="left">Devuelve el tamaño en bits de un binario.</td>
</tr>
<tr>
<td align="center"><code>byte_size</code></td>
<td align="left">Devuelve el tamaño en bytes de un binario.</td>
</tr>
<tr>
<td align="center"><code>decode_packet</code></td>
<td align="left">Decodifica un paquete binario.</td>
</tr>
<tr>
<td align="center"><code>iolist_size</code></td>
<td align="left">Devuelve el tamaño en bytes de una lista de entrada.</td>
</tr>
<tr>
<td align="center"><code>match_spec_test</code></td>
<td align="left">Comprueba una especificación de encaje.</td>
</tr>
<tr>
<td align="center"><code>size</code></td>
<td align="left">Devuelve el número de elementos en un binario o tupla.</td>
</tr>
<tr>
<td align="center"><code>split_binary</code></td>
<td align="left">Parte un binario en dos fragmentos.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar procesos:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>alias</code></td>
<td align="left">Devuelve una referencia como alias del proceso actual.</td>
</tr>
<tr>
<td align="center"><code>demonitor</code></td>
<td align="left">Elimina una relación de monitor.</td>
</tr>
<tr>
<td align="center"><code>erase</code></td>
<td align="left">Borra elementos del diccionario del proceso.</td>
</tr>
<tr>
<td align="center"><code>exit</code></td>
<td align="left">Termina la ejecución de un proceso.</td>
</tr>
<tr>
<td align="center"><code>get</code></td>
<td align="left">Consulta elementos del diccionario del proceso.</td>
</tr>
<tr>
<td align="center"><code>get_keys</code></td>
<td align="left">Devuelve las claves del diccionario del proceso.</td>
</tr>
<tr>
<td align="center"><code>group_leader</code></td>
<td align="left">Obtiene/modifica el líder de grupo.</td>
</tr>
<tr>
<td align="center"><code>hibernate</code></td>
<td align="left">Hiberna un proceso en ejecución.</td>
</tr>
<tr>
<td align="center"><code>is_process_alive</code></td>
<td align="left">Indica si el proceso está vivo.</td>
</tr>
<tr>
<td align="center"><code>link</code></td>
<td align="left">Enlaza el proceso actual con otro.</td>
</tr>
<tr>
<td align="center"><code>monitor</code></td>
<td align="left">Establece una relación de monitor.</td>
</tr>
<tr>
<td align="center"><code>process_display</code></td>
<td align="left">Muestra información sobre un proceso.</td>
</tr>
<tr>
<td align="center"><code>process_flag</code></td>
<td align="left">Modifica el comportamiento de un proceso.</td>
</tr>
<tr>
<td align="center"><code>process_info</code></td>
<td align="left">Devuelve información sobre un proceso.</td>
</tr>
<tr>
<td align="center"><code>processes</code></td>
<td align="left">Devuelve los procesos actuales del nodo.</td>
</tr>
<tr>
<td align="center"><code>put</code></td>
<td align="left">Modifica elementos del diccionario del proceso.</td>
</tr>
<tr>
<td align="center"><code>self</code></td>
<td align="left">Devuelve el PID del proceso actual.</td>
</tr>
<tr>
<td align="center"><code>send</code></td>
<td align="left">Envía un mensaje a un proceso o puerto.</td>
</tr>
<tr>
<td align="center"><code>send_after</code></td>
<td align="left">Envía un mensaje a un proceso o puerto.</td>
</tr>
<tr>
<td align="center"><code>send_nosuspend</code></td>
<td align="left">Envía un mensaje a un proceso o puerto.</td>
</tr>
<tr>
<td align="center"><code>spawn</code></td>
<td align="left">Crea un proceso.</td>
</tr>
<tr>
<td align="center"><code>spawn_link</code></td>
<td align="left">Crea un proceso enlazado.</td>
</tr>
<tr>
<td align="center"><code>spawn_monitor</code></td>
<td align="left">Crea un proceso monitorizado.</td>
</tr>
<tr>
<td align="center"><code>spawn_opt</code></td>
<td align="left">Crea un proceso avanzado.</td>
</tr>
<tr>
<td align="center"><code>spawn_request</code></td>
<td align="left">Pide crear un proceso.</td>
</tr>
<tr>
<td align="center"><code>spawn_request_abandon</code></td>
<td align="left">Descarta la petición de crear un proceso.</td>
</tr>
<tr>
<td align="center"><code>unalias</code></td>
<td align="left">Elimina una referencia como alias del proceso actual.</td>
</tr>
<tr>
<td align="center"><code>unlink</code></td>
<td align="left">Elimina un enlace de un proceso con otro.</td>
</tr>
<tr>
<td align="center"><code>yield</code></td>
<td align="left">Cede a otro proceso en espera la ejecución.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar nodos:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>disconnect_node</code></td>
<td align="left">Fuerza la desconexión de un nodo.</td>
</tr>
<tr>
<td align="center"><code>get_cookie</code></td>
<td align="left">Devuelve la <em>cookie</em> de un nodo.</td>
</tr>
<tr>
<td align="center"><code>is_alive</code></td>
<td align="left">Indica si el nodo actual está vivo.</td>
</tr>
<tr>
<td align="center"><code>monitor_node</code></td>
<td align="left">Modifica una relación de monitor con un nodo.</td>
</tr>
<tr>
<td align="center"><code>node</code></td>
<td align="left">Devuelve el nombre de un nodo.</td>
</tr>
<tr>
<td align="center"><code>nodes</code></td>
<td align="left">Devuelve nombres de nodos.</td>
</tr>
<tr>
<td align="center"><code>register</code></td>
<td align="left">Registra un nombre en el nodo.</td>
</tr>
<tr>
<td align="center"><code>registered</code></td>
<td align="left">Devuelve los nombres registrados.</td>
</tr>
<tr>
<td align="center"><code>set_cookie</code></td>
<td align="left">Modifica la <em>cookie</em> de un nodo.</td>
</tr>
<tr>
<td align="center"><code>unregister</code></td>
<td align="left">Elimina un nombre registrado en el nodo.</td>
</tr>
<tr>
<td align="center"><code>whereis</code></td>
<td align="left">Devuelve el proceso o puerto asociado a un nombre.</td>
</tr>
</tbody>
</table><p>Estas son las funciones para manejar puertos de comunicación:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>open_port</code></td>
<td align="left">Abre un puerto.</td>
</tr>
<tr>
<td align="center"><code>port_call</code></td>
<td align="left">Realiza una petición síncrona a un puerto.</td>
</tr>
<tr>
<td align="center"><code>port_close</code></td>
<td align="left">Cierra un puerto.</td>
</tr>
<tr>
<td align="center"><code>port_command</code></td>
<td align="left">Envía datos a un puerto.</td>
</tr>
<tr>
<td align="center"><code>port_connect</code></td>
<td align="left">Cambia el dueño de un puerto.</td>
</tr>
<tr>
<td align="center"><code>port_control</code></td>
<td align="left">Ejecuta una operación de control.</td>
</tr>
<tr>
<td align="center"><code>port_info</code></td>
<td align="left">Devuelve información sobre un puerto.</td>
</tr>
<tr>
<td align="center"><code>ports</code></td>
<td align="left">Devuelve los puertos usados por el nodo.</td>
</tr>
</tbody>
</table><h3 id="entrada-y-salida-por-consola">Entrada y salida por consola</h3>
<p>El módulo <a href="https://www.erlang.org/doc/man/io.html"><code>io</code></a> se encarga de la gestión de entrada y salida estándar. Para mostrar información en la terminal tenemos la función <code>format</code> y para leer una cadena de texto la función <code>get_line</code>, que siguen la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">format(</mtext><mrow><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{format(} \mathit{formato} \textcolor{red}{[} \texttt{,} \mathit{datos} \textcolor{red}{]} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">format(</span></span><span class="mord"><span class="mord mathit">formato</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">datos</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">get_line(</mtext><mrow><mi>m</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>a</mi><mi>j</mi><mi>e</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{get\char95line(} \mathit{mensaje} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.91666em; vertical-align: -0.22222em;"></span><span class="mord text"><span class="mord texttt">get_line(</span></span><span class="mord"><span class="mord mathit">mensaje</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Tanto <em>formato</em> como <em>mensaje</em> son cadenas de texto que se van a mostrar. El parámetro <em>datos</em> es una lista con los valores que se van a insertar en la cadena de formato. Y por último, <code>format</code> devuelve siempre <code>ok</code>, mientras que <code>get_line</code> devuelve una cadena de texto, la tupla <code>{error, Motivo}</code> o el átomo <code>eof</code>.</p>
<p>Hay que señalar que la cadena de formato de <code>format</code> tiene diferentes marcadores para representar información. Los marcadores siguen la forma <code>~A.P.RMC</code>, donde <code>A</code> es el ancho mínimo (alineado a la izquierda, salvo que sea un número negativo para alinearlo a la derecha), <code>P</code> es la precisión que se va a mostrar, <code>R</code> es el carácter de relleno, <code>M</code> es un modificador de cómo se interpretará el dato a representar, y <code>C</code> es el código de representación. Se puede usar un <code>*</code> para <code>A</code>, <code>P</code> y <code>R</code>, utilizando los siguientes elementos en la lista de datos que haya para definir estos valores. La mayoría de estos indicadores son opcionales, siendo obligatorio como mínimo la forma <code>~C</code>. Los códigos de representación son:</p>

<table>
<thead>
<tr>
<th align="center">Código</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>~</code></td>
<td align="left">Muestra el carácter <code>~</code>.</td>
</tr>
<tr>
<td align="center"><code>c</code></td>
<td align="left">Muestra un código ASCII como un carácter.</td>
</tr>
<tr>
<td align="center"><code>f</code></td>
<td align="left">Muestra número de coma flotante con formato <code>[-]ddd.ddd</code>.</td>
</tr>
<tr>
<td align="center"><code>e</code></td>
<td align="left">Muestra número de coma flotante con formato <code>[-]d.ddde+-ddd</code>.</td>
</tr>
<tr>
<td align="center"><code>g</code></td>
<td align="left">Muestra número de coma flotante, usando <code>f</code> para valores entre <code>0.1</code> y <code>10000.0</code>, y usando <code>e</code> para el resto.</td>
</tr>
<tr>
<td align="center"><code>s</code></td>
<td align="left">Muestra una cadena de texto.</td>
</tr>
<tr>
<td align="center"><code>w</code></td>
<td align="left">Muestra un valor Erlang de forma simple.</td>
</tr>
<tr>
<td align="center"><code>p</code></td>
<td align="left">Muestra un valor Erlang de forma legible.</td>
</tr>
<tr>
<td align="center"><code>W</code></td>
<td align="left">Como <code>w</code> pero toma un dato adicional que indica el nivel de profundidad máximo para la representación.</td>
</tr>
<tr>
<td align="center"><code>P</code></td>
<td align="left">Como <code>p</code> pero toma un dato adicional que indica el nivel de profundidad máximo para la representación.</td>
</tr>
<tr>
<td align="center"><code>B</code></td>
<td align="left">Muestra números enteros en bases entre <code>2</code> y <code>36</code>, siendo <code>10</code> el valor por defecto. Por ejemplo, <code>~.16B</code> nos muestra enteros hexadecimales.</td>
</tr>
<tr>
<td align="center"><code>X</code></td>
<td align="left">Como <code>B</code> pero toma un dato adicional que indica el prefijo a usar para la representación.</td>
</tr>
<tr>
<td align="center"><code>#</code></td>
<td align="left">Como <code>B</code> pero usa la notación <code>#</code> de Erlang para representar los números enteros.</td>
</tr>
<tr>
<td align="center"><code>b</code></td>
<td align="left">Como <code>B</code> pero las letras son en minúsculas.</td>
</tr>
<tr>
<td align="center"><code>x</code></td>
<td align="left">Como <code>X</code> pero las letras son en minúsculas.</td>
</tr>
<tr>
<td align="center"><code>+</code></td>
<td align="left">Como <code>#</code> pero las letras son en minúsculas.</td>
</tr>
<tr>
<td align="center"><code>n</code></td>
<td align="left">Muestra una nueva línea.</td>
</tr>
<tr>
<td align="center"><code>i</code></td>
<td align="left">Ignora el siguiente dato en la lista.</td>
</tr>
</tbody>
</table><h3 id="manejo-de-estructuras-de-datos">Manejo de estructuras de datos</h3>
<p>La biblioteca estándar tiene diferentes módulos para manejar algunos tipos de estructuras de datos. El módulo más completo disponible es <a href="https://www.erlang.org/doc/man/lists.html"><code>lists</code></a> que sirve para manipular listas. Dentro de todas las funciones que hay, vamos a centrarnos en las de <a href="https://es.wikipedia.org/wiki/Funci%C3%B3n_de_orden_superior">orden superior</a>, que son aquellas que aceptan como argumentos de entrada otras funciones:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Tipo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>all(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; Bool</code></td>
<td align="left">Comprueba que todos los elementos de <code>L</code> cumplan <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>any(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; Bool</code></td>
<td align="left">Comprueba que algún elemento de <code>L</code> cumplan <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>dropwhile(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; [T]</code></td>
<td align="left">Elimina elementos de <code>L</code> mientras se cumpla <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>filter(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; [T]</code></td>
<td align="left">Mantiene aquellos elementos de <code>L</code> que cumplan <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>filtermap(F,L)</code></td>
<td align="center"><code>((T) -&gt; BOT, [T]) -&gt; [T]</code></td>
<td align="left">Mantiene y/o transforma elementos de <code>L</code> con <code>F</code>, donde <code>BOT</code> puede ser <code>{true, Valor}</code>, <code>true</code>, <code>false</code>. Con el primero se sustituye el elemento por <code>Valor</code>, con el segundo se mantiene el elemento y con el tercero se descarta.</td>
</tr>
<tr>
<td align="center"><code>flatmap(F,L)</code></td>
<td align="center"><code>((A) -&gt; B, [A]) -&gt; [B]</code></td>
<td align="left">Aplana la lista <code>L</code> y aplica <code>F</code> a cada elemento de la lista aplanada.</td>
</tr>
<tr>
<td align="center"><code>foldl(F,A,L)</code></td>
<td align="center"><code>((T,R) -&gt; R, R, [T]) -&gt; R</code></td>
<td align="left">Reduce la lista <code>L</code>, usando un valor acumulador inicial <code>A</code>, mediante la función <code>F</code>, cuyo primer parámetro es el elemento de la lista y el segundo el valor acumulado actual. Se recorre la lista de izquierda a derecha y por ello tiene recursión de cola, siendo más eficiente que <code>foldr</code>.</td>
</tr>
<tr>
<td align="center"><code>foldr(F,A,L)</code></td>
<td align="center"><code>((T,R) -&gt; R, R, [T]) -&gt; R</code></td>
<td align="left">Reduce la lista <code>L</code>, usando un valor acumulador inicial <code>A</code>, mediante la función <code>F</code>, cuyo primer parámetro es el elemento de la lista y el segundo el valor acumulado actual. Se recorre la lista de derecha a izquierda y por ello no tiene recursión de cola, siendo menos eficiente que <code>foldl</code>.</td>
</tr>
<tr>
<td align="center"><code>foreach(F,L)</code></td>
<td align="center"><code>((T) -&gt; R, [T]) -&gt; ok</code></td>
<td align="left">Aplica la función <code>F</code> a cada elemento de la lista <code>L</code> sin importar el resultado.</td>
</tr>
<tr>
<td align="center"><code>map(F,L)</code></td>
<td align="center"><code>((A) -&gt; B, [A]) -&gt; [B]</code></td>
<td align="left">Aplica la función <code>F</code> a cada elemento de la lista <code>L</code>.</td>
</tr>
<tr>
<td align="center"><code>mapfoldl(F,A,L)</code></td>
<td align="center"><code>((T,R) -&gt; {U,R}, R, [T]) -&gt; {[U],R}</code></td>
<td align="left">Realiza las funciones <code>map</code> y <code>foldl</code> en un recorrido.</td>
</tr>
<tr>
<td align="center"><code>mapfoldr(F,A,L)</code></td>
<td align="center"><code>((T,R) -&gt; {U,R}, R, [T]) -&gt; {[U],R}</code></td>
<td align="left">Realiza las funciones <code>map</code> y <code>foldr</code> en un recorrido.</td>
</tr>
<tr>
<td align="center"><code>merge(F,L1,L2)</code></td>
<td align="center"><code>((A,B) -&gt; Bool, [A], [B]) -&gt; [A+B]</code></td>
<td align="left">Fusiona dos listas usando <code>F</code> para determinar si <code>A &lt;= B</code>.</td>
</tr>
<tr>
<td align="center"><code>partition(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; {[T],[T]}</code></td>
<td align="left">Devuelve una tupla donde la primera componente son los elementos de <code>L</code> que cumplen <code>P</code> y la segunda los que no.</td>
</tr>
<tr>
<td align="center"><code>search(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; R</code></td>
<td align="left">Busca un elemento en <code>L</code> que cumpla <code>P</code>, donde <code>R</code> puede ser <code>{value, Valor}</code> o <code>false</code>.</td>
</tr>
<tr>
<td align="center"><code>sort(F,L)</code></td>
<td align="center"><code>((A,B) -&gt; Bool, [T]) -&gt; [T]</code></td>
<td align="left">Devuelve una lista ordenada, con los elementos de <code>L</code>, usando <code>F</code> para determinar si <code>A &lt;= B</code>.</td>
</tr>
<tr>
<td align="center"><code>splitwith(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; {[T],[T]}</code></td>
<td align="left">Devuelve una tupla con dos listas a partir de <code>L</code>, la primera son elementos que cumplen <code>P</code> hasta que deja de cumplirse, para devolver el resto de elementos en la segunda.</td>
</tr>
<tr>
<td align="center"><code>takewhile(P,L)</code></td>
<td align="center"><code>((T) -&gt; Bool, [T]) -&gt; [T]</code></td>
<td align="left">Devuelve elementos de <code>L</code> mientras se cumpla <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>umerge(F,L1,L2)</code></td>
<td align="center"><code>((A,B) -&gt; Bool, [A], [B]) -&gt; [A+B]</code></td>
<td align="left">Fusiona dos listas ordenadas usando <code>F</code> para determinar si <code>A &lt;= B</code>, si <code>A == B</code> descarta el segundo elemento.</td>
</tr>
<tr>
<td align="center"><code>usort(F,L)</code></td>
<td align="center"><code>((A,B) -&gt; Bool, [T]) -&gt; [T]</code></td>
<td align="left">Devuelve una lista ordenada eliminando los duplicados, con los elementos de <code>L</code>, usando <code>F</code> para determinar si <code>A &lt;= B</code>.</td>
</tr>
<tr>
<td align="center"><code>zipwith(F,L1,L2)</code></td>
<td align="center"><code>((X,Y) -&gt; R, [X], [Y]) -&gt; [R]</code></td>
<td align="left">Combina dos elementos en una sola lista usando <code>F</code>.</td>
</tr>
<tr>
<td align="center"><code>zipwith3(F,L1,L2,L3)</code></td>
<td align="center"><code>((X,Y,Z) -&gt; R, [X], [Y], [Z]) -&gt; [R]</code></td>
<td align="left">Combina tres elementos en una sola lista usando <code>F</code>.</td>
</tr>
<tr>
<td align="center"><code>uniq(F,L)</code></td>
<td align="center"><code>((T) -&gt; Any, [T]) -&gt; [T]</code></td>
<td align="left">Elimina los duplicados de <code>L</code> usando <code>F</code> para seleccionar el valor que representa a cada elemento.</td>
</tr>
</tbody>
</table><p>Algunas de estas funciones se pueden encontrar en otros módulos como <code>array</code>, <code>gb_sets</code>, <code>gb_trees</code>, <code>maps</code>, <code>queue</code> o <code>sets</code>.</p>
<h3 id="ets-dets-y-mnesia">ETS, DETS y Mnesia</h3>
<p>La biblioteca de Erlang dispone de una serie de módulos que nos permite tener una base de datos NoSQL a nuestra disposición. Estos módulos son: <a href="https://www.erlang.org/doc/man/ets.html"><code>ets</code></a>, <a href="https://www.erlang.org/doc/man/dets.html"><code>dets</code></a> y <a href="https://www.erlang.org/doc/man/mnesia.html"><code>mnesia</code></a>. El primero gestiona la base de datos en memoria, el segundo en disco y el tercero es una versión extendida que engloba a las dos anteriores.</p>
<p>El funcionamiento consiste en crear las tablas que necesitemos, para insertar, actualizar, borrar y consultar datos con forma de tupla. Dentro de la tupla, una de las componentes actuará como clave de la tabla. Internamente las tablas funcionan con cuatro tipos de estructuras:</p>
<ul>
<li><code>set</code>: No permiten claves duplicadas dentro de la tabla.</li>
<li><code>ordered_set</code>: No permiten claves duplicadas dentro de la tabla y los elementos estarán ordenados a la hora de recorrer la tabla.</li>
<li><code>bag</code>: Permite claves duplicadas dentro de la tabla, pero no permite dos tuplas exactamente iguales.</li>
<li><code>duplicate_bag</code>: Permite incluso tuplas duplicadas dentro de la tabla.</li>
</ul>
<blockquote>
<p>El tipo <code>ordered_set</code> utiliza la igualdad simple <code>==</code> para la comparación, por lo que <code>1</code> es igual que <code>1.0</code>. El resto de tipos de tablas usan el operador <code>=:=</code>. Además, <code>ordered_set</code> no está disponible como tipo de tabla para <code>dets</code> y por ello tampoco lo estará para <code>mnesia</code> cuando se quiera trabajar sólo con el disco duro.</p>
</blockquote>
<p>Las funciones principales del módulo <code>ets</code> son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>all</code></td>
<td align="center"><code>()</code></td>
<td align="left">Devuelve todas las tablas del nodo actual.</td>
</tr>
<tr>
<td align="center"><code>delete</code></td>
<td align="center"><code>(Tabla)</code><br><code>(Tabla, Clave)</code></td>
<td align="left">Borra tuplas de una tabla.</td>
</tr>
<tr>
<td align="center"><code>delete_object</code></td>
<td align="center"><code>(Tabla, Tupla)</code></td>
<td align="left">Borra la misma tupla de una tabla.</td>
</tr>
<tr>
<td align="center"><code>file2tab</code></td>
<td align="center"><code>(Tabla, Fichero)</code><br><code>(Tabla, Fichero, Opciones)</code></td>
<td align="left">Vuelca en una tabla el contenido de un fichero.</td>
</tr>
<tr>
<td align="center"><code>first</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Devuelve la primera clave en una tabla de tipo <code>ordered_set</code>.</td>
</tr>
<tr>
<td align="center"><code>foldl</code></td>
<td align="center"><code>(Función, Accumulador, Tabla)</code></td>
<td align="left">Reduce el contenido de una tabla.</td>
</tr>
<tr>
<td align="center"><code>foldr</code></td>
<td align="center"><code>(Función, Accumulador, Tabla)</code></td>
<td align="left">Reduce el contenido de una tabla.</td>
</tr>
<tr>
<td align="center"><code>from_dets</code></td>
<td align="center"><code>(Tabla, TabDETS)</code></td>
<td align="left">Rellena una tabla ETS con los datos de una tabla DETS.</td>
</tr>
<tr>
<td align="center"><code>fun2ms</code></td>
<td align="center"><code>(Lambda)</code></td>
<td align="left">Toma una función lambda y la transforma en una <em>especificación de ajuste</em> para realizar operaciones de selección.</td>
</tr>
<tr>
<td align="center"><code>give_away</code></td>
<td align="center"><code>(Tabla, PID, Extra)</code></td>
<td align="left">Cambia el proceso que es dueño de una tabla.</td>
</tr>
<tr>
<td align="center"><code>info</code></td>
<td align="center"><code>(Tabla)</code><br><code>(Tabla, Opción)</code></td>
<td align="left">Devuelve información sobre una tabla.</td>
</tr>
<tr>
<td align="center"><code>insert</code></td>
<td align="center"><code>(Tabla, Tuplas)</code></td>
<td align="left">Añade una o varias tuplas. En las tablas que no permiten duplicados de clave, si ya existe una tupla con la misma clave, se sustituye por la nueva tupla.</td>
</tr>
<tr>
<td align="center"><code>insert_new</code></td>
<td align="center"><code>(Tabla, Tuplas)</code></td>
<td align="left">Añade una o varias tuplas que no existieran previamente.</td>
</tr>
<tr>
<td align="center"><code>last</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Devuelve la última clave en una tabla de tipo <code>ordered_set</code>.</td>
</tr>
<tr>
<td align="center"><code>lookup</code></td>
<td align="center"><code>(Tabla, Clave)</code></td>
<td align="left">Devuelve una tupla o varias con una clave.</td>
</tr>
<tr>
<td align="center"><code>lookup_element</code></td>
<td align="center"><code>(Tabla, Clave, Posición)</code></td>
<td align="left">Devuelve la componente de una tupla o varias con una clave.</td>
</tr>
<tr>
<td align="center"><code>match</code></td>
<td align="center"><code>(Tabla, Patrón)</code></td>
<td align="left">Devuelve los elementos indicados de aquellas tuplas que se ajustan a un patrón.</td>
</tr>
<tr>
<td align="center"><code>match_delete</code></td>
<td align="center"><code>(Tabla, Patrón)</code></td>
<td align="left">Borra aquellas tuplas que se ajustan a un patrón.</td>
</tr>
<tr>
<td align="center"><code>match_object</code></td>
<td align="center"><code>(Tabla, Patrón)</code></td>
<td align="left">Devuelve aquellas tuplas que se ajustan a un patrón.</td>
</tr>
<tr>
<td align="center"><code>member</code></td>
<td align="center"><code>(Table, Clave)</code></td>
<td align="left">Indica si la clave existe en una tabla.</td>
</tr>
<tr>
<td align="center"><code>new</code></td>
<td align="center"><code>(Nombre, Opciones)</code></td>
<td align="left">Crea una nueva tabla.</td>
</tr>
<tr>
<td align="center"><code>next</code></td>
<td align="center"><code>(Tabla, Clave)</code></td>
<td align="left">Devuelve la clave siguiente en una tabla de tipo <code>ordered_set</code>.</td>
</tr>
<tr>
<td align="center"><code>prev</code></td>
<td align="center"><code>(Tabla, Clave)</code></td>
<td align="left">Devuelve la clave anterior en una tabla de tipo <code>ordered_set</code>.</td>
</tr>
<tr>
<td align="center"><code>rename</code></td>
<td align="center"><code>(Tabla, Nombre)</code></td>
<td align="left">Renombra una tabla.</td>
</tr>
<tr>
<td align="center"><code>select</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Devuelve una serie de tuplas, que se ajustan a una <em>especificación de ajuste</em>.</td>
</tr>
<tr>
<td align="center"><code>select_count</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Cuenta cuantas tuplas se ajustan a una <em>especificación de ajuste</em> que devuelva <code>true</code>.</td>
</tr>
<tr>
<td align="center"><code>select_delete</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Borra una serie de tuplas, que se ajustan a una <em>especificación de ajuste</em> que devuelva <code>true</code>.</td>
</tr>
<tr>
<td align="center"><code>select_replace</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Reemplaza una serie de tuplas, que se ajustan a una <em>especificación de ajuste</em>, con el resultado de la especificación.</td>
</tr>
<tr>
<td align="center"><code>select_reverse</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Devuelve una consulta en orden inverso cuando se usa una tabla de tipo <code>ordered_set</code>.</td>
</tr>
<tr>
<td align="center"><code>tab2file</code></td>
<td align="center"><code>(Tabla, Fichero)</code><br><code>(Tabla, Fichero, Opciones)</code></td>
<td align="left">Vuelca en un fichero el contenido de una tabla.</td>
</tr>
<tr>
<td align="center"><code>tab2list</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Devuelve en una lista el contenido de una tabla.</td>
</tr>
<tr>
<td align="center"><code>take</code></td>
<td align="center"><code>(Tabla, Clave)</code></td>
<td align="left">Devuelve y elimina las tuplas con una clave.</td>
</tr>
<tr>
<td align="center"><code>to_dets</code></td>
<td align="center"><code>(Tabla, TabDETS)</code></td>
<td align="left">Rellena una tabla DETS con los datos de una tabla ETS.</td>
</tr>
</tbody>
</table><p>Las <em>opciones</em> a la hora de crear una tabla nueva son las siguientes:</p>

<table>
<thead>
<tr>
<th align="center">Opción</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>set</code>, <code>ordered_set</code>, <code>bag</code> o <code>duplicate_bag</code></td>
<td align="left">Tipo de la tabla. Por defecto es <code>set</code>.</td>
</tr>
<tr>
<td align="center"><code>private</code>, <code>protected</code> o <code>public</code></td>
<td align="left">Acceso de escritura y lectura a la tabla desde otros procesos. Por defecto es <code>protected</code>. Las tablas privadas sólo son accesibles al proceso que la creó, las protegidas permiten la lectura a otros procesos y las públicas además permiten la escritura.</td>
</tr>
<tr>
<td align="center"><code>named_table</code></td>
<td align="left">Utiliza el nombre pasado como argumento para dar nombre interno a la tabla.</td>
</tr>
<tr>
<td align="center"><code>{keypos, Posición}</code></td>
<td align="left">Posición de la clave dentro de las componentes de la tupla. Por defecto es la posición <code>1</code>.</td>
</tr>
<tr>
<td align="center"><code>{heir, PID, Extra}</code> o <code>{heir, none}</code></td>
<td align="left">Define un proceso supervisor para eliminar la tabla cuando este muera. Por defecto es <code>{heir, none}</code>. Esta opción se puede cambiar con la función <code>setopts/2</code>.</td>
</tr>
<tr>
<td align="center"><code>{read_concurrency, Bool}</code></td>
<td align="left">Con <code>true</code> optimiza las lecturas a la tabla a costa del rendimiento de las escrituras, con <code>false</code> pasa lo contrario.</td>
</tr>
<tr>
<td align="center"><code>{read_concurrency, Bool}</code></td>
<td align="left">Con <code>true</code> permite que se puedan realizar lecturas de forma concurrente a las escrituras, sin afectar a las propiedades <a href="https://es.wikipedia.org/wiki/ACID">ACID</a> de la tabla. Con <code>false</code> se trabaja de forma secuencial.</td>
</tr>
<tr>
<td align="center"><code>compressed</code></td>
<td align="left">Permite que las componentes que no sean la clave sean comprimidas para ahorrar tamaño a costa del rendimiento.</td>
</tr>
</tbody>
</table><p>Para hacer consultas a una tabla, con <code>lookup/2</code> buscamos los elementos de una <em>clave</em>. Con <code>match/2</code> definimos un <em>patrón</em> de ajuste que nos devuelva una selección de tuplas en una lista. El <em>patrón</em> será una tupla con una serie de valores, que se pueden combinar con una serie de átomos especiales que ejercen de variables, teniendo estos la forma: <code>'$0'</code>, <code>'$1'</code>, <code>'$2'</code>, etcétera. Adicionalmente, se usa <code>'_'</code> para indicar que nos es indiferente el valor de esa posición dentro del patrón. Por ejemplo:</p>
<pre><code>1&gt; ets:new(foo, [named_table]).
foo
2&gt; ets:insert(foo, [{1,a,a}, {2,b,c}, {4,d,d}]).
true
3&gt; ets:match(foo, {'_','$0','$0'}).
[[a],[d]]
4&gt; ets:match_object(foo, {'_','$0','$0'}).
[{1,a,a},{4,d,d}]
</code></pre>
<p>Sin embargo, este mecanismo no es todo lo flexible que gustaría y por ello existen las funciones <code>select/2</code> y compañía, para utilizar una <a href="https://www.erlang.org/doc/apps/erts/match_spec.html"><em>especificación de ajuste</em></a> que permita consultas más elaboradas. Por suerte, existe una función auxiliar que el compilador detecta para construir especificaciones usando expresiones escritas en Erlang. Para ello tenemos que incluir la siguiente cabecera:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">include_lib</span><span class="token punctuation">(</span><span class="token string">"stdlib/include/ms_transform.hrl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Esto permite al compilador detectar que vamos a usar la función <code>fun2ms/1</code>, que recibe como argumento una expresión lambda, que el compilador traducirá a una <em>especificación de ajuste</em>. Por ejemplo:</p>
<pre><code>5&gt; ets:fun2ms(fun({K,A,_}) when A &gt; 3 -&gt; K end).          
[{{'$1','$2','_'},[{'&gt;','$2',3}],['$1']}]
</code></pre>
<p>Que aplicado al ejemplo anterior de la tabla <code>foo</code>:</p>
<pre><code>6&gt; ets:select(foo, ets:fun2ms(fun({K,V,V}) -&gt; {ok,K,V} end)).
[{ok,1,a},{ok,4,d}]
</code></pre>
<p>Cuando una tabla ETS deja de ser necesaria, basta con llamar a <code>delete/1</code> para borrarla de la memoria por completo.</p>
<p>Las funciones principales del módulo <code>dets</code> son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>all</code></td>
<td align="center"><code>()</code></td>
<td align="left">Devuelve todas las tablas del nodo actual.</td>
</tr>
<tr>
<td align="center"><code>close</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Cierra una tabla previamente abierta.</td>
</tr>
<tr>
<td align="center"><code>delete</code></td>
<td align="center"><code>(Tabla, Clave)</code></td>
<td align="left">Borra una tupla de una tabla.</td>
</tr>
<tr>
<td align="center"><code>delete_object</code></td>
<td align="center"><code>(Tabla, Tupla)</code></td>
<td align="left">Borra la misma tupla de una tabla.</td>
</tr>
<tr>
<td align="center"><code>first</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Devuelve la primera clave en una tabla.</td>
</tr>
<tr>
<td align="center"><code>foldl</code></td>
<td align="center"><code>(Función, Accumulador, Tabla)</code></td>
<td align="left">Reduce el contenido de una tabla.</td>
</tr>
<tr>
<td align="center"><code>foldr</code></td>
<td align="center"><code>(Función, Accumulador, Tabla)</code></td>
<td align="left">Reduce el contenido de una tabla.</td>
</tr>
<tr>
<td align="center"><code>from_ets</code></td>
<td align="center"><code>(Tabla, TabETS)</code></td>
<td align="left">Rellena una tabla DETS con los datos de una tabla ETS.</td>
</tr>
<tr>
<td align="center"><code>info</code></td>
<td align="center"><code>(Tabla)</code><br><code>(Tabla, Opción)</code></td>
<td align="left">Devuelve información sobre una tabla.</td>
</tr>
<tr>
<td align="center"><code>insert</code></td>
<td align="center"><code>(Tabla, Tuplas)</code></td>
<td align="left">Añade una o varias tuplas. En las tablas que no permiten duplicados de clave, si ya existe una tupla con la misma clave, se sustituye por la nueva tupla.</td>
</tr>
<tr>
<td align="center"><code>insert_new</code></td>
<td align="center"><code>(Tabla, Tuplas)</code></td>
<td align="left">Añade una o varias tuplas que no existieran previamente.</td>
</tr>
<tr>
<td align="center"><code>lookup</code></td>
<td align="center"><code>(Tabla, Clave)</code></td>
<td align="left">Devuelve una tupla o varias con una clave.</td>
</tr>
<tr>
<td align="center"><code>match</code></td>
<td align="center"><code>(Tabla, Patrón)</code></td>
<td align="left">Devuelve los elementos indicados de aquellas tuplas que se ajustan a un patrón.</td>
</tr>
<tr>
<td align="center"><code>match_delete</code></td>
<td align="center"><code>(Tabla, Patrón)</code></td>
<td align="left">Borra aquellas tuplas que se ajustan a un patrón.</td>
</tr>
<tr>
<td align="center"><code>match_object</code></td>
<td align="center"><code>(Tabla, Patrón)</code></td>
<td align="left">Devuelve aquellas tuplas que se ajustan a un patrón.</td>
</tr>
<tr>
<td align="center"><code>member</code></td>
<td align="center"><code>(Table, Clave)</code></td>
<td align="left">Indica si la clave existe en una tabla.</td>
</tr>
<tr>
<td align="center"><code>next</code></td>
<td align="center"><code>(Tabla, Clave)</code></td>
<td align="left">Devuelve la clave siguiente en una tabla.</td>
</tr>
<tr>
<td align="center"><code>open_file</code></td>
<td align="center"><code>(Fichero)</code><br><code>(Fichero, Opciones)</code></td>
<td align="left">Abre una tabla almacenada en un fichero. Si no existe el fichero, crea el fichero con una tabla vacía.</td>
</tr>
<tr>
<td align="center"><code>select</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Devuelve una serie de tuplas, que se ajustan a una <em>especificación de ajuste</em>.</td>
</tr>
<tr>
<td align="center"><code>select_delete</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Borra una serie de tuplas, que se ajustan a una <em>especificación de ajuste</em> que devuelva <code>true</code>.</td>
</tr>
<tr>
<td align="center"><code>sync</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Actualiza cualquier cambio pendiente de realizar en el disco duro para una tabla.</td>
</tr>
<tr>
<td align="center"><code>to_ets</code></td>
<td align="center"><code>(Tabla, TabETS)</code></td>
<td align="left">Rellena una tabla ETS con los datos de una tabla DETS.</td>
</tr>
<tr>
<td align="center"><code>traverse</code></td>
<td align="center"><code>(Tabla, Función)</code></td>
<td align="left">Aplica una función a cada tupla de una tabla.</td>
</tr>
</tbody>
</table><p>Las <em>opciones</em> principales a la hora de abrir una tabla son las siguientes:</p>

<table>
<thead>
<tr>
<th align="center">Opción</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>{access, Tipo}</code></td>
<td align="left">Acceso de escritura y lectura a la tabla, donde <code>Tipo</code> puede ser <code>read</code> o <code>read_write</code>. Por defecto es <code>read_write</code>.</td>
</tr>
<tr>
<td align="center"><code>{auto_save, Intervalo}</code></td>
<td align="left">Intervalo de autoguardado de la tabla, donde <code>Intervalo</code> es un número entero de milisegundos o el átomo <code>infinity</code>.</td>
</tr>
<tr>
<td align="center"><code>{file, Fichero}</code></td>
<td align="left">Ruta del fichero con la tabla.</td>
</tr>
<tr>
<td align="center"><code>{keypos, Posición}</code></td>
<td align="left">Posición de la clave dentro de las componentes de la tupla. Por defecto es la posición <code>1</code>.</td>
</tr>
<tr>
<td align="center"><code>{ram_file, Bool}</code></td>
<td align="left">Con <code>true</code> se trabaja sobre la memoria RAM, guardando los cambios de esta en disco cuando se cierra la tabla. Con <code>false</code> se trabaja directamente sobre disco.</td>
</tr>
<tr>
<td align="center"><code>{repair, Valor}</code></td>
<td align="left">Se indica si se debe aplicar el algoritmo de reparación del fichero con la tabla, donde <code>Valor</code> es <code>true</code>, <code>false</code> o <code>force</code>.</td>
</tr>
<tr>
<td align="center"><code>{type, Tipo}</code></td>
<td align="left">Tipo de la tabla, donde <code>Tipo</code> puede ser <code>set</code>, <code>bag</code> o <code>duplicate_bag</code>. Por defecto es <code>set</code>.</td>
</tr>
</tbody>
</table><p>Dejando a un lado funciones como <code>close/1</code> o <code>sync/1</code>, el resto de funcionalidad para tablas DETS es muy similar al de las tablas ETS.</p>
<p>Mnesia es una base de datos distribuida, que por debajo utiliza ETS y DETS para gestionar la información en cada nodo. Como es una aplicación aparte, será necesario utilizar <code>application:start/1</code> y <code>application:stop/1</code> para cargar el sistema, pero antes de arrancar la aplicación es necesario invocar a la función <code>mnesia:create_schema/1</code>, pasando la lista de nodos que van a encargarse de la base de datos:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token atom">ok</span> <span class="token operator">=</span> <span class="token atom">mnesia</span><span class="token punctuation">:</span><span class="token function">create_schema</span><span class="token punctuation">(</span><span class="token function">nodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token atom">application</span><span class="token punctuation">:</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token atom">mnesia</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">% Operaciones con la base de datos...</span>
<span class="token atom">application</span><span class="token punctuation">:</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token atom">mnesia</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Aquí configuramos la base de datos para que se ejecute en la lista de nodos visibles de la red actual, para iniciar la aplicación, hacer las operaciones que hagan falta y parar la aplicación.</p>
<p>Hay que tener en cuenta que se usan registros, en lugar de tuplas, para trabajar en Mnesia. Además, el nombre del tipo de registro se utiliza como nombre de la tabla. Entonces, las funciones principales del módulo <code>mnesia</code> son:</p>

<table>
<thead>
<tr>
<th align="center">Función</th>
<th align="center">Parámetros</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>activity</code></td>
<td align="center"><code>(Modo, Función)</code></td>
<td align="left">Realiza un bloque de operaciones encapsuladas en una función.</td>
</tr>
<tr>
<td align="center"><code>clear_table</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Borra le contenido de una tabla.</td>
</tr>
<tr>
<td align="center"><code>create_table</code></td>
<td align="center"><code>(Nombre, Opciones)</code></td>
<td align="left">Crea una tabla en la base de datos.</td>
</tr>
<tr>
<td align="center"><code>delete</code></td>
<td align="center"><code>({Tabla, Clave})</code></td>
<td align="left">Borra entradas de una tabla con una clave.</td>
</tr>
<tr>
<td align="center"><code>delete_table</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Borra una tabla de la base de datos.</td>
</tr>
<tr>
<td align="center"><code>match_object</code></td>
<td align="center"><code>(Patrón)</code></td>
<td align="left">Devuelve una lista de entradas que ajustan a un patrón de registro.</td>
</tr>
<tr>
<td align="center"><code>read</code></td>
<td align="center"><code>({Tabla, Clave})</code><br><code>(Tabla, Clave)</code></td>
<td align="left">Devuelve entradas de una tabla con una clave.</td>
</tr>
<tr>
<td align="center"><code>select</code></td>
<td align="center"><code>(Tabla, Ajuste)</code></td>
<td align="left">Devuelve entradas que se ajustan a una <em>especificación de ajuste</em>.</td>
</tr>
<tr>
<td align="center"><code>table</code></td>
<td align="center"><code>(Tabla)</code></td>
<td align="left">Devuelve un manejador para consultas con el módulo <a href="https://www.erlang.org/doc/man/qlc.html"><code>qlc</code></a>.</td>
</tr>
<tr>
<td align="center"><code>wait_for_tables</code></td>
<td align="center"><code>(Tablas, Timeout)</code></td>
<td align="left">Espera un tiempo a que estén disponibles una serie de tablas.</td>
</tr>
<tr>
<td align="center"><code>write</code></td>
<td align="center"><code>(Entrada)</code></td>
<td align="left">Escribe una entrada en una tabla.</td>
</tr>
</tbody>
</table><p>Las <em>opciones</em> principales a la hora de crear una tabla son las siguientes:</p>

<table>
<thead>
<tr>
<th align="center">Opción</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>{access_mode, Modo}</code></td>
<td align="left">Acceso de escritura y lectura a la tabla, donde <code>Modo</code> puede ser <code>read_only</code> o <code>read_write</code>. Por defecto es <code>read_write</code>.</td>
</tr>
<tr>
<td align="center"><code>{attributes, Lista}</code></td>
<td align="left">Atributos de la tabla, donde <code>Lista</code> son los nombres de los campos del registro. Se puede usar la función <code>record_info(fields, Nombre)</code> para obtener dicha lista.</td>
</tr>
<tr>
<td align="center"><code>{disc_copies, Nodos}</code></td>
<td align="left">Indica los nodos que trabajan con tablas DETS (disco duro) y ETS (memoria). Por defecto es <code>[]</code>.</td>
</tr>
<tr>
<td align="center"><code>{disc_only_copies, Nodos}</code></td>
<td align="left">Indica los nodos que trabajan sólo con tablas DETS (disco duro).</td>
</tr>
<tr>
<td align="center"><code>{ram_copies, Nodos}</code></td>
<td align="left">Indica los nodos que trabajan sólo con tablas ETS (memoria). Por defecto es <code>[node()]</code>.</td>
</tr>
<tr>
<td align="center"><code>{index, Índices}</code></td>
<td align="left">Lista de índices de la tabla, ya se indicando el nombre de los campos o sus posiciones.</td>
</tr>
<tr>
<td align="center"><code>{record_name, Nombre}</code></td>
<td align="left">Modifica el nombre del registro a usar como elementos de la tabla, para permitir que el nombre de la tabla y del tipo de registro sea diferente. Por defecto se usa el valor usado como nombre de la tabla.</td>
</tr>
<tr>
<td align="center"><code>{type, Tipo}</code></td>
<td align="left">Tipo de la tabla, donde <code>Tipo</code> puede ser <code>set</code>, <code>ordered_set</code> o <code>bag</code>. Por defecto es <code>set</code>. No se puede usar <code>ordered_set</code> con <code>disc_only_copies</code>.</td>
</tr>
<tr>
<td align="center"><code>{local_content, Bool}</code></td>
<td align="left">Con <code>true</code> el contenido local de cada nodo no se compartirá, mientras que con <code>false</code> cada nodo tendrá la misma información para cada tabla. Por defecto es <code>false</code>.</td>
</tr>
</tbody>
</table><p>Supongamos que tenemos el siguiente tipo de dato:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">record</span><span class="token punctuation">(</span><span class="token atom">contact</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token atom">name</span><span class="token punctuation">,</span> <span class="token atom">phone</span><span class="token punctuation">,</span> <span class="token atom">birthday</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Para crear una tabla con Mnesia haríamos lo siguiente:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token atom">mnesia</span><span class="token punctuation">:</span><span class="token function">create_table</span><span class="token punctuation">(</span><span class="token atom">contact</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token atom">attributes</span><span class="token punctuation">,</span> <span class="token function">record_info</span><span class="token punctuation">(</span><span class="token atom">fields</span><span class="token punctuation">,</span> <span class="token atom">contact</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token atom">index</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">#</span><span class="token atom">contact</span><span class="token punctuation">.</span><span class="token atom">name</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token atom">disc_copies</span><span class="token punctuation">,</span> <span class="token function">nodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
<p>Una vez creada las tablas, cuando se ejecuta nuestro programa y se inicia Mnesia, se puede utilizar <code>wait_for_tables/2</code> para que el sistema esté preparado para trabajar con las tablas previamente creadas. Entonces, para trabajar con las tablas, usaremos la función <code>activity/2</code>, que tiene los siguientes modos:</p>

<table>
<thead>
<tr>
<th align="center">Modo</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>transaction</code></td>
<td align="left">Realiza una transacción sobre la base de datos, que consiste en ejecutar una serie de operaciones como un bloque funcional atómico. Esto nos garantiza que o se aplican todas las operaciones con éxito, o no se aplica ninguna en absoluto en caso de fallar alguna.</td>
</tr>
<tr>
<td align="center"><code>sync_transaction</code></td>
<td align="left">Realiza una transacción sobre la base de datos, pero la diferencia es que se sincroniza con todos los nodos, en lugar de hacerlo con el local únicamente.</td>
</tr>
<tr>
<td align="center"><code>async_dirty</code></td>
<td align="left">Realiza una serie de operaciones de forma no transaccional, sincronizándose sólo con el nodo local.</td>
</tr>
<tr>
<td align="center"><code>sync_dirty</code></td>
<td align="left">Realiza una serie de operaciones de forma no transaccional, sincronizándose con todos los nodos.</td>
</tr>
<tr>
<td align="center"><code>ets</code></td>
<td align="left">Realiza una serie de operaciones directamente sobre las tablas ETS de forma no transaccional.</td>
</tr>
<tr>
<td align="center"><code>{transaction, Intentos}</code></td>
<td align="left">Realiza una transacción, con un número de intentos máximos en caso de fallo.</td>
</tr>
<tr>
<td align="center"><code>{sync_transaction, Intentos}</code></td>
<td align="left">Realiza una transacción síncrona, con un número de intentos máximos en caso de fallo.</td>
</tr>
</tbody>
</table><p>Lo recomendable es utilizar transacciones para realizar operaciones sobre la base de datos, para ello se usa habitualmente el modo <code>transaction</code>. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token atom">mnesia</span><span class="token punctuation">:</span><span class="token function">activity</span><span class="token punctuation">(</span><span class="token atom">transaction</span><span class="token punctuation">,</span>
    <span class="token keyword">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
        <span class="token atom">mnesia</span><span class="token punctuation">:</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">#</span><span class="token atom">contact</span><span class="token punctuation">{</span>
            <span class="token atom">name</span>     <span class="token operator">=</span> <span class="token string">"Junko"</span><span class="token punctuation">,</span>
            <span class="token atom">phone</span>    <span class="token operator">=</span> <span class="token string">"56709"</span><span class="token punctuation">,</span>
            <span class="token atom">birthday</span> <span class="token operator">=</span> <span class="token string">"April 26"</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token atom">mnesia</span><span class="token punctuation">:</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token atom">contact</span><span class="token punctuation">,</span> <span class="token string">"Junko"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token punctuation">)</span>
</code></pre>
<p>Insertamos un elemento en la base de datos y luego lo recuperamos, devolviéndolo dentro de una lista. Para hacer consultas se puede usar <code>match_object/1</code> y <code>select/2</code>, de la misma manera que se hacía con las tablas ETS. Otra forma de hacer consultas a las tablas es usando el módulo <a href="https://www.erlang.org/doc/man/qlc.html"><code>qlc</code></a> junto a la función <code>table/1</code>. Para poder realizar estas consultas, hay que incluir la siguiente cabecera:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">include_lib</span><span class="token punctuation">(</span><span class="token string">"stdlib/include/qlc.hrl"</span><span class="token punctuation">)</span>
</code></pre>
<p>Esto nos permite usar la función <code>qlc:q/1</code>, para que traduzca una expresión de lista intensional al formato interno del módulo, que podremos usar con <code>qlc:eval/1</code> para ejecutar la consulta. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token atom">mnesia</span><span class="token punctuation">:</span><span class="token function">activity</span><span class="token punctuation">(</span><span class="token atom">transaction</span><span class="token punctuation">,</span>
    <span class="token keyword">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
        <span class="token atom">qlc</span><span class="token punctuation">:</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token atom">qlc</span><span class="token punctuation">:</span><span class="token function">q</span><span class="token punctuation">(</span>
            <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token variable">N</span><span class="token punctuation">,</span><span class="token variable">P</span><span class="token punctuation">,</span><span class="token variable">B</span><span class="token punctuation">}</span> <span class="token punctuation">|</span><span class="token punctuation">|</span>
             <span class="token punctuation">#</span><span class="token atom">contact</span><span class="token punctuation">{</span><span class="token atom">name</span><span class="token operator">=</span><span class="token variable">N</span><span class="token punctuation">,</span>
                      <span class="token atom">phone</span><span class="token operator">=</span><span class="token variable">P</span><span class="token punctuation">,</span>
                      <span class="token atom">birthday</span><span class="token operator">=</span><span class="token variable">B</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token atom">mnesia</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token atom">contact</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token atom">string</span><span class="token punctuation">:</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token variable">B</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">=:=</span> <span class="token string">"April"</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token punctuation">)</span>
</code></pre>
<p>Con esto obtenemos una lista de tuplas, de aquellas entradas cuyo cumpleaños es en abril. El módulo <code>qlc</code> tiene funciones como <code>fold/3</code> o <code>sort/1</code> entre otras.</p>
<h3 id="eunit">EUnit</h3>
<p>Erlang tiene dos sistemas para realizar pruebas: <a href="https://www.erlang.org/doc/apps/eunit/users_guide.html">EUnit</a> y <a href="https://www.erlang.org/doc/apps/common_test/users_guide.html">Common Test</a>. El primero sirve para hacer pruebas unitarias sencillas y el segundo es para sistemas de pruebas más avanzadas. Para poder utilizar EUnit hay que incluir el siguiente fichero:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">include_lib</span><span class="token punctuation">(</span><span class="token string">"eunit/include/eunit.hrl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Se puede incluir dentro del módulo que queremos probar o en un fichero adicional cuyo nombre tenga la forma <code>nombre_tests.erl</code>, siendo <em>nombre</em> el del módulo que queremos probar. Dentro del módulo para pruebas tendremos una serie de funciones cuyos hombres terminen en <code>_test</code> o <code>_test_</code>, que serán usadas para la ejecución de las pruebas. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token atom">foo</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token atom">op</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">op</span><span class="token punctuation">(</span><span class="token variable">A</span><span class="token punctuation">,</span> <span class="token variable">B</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token variable">A</span> <span class="token operator">/</span> <span class="token variable">B</span><span class="token punctuation">.</span>
</code></pre>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token operator">-</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token atom">foo_tests</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token function">include_lib</span><span class="token punctuation">(</span><span class="token string">"eunit/include/eunit.hrl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">ok_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token number">2.0</span> <span class="token operator">=</span> <span class="token atom">foo</span><span class="token punctuation">:</span><span class="token function">op</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">1.5</span> <span class="token operator">=</span> <span class="token atom">foo</span><span class="token punctuation">:</span><span class="token function">op</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token function">fail_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token number">1.0</span> <span class="token operator">=</span> <span class="token atom">foo</span><span class="token punctuation">:</span><span class="token function">op</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<p>Para ejecutar las pruebas usaremos la siguiente función del módulo <a href="https://www.erlang.org/doc/man/eunit.html"><code>eunit</code></a>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">eunit:test(</mtext><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{eunit:test(} \mathit{m\acute{o}dulo} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">eunit:test(</span></span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">eunit:test(</mtext><mrow><mi>m</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>d</mi><mi>u</mi><mi>l</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mrow><mi>o</mi><mi>p</mi><mi>c</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{eunit:test(} \mathit{m\acute{o}dulo} \texttt{,} \mathit{opciones} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">eunit:test(</span></span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">dulo</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mord"><span class="mord mathit">opciones</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Donde <em>módulo</em> es el nombre del mismo y <em>opciones</em> es una lista, en la que podemos tener <code>verbose</code> para mostrar más detalle sobre las pruebas. Una vez invocada la función <code>test</code>, ejecutará las pruebas y nos mostrará un informe con los fallos encontrados. Siguiendo con el ejemplo anterior:</p>
<pre><code>1&gt; eunit:test(foo).     
foo_tests: fail_test...*failed*
**error:{badmatch,3.0}
  output:&lt;&lt;""&gt;&gt;

=======================================================
  Failed: 1.  Skipped: 0.  Passed: 1.

error
</code></pre>
<p>Existe una serie de macros para ayudar a implementar las pruebas:</p>

<table>
<thead>
<tr>
<th align="center">Macro</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>?assert(E)</code></td>
<td align="left">La expresión <code>E</code> debe valer <code>true</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertNot(E)</code></td>
<td align="left">La expresión <code>E</code> debe valer <code>false</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertMatch(P, E)</code></td>
<td align="left">La expresión <code>E</code> debe encajar en el patrón <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertNotMatch(P, E)</code></td>
<td align="left">La expresión <code>E</code> no debe encajar en el patrón <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertEqual(E1, E2)</code></td>
<td align="left">El valor de las expresiones debe ser igual.</td>
</tr>
<tr>
<td align="center"><code>?assertNotEqual(E1, E2)</code></td>
<td align="left">El valor de las expresiones no debe ser igual.</td>
</tr>
<tr>
<td align="center"><code>?assertException(C, P, E)</code></td>
<td align="left">La expresión <code>E</code> produce una excepción <code>P</code> de la clase <code>C</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertError(P, E)</code></td>
<td align="left">La expresión <code>E</code> produce un error <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertExit(P, E)</code></td>
<td align="left">La expresión <code>E</code> produce una salida <code>P</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertThrow(P, E)</code></td>
<td align="left">La expresión <code>E</code> produce una excepción <code>P</code>.</td>
</tr>
</tbody>
</table><p>También hay macros para ejecutar comandos en la terminal del sistema operativo:</p>

<table>
<thead>
<tr>
<th align="center">Macro</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>?assertCmd(C)</code></td>
<td align="left">Ejecuta el comando <code>C</code> y comprueba que su valor de salida es <code>0</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertCmdStatus(N, C)</code></td>
<td align="left">Ejecuta el comando <code>C</code> y comprueba que su valor de salida es <code>N</code>.</td>
</tr>
<tr>
<td align="center"><code>?assertCmdOutput(T, C)</code></td>
<td align="left">Ejecuta el comando <code>C</code> y comprueba que su salida es igual a <code>T</code>.</td>
</tr>
<tr>
<td align="center"><code>?cmd(C)</code></td>
<td align="left">Ejecuta el comando <code>C</code>.</td>
</tr>
</tbody>
</table><p>Además tenemos una serie de macros para la salida estándar:</p>

<table>
<thead>
<tr>
<th align="center">Macro</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>?capturedOutput</code></td>
<td align="left">Devuelve el contenido de la salida estándar.</td>
</tr>
<tr>
<td align="center"><code>?debugHere</code></td>
<td align="left">Muestra por consola el fichero y el número de línea actual.</td>
</tr>
<tr>
<td align="center"><code>?debugMsg(T)</code></td>
<td align="left">Muestra por consola una cadena de texto.</td>
</tr>
<tr>
<td align="center"><code>?debugFmt(F, Args)</code></td>
<td align="left">Muestra por consola una cadena de texto.</td>
</tr>
<tr>
<td align="center"><code>?debugVal(E)</code></td>
<td align="left">Muestra por consola un valor.</td>
</tr>
<tr>
<td align="center"><code>?debugVal(E, N)</code></td>
<td align="left">Muestra por consola un valor con una profundidad máxima de <code>N</code>.</td>
</tr>
<tr>
<td align="center"><code>?debugTime(T, E)</code></td>
<td align="left">Muestra por consola una cadena de texto <code>T</code> y el tiempo que se ha tardado en evaluar <code>E</code>, devolviendo el valor obtenido como resultado de la macro.</td>
</tr>
</tbody>
</table><p>Las funciones que terminan con <code>_test_</code> se denominan generadores de pruebas. Estas funciones han de devolver funciones o listas de funciones que serán tomadas para ejecutar la batería de pruebas. Para ello existe la macro <code>?_test(E)</code> que encapsula la expresión en una lambda. Las macros para realizar asertos, como <code>?assert(E)</code>, tienen su equivalente que empieza por guion bajo para la generación de funciones de pruebas, por ejemplo <code>?_assert(E)</code>, que equivale a <code>?_test(?assert(E))</code>. Tomando el ejemplo anterior:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token function">all_test_</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token punctuation">[</span><span class="token variable">?_assertMatch</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token atom">foo</span><span class="token punctuation">:</span><span class="token function">op</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token variable">?_assertMatch</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token atom">foo</span><span class="token punctuation">:</span><span class="token function">op</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token variable">?_assertMatch</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token atom">foo</span><span class="token punctuation">:</span><span class="token function">op</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
</code></pre>
<p>Cuyo resultado de la prueba sería:</p>
<pre><code>1&gt; eunit:test({generator, fun foo_tests:all_test_/0}).
foo_tests:13: all_test_...*failed*
**error:{assertMatch,[{module,foo_tests},
              {line,13},
              {expression,"foo : op ( 3 , 1 )"},
              {pattern,"1.0"},
              {value,3.0}]}
  output:&lt;&lt;""&gt;&gt;

=======================================================
  Failed: 1.  Skipped: 0.  Passed: 2.
error
</code></pre>
<p>Como se puede ver, podemos indicar con la tupla <code>{generator, Función}</code> la función concreta que queremos probar, si sólo queremos ejecutar una prueba en concreto.</p>
<p>Dentro de las funciones generadoras de pruebas, se puede devolver lo que Erlang denomina <em>fixture</em>, que es una tupla con una configuración para realizar pruebas un poco más complejas con las pruebas unitarias. Para ello tenemos como opciones:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">{setup,</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi><mi>d</mi><mi>e</mi></mrow><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>i</mi><mi>n</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>f</mi><mi>i</mi><mi>n</mi><mi>a</mi><mi>l</mi></mrow><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>p</mi><mi>r</mi><mi>u</mi><mi>e</mi><mi>b</mi><mi>a</mi></mrow><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char123} \texttt{setup} \texttt{,} \textcolor{red}{[} \mathit{d\acute{o}nde} \texttt{,} \textcolor{red}{]} \mathit{inicio} \texttt{,} \textcolor{red}{[} \mathit{final} \texttt{,} \textcolor{red}{]} \mathit{prueba} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">{</span></span><span class="mord text"><span class="mord texttt">setup</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nde</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">inicio</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">final</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">prueba</span></span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">{foreach,</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi><mi>d</mi><mi>e</mi></mrow><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>i</mi><mi>n</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>o</mi></mrow><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>f</mi><mi>i</mi><mi>n</mi><mi>a</mi><mi>l</mi></mrow><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>p</mi><mi>r</mi><mi>u</mi><mi>e</mi><mi>b</mi><mi>a</mi><mi>s</mi></mrow><mtext mathvariant="monospace">}</mtext></mrow><annotation encoding="application/x-tex">\texttt{\char123} \texttt{foreach} \texttt{,} \textcolor{red}{[} \mathit{d\acute{o}nde} \texttt{,} \textcolor{red}{]} \mathit{inicio} \texttt{,} \textcolor{red}{[} \mathit{final} \texttt{,} \textcolor{red}{]} \mathit{pruebas} \texttt{\char125}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">{</span></span><span class="mord text"><span class="mord texttt">foreach</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nde</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">inicio</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">final</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">pruebas</span></span><span class="mord text"><span class="mord texttt">}</span></span></span></span></span></span></span></p>
<p>El significado de cada componente es el siguiente:</p>
<ul>
<li><em>dónde</em>: Indica dónde se ha de ejecutar  las pruebas con los valores: <code>local</code>, <code>spawn</code> y <code>{spawn, Nodo}</code>.</li>
<li><em>inicio</em>: Es una función sin argumentos, para inicializar el entorno de la prueba y cuyo resultado será usado para cada prueba realizada.</li>
<li><em>final</em>: Es una función, que recibe como argumento el resultado de <em>inicio</em>, que se utiliza para hacer las operaciones de limpieza del proceso de pruebas.</li>
<li><em>prueba</em>: Es una función, que recibe como argumento el resultado de <em>inicio</em>, que devolverá la lista de funciones de pruebas a ejecutar.</li>
<li><em>pruebas</em>: Es una lista de funciones <em>prueba</em> para la configuración <code>foreach</code>. Para cada función de esta lista se ejecutará la función <em>inicio</em>, luego <em>prueba</em> y por último <em>final</em>.</li>
</ul>
<p>Se puede para la función <em>prueba</em> devolver una tupla en lugar de una lista, siguiendo las siguientes opciones:</p>
<ul>
<li><code>{spawn, Lista}</code>: Ejecuta las pruebas de la lista en un proceso aparte.</li>
<li><code>{timeout, Segundos, Lista}</code>: Ejecuta las pruebas de la lista con un tiempo máximo de ejecución.</li>
<li><code>{inorder, Lista}</code>: Ejecuta las pruebas de la lista en el orden que están.</li>
<li><code>{inparallel, Lista}</code>: Ejecuta las pruebas de la lista en paralelo si es posible.</li>
</ul>
<p>Por último, se puede añadir una cadena de texto como comentario a una configuración de pruebas devolviendo como resultado <code>{Cadena, Configuración}</code>.</p>
<h3 id="emakefile">Emakefile</h3>
<p>Podemos incluir en nuestros proyectos un fichero llamado <code>Emakefile</code>, que nos permitirá automatizar la compilación. El contenido del fichero es una secuencia de definiciones con la forma <code>{Módulos, Opciones}.</code>, donde <em>módulos</em> son átomos que indican la ubicación relativa de los módulos a compilar y las <em>opciones</em> determinan cómo se va a compilar cada módulo. Por ejemplo:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token punctuation">{</span><span class="token quoted-atom atom">'sources/*'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token atom">debug_info</span><span class="token punctuation">,</span>
               <span class="token punctuation">{</span><span class="token atom">i</span><span class="token punctuation">,</span> <span class="token string">"sources"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token punctuation">{</span><span class="token atom">i</span><span class="token punctuation">,</span> <span class="token string">"include"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token punctuation">{</span><span class="token atom">outdir</span><span class="token punctuation">,</span> <span class="token string">"ebin"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">.</span>
</code></pre>
<p>El fichero indica que nuestros módulos están en el directorio <code>sources</code> y luego una serie de opciones para la compilación. Entre las <a href="https://www.erlang.org/doc/man/compile.html">opciones de compilación</a> que existen tenemos:</p>

<table>
<thead>
<tr>
<th align="center">Opción</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>debug_info</code></td>
<td align="left">Incluye información útil para la depuración.</td>
</tr>
<tr>
<td align="center"><code>{i,Dir}</code></td>
<td align="left">Añade un directorio a la lista de búsqueda cuando se quiere incluir una cabecera con el preprocesador.</td>
</tr>
<tr>
<td align="center"><code>{outdir,Dir}</code></td>
<td align="left">Establece el directorio de salida donde se guardará el resultado de la compilación.</td>
</tr>
<tr>
<td align="center"><code>export_all</code></td>
<td align="left">Hace que todas las funciones del módulo sean exportadas y por lo tanto públicas al exterior.</td>
</tr>
<tr>
<td align="center"><code>{d,Macro}</code></td>
<td align="left">Define una macro.</td>
</tr>
<tr>
<td align="center"><code>{d,Macro,Valor}</code></td>
<td align="left">Define una macro con un valor asignado.</td>
</tr>
</tbody>
</table><p>Una vez configurado el fichero, para compilar el proyecto podemos usar el comando:</p>
<pre><code>erl -make
</code></pre>
<p>O también desde la consola de Erlang invocar a:</p>
<pre class=" language-erlang"><code class="prism  language-erlang"><span class="token atom">make</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>

    </div>
  </div>
</body>

</html>
