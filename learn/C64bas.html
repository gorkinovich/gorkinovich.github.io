<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Commodore 64: Lenguaje BASIC V2</title>
  <link rel="stylesheet" href="style.css" />
  <script type="text/javascript" src="util.js"></script>
  <script>LoadTableOfContents([{url:'C64.html',name:'Commodore 64'},{url:'C64mm.html',name:'Mapa de memoria'}]);</script>

  <meta name="author" content="Gorka Suárez García" lang="es">
  <meta name="copyright" content="© 2021-2023 Gorka Suárez García" lang="es">
  <meta name="description" content="Commodore 64: Apuntes de BASIC V2" lang="es">
  <meta name="keywords" content="C64,commodore 64,programación,videojuegos,juegos,manuales" lang="es">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@gorkinovich">
  <meta name="twitter:creator" content="@gorkinovich">
  <meta name="twitter:title" content="Commodore 64: Apuntes de BASIC V2">
  <meta name="twitter:description" content="Apuntes de programación en BASIC V2 del Commodore 64.">
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div id="TableOfContents" class="stackedit__toc">
      
<ul>
<li><a href="#commodore-64-lenguaje-basic-v2">Commodore 64: Lenguaje BASIC V2</a>
<ul>
<li><a href="#hola-mundo">Hola mundo</a></li>
<li><a href="#comentarios">Comentarios</a></li>
<li><a href="#constantes">Constantes</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#operadores">Operadores</a></li>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#usando-la-terminal">Usando la terminal</a></li>
<li><a href="#sentencias-de-control">Sentencias de control</a></li>
<li><a href="#funciones-numéricas">Funciones numéricas</a></li>
<li><a href="#funciones-de-cadenas">Funciones de cadenas</a></li>
<li><a href="#el-reloj-del-sistema">El reloj del sistema</a></li>
<li><a href="#manejo-de-datos">Manejo de datos</a></li>
<li><a href="#gestión-de-ficheros">Gestión de ficheros</a></li>
<li><a href="#gestión-del-sistema">Gestión del sistema</a></li>
<li><a href="#control-del-interprete">Control del interprete</a></li>
<li><a href="#códigos-de-escape">Códigos de escape</a></li>
<li><a href="#abreviaturas">Abreviaturas</a></li>
</ul>
</li>
<!-- <li><a href="C64.html">Commodore 64</a></li> -->
<!-- <li><a href="C64mm.html">Mapa de memoria</a></li> -->
<!-- <li><a href="index.html">Volver</a></li> -->
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="commodore-64-lenguaje-basic-v2">Commodore 64: Lenguaje BASIC V2</h1>
<h2 id="hola-mundo">Hola mundo</h2>
<p>Para empezar recurriremos al clásico Hola Mundo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token comment"><span class="token keyword">REM</span> ESTO ES UN COMENTARIO</span>
<span class="token number">20</span> <span class="token function">PRINT</span> <span class="token string">"HOLA MUNDO"</span>
</code></pre>
<p>Todo programa en BASIC está compuesto por líneas con comandos. Cada línea empieza por un número identificador, de 0 a 63999, seguido de un comando del lenguaje. Las líneas tendrán un tamaño máximo de 80 caracteres. Opcionalmente podemos usar <code>:</code> para tener varios comandos dentro de una misma línea.</p>
<p>En el ejemplo tenemos dos líneas como parte del programa. En la primera tenemos un comentario de código usando el comando <code>REM</code>. En la segunda, con el comando <code>PRINT</code>, se envía un mensaje de texto a la pantalla. Para poder ejecutar el programa usaremos el comando <code>RUN</code>.</p>
<p>El C64 nos permite ver el código del programa cargado en memoria con <code>LIST</code>.</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">LIST</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo><mo stretchy="false">[</mo></mstyle><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>r</mi><mi>a</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">-</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mover accent="true"><mi>u</mi><mo>ˊ</mo></mover><mi>l</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{LIST}\ \textcolor{red}{[[} \mathit{primera} \textcolor{red}{]} \texttt{-} \textcolor{red}{[} \mathit{última} \textcolor{red}{]]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">LIST</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[[</span><span class="mord"><span class="mord mathit">primera</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">-</span></span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">u</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">ltima</span></span><span class="mclose" style="color: red;">]]</span></span></span></span></span></span></p>

<table>
<thead>
<tr>
<th align="center">Parámetro</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><em>primera</em></td>
<td>Número de línea inicial del listado, por defecto es 0.</td>
</tr>
<tr>
<td align="center"><em>última</em></td>
<td>Número de línea final del listado, por defecto es 63999.</td>
</tr>
</tbody>
</table><p>Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic">LIST <span class="token number">10</span>     <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> Lista la línea 10 del programa.</span>
LIST <span class="token number">-10</span>    <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> Lista hasta la línea 10 del programa.</span>
LIST <span class="token number">10</span><span class="token operator">-</span>    <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> Lista desde la línea 10 del programa.</span>
LIST <span class="token number">10</span><span class="token number">-100</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> Lista desde la línea 10 hasta a la 100.</span>
</code></pre>
<h2 id="comentarios">Comentarios</h2>
<p>Con el comando <code>REM</code> podemos comentar el código para documentarlo, pero estos comentarios ocupan espacio en la memoria de programa. Este comando ignora el uso de <code>:</code> para añadir varios comandos en la misma línea, ya que será ignorado todo lo que venga después de <code>REM</code> en la línea.</p>
<h2 id="constantes">Constantes</h2>
<p>BASIC tiene tres tipos de datos: <strong>números enteros</strong>, <strong>números flotantes</strong> y <strong>cadenas de texto</strong>. Los tres los podemos expresar como valores literales de la siguiente manera:</p>
<ul>
<li><strong>Enteros:</strong> Números de 16 bits con signo (2 bytes). Desde <code>-32768</code> hasta <code>+32767</code>, usando <a href="https://es.wikipedia.org/wiki/Complemento_a_dos">complemento a dos</a>, usando la siguiente sintaxis:</li>
</ul>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">+</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">-</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow></mrow><annotation encoding="application/x-tex">\textcolor{red}{[}\texttt{+}\textcolor{red}{|}\texttt{-}\textcolor{red}{]} \mathit{d\acute{\imath}gitos}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">+</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">-</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span></span></span></span></span></span></p>
<ul>
<li><strong>Flotantes:</strong> Números flotantes de 40 bits (5 bytes). El exponente puede tener un valor desde <code>-39</code> hasta <code>+38</code>. Usan la siguiente sintaxis:</li>
</ul>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">+</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">-</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">.</mtext><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">E</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">+</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">-</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mrow><mi>d</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>g</mi><mi>i</mi><mi>t</mi><mi>o</mi><mi>s</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\textcolor{red}{[}\texttt{+}\textcolor{red}{|}\texttt{-}\textcolor{red}{]} \mathit{d\acute{\imath}gitos}\textcolor{red}{[}\texttt{.}\mathit{d\acute{\imath}gitos}\textcolor{red}{]} \textcolor{red}{[}\texttt{E}\textcolor{red}{[}\texttt{+}\textcolor{red}{|}\texttt{-}\textcolor{red}{]} \mathit{d\acute{\imath}gitos}\textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">+</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">-</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">.</span></span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span><span class="mclose" style="color: red;">]</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">E</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">+</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">-</span></span><span class="mclose" style="color: red;">]</span><span class="mord"><span class="mord mathit">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">gitos</span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<ul>
<li><strong>Cadenas:</strong> Cualquier texto que empieza y termina por dobles comillas (<code>"</code>).</li>
</ul>
<p>Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token function">PRINT</span> <span class="token string">"CADENA DE TEXTO"</span>     <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> CADENA DE TEXTO</span>
<span class="token number">20</span> <span class="token function">PRINT</span> <span class="token string">"POSITIVO:"</span>  <span class="token number">1234</span>     <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> POSITIVO: 1234     </span>
<span class="token number">30</span> <span class="token function">PRINT</span> <span class="token string">"NEGATIVO:"</span> <span class="token number">-4321</span>     <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> NEGATIVO:-4321</span>
<span class="token number">40</span> <span class="token function">PRINT</span> <span class="token string">"FLOTANTE:"</span> <span class="token number">6.543E-21</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> FLOTANTE: 6.543E-21</span>
</code></pre>
<p>El único carácter que no puede contener un literal de cadena de texto son las dobles comillas, sin embargo usando la función <code>CHR$(34)</code> podemos obtener una cadena de texto que contenga dobles comillas:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token function">PRINT</span> <span class="token function">CHR$</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">)</span> <span class="token string">"AMIGA"</span> <span class="token function">CHR$</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> </span><span class="token string">"AMIGA"</span>
</code></pre>
<p>Por último, la constante <strong>pi</strong> está representada por la letra griega <code>π</code>, que se escribe con las teclas <code>MAYÚS</code>+<code>AvPág</code> en VICE y con <code>MAYÚS</code>+<code>SUPR</code> en CCS64.</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token function">PRINT</span> π <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 3.14159265</span>
</code></pre>
<h2 id="variables">Variables</h2>
<p>Las variables nos permiten guardar valores con un nombre identificador, para poder recuperarlos y/o modificarlos más tarde. Un nombre identificador es una secuencia compuesta por letras (<code>A-Z</code>) y dígitos (<code>0-9</code>), que debe empezar siempre por una letra. Los tipos de variables que existen son:</p>
<ul>
<li><strong>Flotantes:</strong> Almacenan números de coma flotante. Es el tipo por defecto de las variables, simplemente hay que definir un nombre identificador. Por ejemplo: <code>X</code>, <code>Y</code>, <code>Z</code>, etc.</li>
<li><strong>Enteras:</strong> Almacenan números enteros. Este tipo se asigna terminando el nombre identificador con el símbolo <code>%</code>. Por ejemplo: <code>I%</code>, <code>J%</code>, <code>K%</code>, etc.</li>
<li><strong>Cadenas:</strong> Almacenan cadenas de texto. Este tipo se asigna terminando el nombre identificador con el símbolo <code>$</code>. Por ejemplo: <code>N$</code>, <code>M$</code>, <code>S$</code>, etc.</li>
</ul>
<p>Podemos asignar un valor a una variable con el operador <code>=</code>:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> U  <span class="token operator">=</span> <span class="token number">1.234</span>
<span class="token number">20</span> V% <span class="token operator">=</span> <span class="token number">12345</span>
<span class="token number">30</span> W$ <span class="token operator">=</span> <span class="token string">"ABC"</span>
</code></pre>
<p>El tamaño de un nombre identificador puede ser tan largo como una línea, pero el intérprete de BASIC sólo tiene en cuenta las dos primeras letras y su tipo. Es decir:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> RAX  <span class="token operator">=</span> <span class="token number">10</span>
<span class="token number">20</span> RAY  <span class="token operator">=</span> <span class="token number">20</span>
<span class="token number">30</span> RAZ% <span class="token operator">=</span> <span class="token number">30</span>
<span class="token number">40</span> <span class="token function">PRINT</span> RAX  <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 20</span>
<span class="token number">50</span> <span class="token function">PRINT</span> RAZ% <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 30</span>
</code></pre>
<p>No podemos utilizar como nombres identificadores los que ya están asignados para los comandos de BASIC, así como sus abreviaciones, a las que llamaremos palabras reservadas del lenguaje.</p>
<h2 id="operadores">Operadores</h2>
<p>El lenguaje dispone de diferentes operaciones para poder trabajar con los valores. A la hora de aplicar un operador, este tiene un nivel de prioridad que veremos al final de la sección. La primera categoría de operadores son los aritméticos:</p>

<table>
<thead>
<tr>
<th align="center">Símbolo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>+</code></td>
<td>Suma / Prefijo positivo</td>
</tr>
<tr>
<td align="center"><code>-</code></td>
<td>Resta / Prefijo negativo</td>
</tr>
<tr>
<td align="center"><code>*</code></td>
<td>Multiplicación</td>
</tr>
<tr>
<td align="center"><code>/</code></td>
<td>División</td>
</tr>
<tr>
<td align="center"><code>↑</code></td>
<td>Exponenciación</td>
</tr>
</tbody>
</table><p>El símbolo <code>↑</code> se escribe con la tecla <code>AvPág</code> en VICE y con <code>SUPR</code> en CCS64. Al editar programas en BASIC en el CBM prg Studio usaremos el carácter <code>^</code> para la exponenciación. Estas operaciones aritméticas se pueden utilizar con números enteros y reales. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> A <span class="token operator">=</span> <span class="token number">3</span> <span class="token punctuation">:</span> B <span class="token operator">=</span> <span class="token number">2</span>
<span class="token number">20</span> <span class="token function">PRINT</span> A <span class="token operator">+</span> <span class="token operator">-</span>B      <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 1</span>
<span class="token number">30</span> <span class="token function">PRINT</span> A <span class="token operator">-</span> B       <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 1</span>
<span class="token number">40</span> <span class="token function">PRINT</span> A <span class="token operator">*</span> B       <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 6</span>
<span class="token number">50</span> <span class="token function">PRINT</span> A <span class="token operator">/</span> B       <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 1.5</span>
<span class="token number">60</span> <span class="token function">PRINT</span> A ↑ B       <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 9</span>
<span class="token number">70</span> <span class="token function">PRINT</span> A <span class="token operator">+</span> B <span class="token operator">/</span> <span class="token number">2</span>   <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 4</span>
<span class="token number">80</span> <span class="token function">PRINT</span> <span class="token punctuation">(</span>A <span class="token operator">+</span> B<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 2.5</span>
</code></pre>
<p>Nótese que con los paréntesis podemos alterar el orden de aplicación de los operadores, porque los paréntesis también son operadores en sí mismos.</p>
<p>El siguiente grupo de operadores son los de comparación:</p>

<table>
<thead>
<tr>
<th align="center">Símbolo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>&lt;</code></td>
<td>Menor</td>
</tr>
<tr>
<td align="center"><code>&lt;=</code></td>
<td>Menor o igual</td>
</tr>
<tr>
<td align="center"><code>=</code></td>
<td>Igual</td>
</tr>
<tr>
<td align="center"><code>&gt;=</code></td>
<td>Mayor o igual</td>
</tr>
<tr>
<td align="center"><code>&gt;</code></td>
<td>Mayor</td>
</tr>
<tr>
<td align="center"><code>&lt;&gt;</code></td>
<td>Distinto</td>
</tr>
</tbody>
</table><p>Podemos usar estos operadores con cualquier valor, para determinar qué orden tienen entre sí. Vemos que el símbolo <code>=</code> es usado por los operadores de igualdad y de asignación, pero sólo hay dos situaciones donde se usa la asignación:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> A <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">20</span> <span class="token function">LET</span> B <span class="token operator">=</span> <span class="token number">2</span>
<span class="token number">30</span> <span class="token function">PRINT</span> A <span class="token operator">=</span> B
</code></pre>
<p>Hemos dicho dos situaciones, pero en realidad es sólo una. En la línea <code>20</code> usamos el comando <code>LET</code>, que nos permite asignar a una variable (situada a la izquierda del <code>=</code>) un valor obtenido con una expresión (situada a la derecha del <code>=</code>). En la línea <code>10</code> en realidad estamos también usando el comando <code>LET</code>, pero podemos prescindir de la palabra clave <code>LET</code> para asignar un valor a una variable.</p>
<p>El siguiente grupo de operadores son los lógicos:</p>

<table>
<thead>
<tr>
<th align="center">Símbolo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>NOT</code></td>
<td>Negación</td>
</tr>
<tr>
<td align="center"><code>AND</code></td>
<td>Conjunción</td>
</tr>
<tr>
<td align="center"><code>OR</code></td>
<td>Disyunción</td>
</tr>
</tbody>
</table><p>Antes de continuar, necesitamos una pequeña explicación teórica:</p>
<blockquote>
<p>Los operadores de comparación, junto a los operadores lógicos, permiten crear <strong>expresiones booleanas</strong> que representan condiciones dentro de los programas, para poder tomar decisiones durante la ejecución. El resultado de una expresión booleana es un <strong>valor booleano</strong>, pero al no existir este tipo de dato en BASIC se utilizan los números enteros, usando <code>0</code> para indicar que la condición es <strong>falsa</strong> y cualquier otro valor entero para indicar que es <strong>verdadera</strong> (por ejemplo, cuando una comparación es verdadera se obtiene como resultado el <code>-1</code>).</p>
</blockquote>
<p>Para entender mejor los operadores lógicos vamos a ver sus <em>tablas de verdad</em>:</p>

<table>
<thead>
<tr>
<th align="center"><code>A</code></th>
<th align="center"><code>B</code></th>
<th align="center"><code>NOT A</code></th>
<th align="center"><code>NOT B</code></th>
<th align="center"><code>A AND B</code></th>
<th align="center"><code>A OR B</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">V</td>
<td align="center">V</td>
<td align="center">F</td>
<td align="center">F</td>
<td align="center">V</td>
<td align="center">V</td>
</tr>
<tr>
<td align="center">F</td>
<td align="center">V</td>
<td align="center">V</td>
<td align="center">F</td>
<td align="center">F</td>
<td align="center">V</td>
</tr>
<tr>
<td align="center">V</td>
<td align="center">F</td>
<td align="center">F</td>
<td align="center">V</td>
<td align="center">F</td>
<td align="center">V</td>
</tr>
<tr>
<td align="center">F</td>
<td align="center">F</td>
<td align="center">V</td>
<td align="center">V</td>
<td align="center">F</td>
<td align="center">F</td>
</tr>
</tbody>
</table><p>Estos operadores lógicos funcionan a <a href="https://es.wikipedia.org/wiki/Operador_a_nivel_de_bits">nivel de bits</a>, es decir, se aplican a cada bit de los 16 que hay en un número entero de BASIC. Por lo tanto, si hacemos <code>2 OR 1</code> el resultado será <code>3</code>. Si intentamos usar un número real, con un operador lógico, el valor será transformado a un valor entero, para poder operar con él.</p>
<p>Finalmente, tenemos el grupo de operadores para manejar cadenas, que está compuesto únicamente por la concatenación, que utiliza el símbolo <code>+</code>. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> A$ <span class="token operator">=</span> <span class="token string">"HOLA"</span>
<span class="token number">20</span> B$ <span class="token operator">=</span> <span class="token string">" MUNDO"</span>
<span class="token number">30</span> <span class="token function">PRINT</span> A$ <span class="token operator">+</span> B$ <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> HOLA MUNDO</span>
</code></pre>
<p>Por último, vamos a ver la prioridad de cada operador a la hora de ser aplicados en una expresión:</p>

<table>
<thead>
<tr>
<th align="center">Nivel</th>
<th align="center">Operadores</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td align="center"><code>↑</code></td>
<td>Exponenciación</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>+</code><br><code>-</code></td>
<td>Prefijos</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>*</code><br><code>/</code></td>
<td>Multiplicación<br>División</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>+</code><br><code>-</code></td>
<td>Suma/Concatenación<br>Resta</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>&lt;</code><br><code>&lt;=</code><br><code>=</code><br><code>&gt;=</code><br><code>&gt;</code><br><code>&lt;&gt;</code></td>
<td>Comparación</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>NOT</code></td>
<td>Negación</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>AND</code></td>
<td>Conjunción</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>OR</code></td>
<td>Disyunción</td>
</tr>
</tbody>
</table><h2 id="arrays">Arrays</h2>
<p>Los arrays son “tablas” de una o más dimensiones donde cada celda contiene un valor. En BASIC se utilizan los paréntesis, a la derecha de un nombre de variable con su tipo, para asignar o acceder a los valores que hay dentro. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> A$<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"HOLA"</span>
<span class="token number">20</span> A$<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"MUNDO"</span>
<span class="token number">30</span> <span class="token function">PRINT</span> A$<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token string">" "</span> A$<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> HOLA MUNDO</span>
</code></pre>
<p>Los arrays hay que definir su número de dimensiones y el tamaño de las mismas, ya que de no hacerlo se asignará por defecto un tamaño de 1 dimensión de 10 posiciones (índices del 0 al 9) la primera vez que utilicemos dicho array en el programa. Una vez dimensionado el array, no se podrá redimensionar su tamaño, porque nos saltaría un error de ejecución. Para definir el tamaño se utiliza el comando <code>DIM</code>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">DIM</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext mathvariant="monospace">(</mtext><msub><mi>n</mi><mn mathvariant="italic">1</mn></msub><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><msub><mi>n</mi><mn mathvariant="italic">2</mn></msub><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{DIM}\ \mathit{variable} \texttt{(} \mathit{n_1} \textcolor{red}{[} \texttt{,}\ \mathit{n_2} \textcolor{red}{[} \texttt{,}\ \textcolor{red}{\dots]]} \texttt{)} \textcolor{red}{[} \texttt{,}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">DIM</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]]</span><span class="mord text"><span class="mord texttt">)</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Con este comando podemos definir el tamaño de varios arrays, separado por comas. Un array puede tener hasta 255 dimensiones y el rango máximo disponible para cada índice es del 0 al 32767. Con <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> definimos que la primera dimensión tiene tamaño <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>+1, es decir, que el índice de esta dimensión tiene como rango del 0 al <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>. Con <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> definimos la segunda dimensión y así sucesivamente. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> L<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10</span>  <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> TAM=10  L(0..9)     </span>
<span class="token number">20</span> <span class="token keyword">DIM</span> V<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>   <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> TAM=4   V(0..3)</span>
<span class="token number">30</span> <span class="token keyword">DIM</span> M<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> TAM=4X4 M(0..3,0..3)</span>
</code></pre>
<p>El interprete de BASIC trata como si fueran variables de programa distintas aquellas que son arrays, de las que no lo son, aunque compartan el mismo nombre, es decir, <code>A</code> y <code>A(0)</code> son variables diferentes dentro del programa. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> A<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">20</span> A <span class="token operator">=</span> <span class="token number">2</span>
<span class="token number">30</span> <span class="token function">PRINT</span> A<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 1</span>
<span class="token number">40</span> <span class="token function">PRINT</span> A    <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> 2</span>
</code></pre>
<p>Podemos utilizar los arrays como parte de expresiones complejas junto a operadores y funciones del lenguaje.</p>
<h2 id="usando-la-terminal">Usando la terminal</h2>
<p>Definimos la terminal o consola como aquel dispositivo que utilizamos para interactuar con un computador. Normalmente está compuesto por una pantalla y un teclado. Cuando iniciamos el C64 veremos que nos muestra información sobre la máquina, el lenguaje y la memoria del sistema, para luego ver que hay un cuadrado parpadeando que nos indica la posición actual del cursor. Si pulsamos la tecla <code>A</code>, veremos que en efecto aparece en la pantalla la letra <code>A</code>. Esto es así porque al arrancar el C64 se ejecuta el programa que permite usar la máquina como una terminal de programación en BASIC. En esta sección veremos cómo usar la terminal con programas BASIC.</p>
<p>En el C64 hay dos modos de fuente que usa la terminal de base. En el modo mayúsculas sólo tenemos las letras mayúsculas y en el modo minúsculas tendremos minúsculas al escribir y con la tecla <code>SHIFT</code> (<code>MAYUS</code> en VICE) podemos usar las letras mayúsculas. Para alternar entre los dos tipos se utiliza la combinación <code>SHIFT</code>+<code>C=</code> (<code>MAYUS</code>+<code>TAB</code> en VICE). En la siguiente imagen se ven las diferencias entre las dos fuentes:</p>
<p align="center"><img src="https://gorkinovich.github.io/learn/C64-Fonts.png" alt="Fuentes del C64"></p>
<p>Aunque ya lo hemos usado en varios de los ejemplos, para mostrar un mensaje por pantalla utilizamos el comando <code>PRINT</code>, que tiene la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">PRINT</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo><mtext>&nbsp;</mtext><mo stretchy="false">[</mo><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">;</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{PRINT}\ \textcolor{red}{[} \mathit{expresión} \textcolor{red}{]\ [[} \texttt{;} \textcolor{red}{|} \texttt{,} \textcolor{red}{]}\ \mathit{expresión}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">PRINT</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mclose" style="color: red;">]</span><span class="mspace" style="color: red;"><span style="color: red;">&nbsp;</span></span><span class="mopen" style="color: red;">[[</span><span class="mord text"><span class="mord texttt">;</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Una <em>expresión</em> es cualquier combinación de constantes, variables, operadores y funciones, que generan como resultado un valor que el comando usará para mostrarlo en la terminal. Por lo tanto, el resultado de una expresión será un número entero, un número flotante o una cadena de texto. Para separar las expresiones podemos usar <code>;</code>, sin que añada espacios en blanco, pero con <code>,</code> añadirá una tabulación entre un valor y el siguiente por pantalla. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token function">PRINT</span> <span class="token string">"A"</span><span class="token punctuation">;</span><span class="token string">"B"</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> AB</span>
<span class="token number">20</span> <span class="token function">PRINT</span> <span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> A         B</span>
</code></pre>
<p>El tabulado usa columnas de 10 caracteres de tamaño, por eso en la línea <code>20</code> la letra <code>B</code> se muestra en la columna 10, en lugar de la columna 1 como ocurre con la línea <code>10</code>. En algunos ejemplos previos, hemos visto que no era necesario usar <code>;</code> para separar algunas expresiones, sobre todo trabajando con cadenas, pero en caso de duda es mejor usar <code>;</code> y hacer más claro el código. Si usamos el <code>;</code> al final del comando <code>PRINT</code>, el cursor del terminal no realizará el salto de línea que habitualmente se hace al finalizar el comando. Otro comportamiento peculiar, que hay que tener en cuenta, es al mostrar un número se añadirá un espacio en blanco al inicio y al final del número:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token function">PRINT</span> <span class="token string">"("</span><span class="token punctuation">;</span><span class="token string">"ABC"</span><span class="token punctuation">;</span><span class="token string">")"</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> (ABC)</span>
<span class="token number">20</span> <span class="token function">PRINT</span> <span class="token string">"("</span><span class="token punctuation">;</span><span class="token number">12345</span><span class="token punctuation">;</span><span class="token string">")"</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> ( 12345 )</span>
<span class="token number">30</span> <span class="token function">PRINT</span> <span class="token string">"("</span><span class="token punctuation">;</span><span class="token number">1.234</span><span class="token punctuation">;</span><span class="token string">")"</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> ( 1.234 )</span>
</code></pre>
<p>El comando <code>PRINT</code> sin nada se limita a dar un salto de línea con el cursor de la terminal.</p>
<p>Con el comando <code>INPUT</code> podemos introducir valores con el teclado, para obtener números y cadenas de texto. Para ello usamos la siguiente sintaxis:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">INPUT</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>c</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>a</mi></mrow><mtext mathvariant="monospace">;</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{INPUT}\ \textcolor{red}{[} \mathit{cadena}\texttt{;} \textcolor{red}{]}\ \mathit{variable} \textcolor{red}{[} \texttt{,}\ \mathit{variable}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">INPUT</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">cadena</span></span><span class="mord text"><span class="mord texttt">;</span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Con el parámetro opcional <em>cadena</em> podemos mostrar un mensaje inicial antes de introducir los valores. Tanto si usamos un mensaje inicial, como si no, lo siguiente que hace el comando es añadir a la terminal el carácter <code>?</code> y un espacio en blanco, para luego mostrar el cursor parpadeando, señal de que podemos introducir información. Los parámetros <em>variable</em> estarán separados por comas y dependiendo de su tipo habrá que meter un tipo de valor u otro por parte del usuario. Sólo al pulsar <code>RETURN</code> (<code>ENTER</code> en VICE) se procesa lo que hayamos escrito, para convertirlo a un valor que pueda ser almacenado en la variable. Si intentamos meter un valor de un tipo, en una variable de otro tipo, se producirá un error y se parará la ejecución. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token keyword">INPUT</span> A$<span class="token punctuation">,</span>A%<span class="token punctuation">,</span>A
<span class="token number">20</span> <span class="token function">PRINT</span> <span class="token string">"TEXTO:  "</span><span class="token punctuation">;</span>A$
<span class="token number">30</span> <span class="token function">PRINT</span> <span class="token string">"ENTERO:"</span><span class="token punctuation">;</span>A%
<span class="token number">40</span> <span class="token function">PRINT</span> <span class="token string">"REAL:  "</span><span class="token punctuation">;</span>A
</code></pre>
<p>El siguiente método de entrada es el comando <code>GET</code>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">GET</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{GET}\ \mathit{variable} \textcolor{red}{[} \texttt{,}\ \mathit{variable}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">GET</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Este comando nos permite obtener caracteres del buffer de entrada que maneja la terminal, que tiene un tamaño de 10 caracteres (es decir, 10 bytes). El comando no bloquea la ejecución con su uso, por lo que si el buffer de entrada está vacío se le asignará el valor nulo por defecto a las variables (<code>""</code> para las cadenas y <code>0</code> para los números). Aunque podemos usar variables numéricas, es mejor usar variables de cadena de texto, para ir obteniendo el primer carácter del buffer de entrada, ya que con las numéricas recibiremos un error si pulsamos cualquier tecla que no sea un dígito o un carácter con el que se pueda escribir un número. Con este comando podemos hacer más dinámico el uso del teclado desde BASIC.</p>
<p>Por último, vamos a cubrir las funciones relacionadas con la entrada y salida de la terminal. La función <code>POS</code> nos devuelve la columna actual del cursor (desde <code>0</code> hasta <code>79</code>):</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">POS(</mtext><mrow><mi>b</mi><mi>a</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>a</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{POS(} \mathit{basura} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">POS(</span></span><span class="mord"><span class="mord mathit">basura</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Una limitación que tiene el interprete de BASIC es que no se puede definir en el lenguaje funciones sin parámetros, por ello <code>POS</code> tiene el parámetro <em>basura</em> que da igual el valor que le pasemos, porque no se va a utilizar. Por motivos de eficiencia, relacionados con la implementación del interprete, lo más óptimo es pasarle el literal pi (<code>π</code>).</p>
<p>Las funciones <code>SPC</code> y <code>TAB</code> las podemos usar con el comando <code>PRINT</code>. La primera añade espacios en blanco y la segunda define el ancho de columna para tabular:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">SPC(</mtext><mrow><mi>n</mi><mover accent="true"><mi>u</mi><mo>ˊ</mo></mover><mi>m</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{SPC(} \mathit{número} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">SPC(</span></span><span class="mord"><span class="mord mathit">n</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">u</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">mero</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">TAB(</mtext><mrow><mi>n</mi><mover accent="true"><mi>u</mi><mo>ˊ</mo></mover><mi>m</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{TAB(} \mathit{número} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">TAB(</span></span><span class="mord"><span class="mord mathit">n</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">u</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">mero</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Con el parámetro <em>número</em> indicamos el número de espacios que queremos añadir en <code>SPC</code> y el ancho de columna en <code>TAB</code>. Este número ha de ser un entero del <code>0</code> al <code>255</code>, de lo contrario se lanzará un error de ejecución. Hay una diferencia importante entre usar <code>TAB</code> y <code>,</code> dentro de <code>PRINT</code>. Si el valor previo excede el ancho de columna, la función <code>TAB</code> no añadirá más espacios, pero con <code>,</code> moverá el siguiente valor a la siguiente columna de tabulación.</p>
<h2 id="sentencias-de-control">Sentencias de control</h2>
<p>Después de ver diferentes aspectos básicos del lenguaje, vamos a explicar cómo controlar la ejecución del programa. Lo primero que debemos aprender es la sentencia condicional:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">IF</mtext><mtext>&nbsp;</mtext><mrow><mi>c</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">THEN</mtext><mtext>&nbsp;</mtext><mrow><mi>c</mi><mi>o</mi><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>o</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">:</mtext><mtext>&nbsp;</mtext><mrow><mi>c</mi><mi>o</mi><mi>m</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>o</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{IF}\ \mathit{condición}\ \texttt{THEN}\ \mathit{comando}\ \textcolor{red}{[} \texttt{:}\ \mathit{comando}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">IF</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">condici</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">THEN</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">comando</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">:</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">comando</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>El comando <code>IF</code> nos permite ejecutar una serie de comandos si la <em>condición</em> es cierta. Las condiciones son expresiones booleanas, que vimos antes en la sección de los operadores. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token keyword">INPUT</span> <span class="token string">"DAME UN NUMERO"</span><span class="token punctuation">;</span>N
<span class="token number">20</span> <span class="token keyword">IF</span> N<span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">THEN</span> <span class="token function">PRINT</span> <span class="token string">"CERO"</span>
<span class="token number">30</span> <span class="token keyword">IF</span> N<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token keyword">THEN</span> <span class="token function">PRINT</span> <span class="token string">"POSITIVO"</span>
<span class="token number">40</span> <span class="token keyword">IF</span> N<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">THEN</span> <span class="token function">PRINT</span> <span class="token string">"NEGATIVO"</span>
</code></pre>
<p>Ahora que podemos tomar decisiones, vamos a aprender las sentencias de salto. La primera de ellas es el salto incondicional con <code>GOTO</code>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">GOTO</mtext><mtext>&nbsp;</mtext><mrow><mi>l</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>n</mi><mi>e</mi><mi>a</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{GOTO}\ \mathit{l\acute{\imath}nea}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">GOTO</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">l</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nea</span></span></span></span></span></span></span></p>
<p>Con este comando podemos enviar la ejecución actual a otra línea del programa. Luego tenemos la llamada a una subrutina con <code>GOSUB</code></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">GOSUB</mtext><mtext>&nbsp;</mtext><mrow><mi>l</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>n</mi><mi>e</mi><mi>a</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{GOSUB}\ \mathit{l\acute{\imath}nea}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">GOSUB</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">l</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nea</span></span></span></span></span></span></span></p>
<p>Es similar a la anterior, pero la diferencia es que cuando encuentre una línea con el comando <code>RETURN</code>, volverá la posición de la ejecución a la línea del <code>GOSUB</code> que ha invocado la subrutina. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token keyword">GOSUB</span> <span class="token number">30</span>
<span class="token number">20</span> <span class="token keyword">GOTO</span> <span class="token number">10</span>
<span class="token number">30</span> <span class="token function">PRINT</span> <span class="token string">"PULSA STOP/ESCAPE"</span>
<span class="token number">40</span> <span class="token keyword">RETURN</span>
</code></pre>
<p>El ejemplo llama primero con <code>GOSUB</code> a una subrutina ubicada en la línea <code>30</code>. La subrutina nos muestra un mensaje por pantalla y vuelve al punto de ejecución anterior con <code>RETURN</code>. Después con <code>GOTO</code> se realiza un bucle infinito. Pulsando la tecla <code>RUN/STOP</code> (<code>ESCAPE</code> en VICE) paramos la ejecución del interprete de BASIC y por ello logramos salir del bucle a lo bruto.</p>
<p>Ahora que conocemos los comandos de salto, vamos a ver una variante del comando <code>IF</code>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">IF</mtext><mtext>&nbsp;</mtext><mrow><mi>c</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">{</mo></mstyle><mtext mathvariant="monospace">THEN</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">GOTO</mtext><mstyle mathcolor="red"><mo stretchy="false">}</mo></mstyle><mtext>&nbsp;</mtext><mrow><mi>l</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>n</mi><mi>e</mi><mi>a</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{IF}\ \mathit{condición}\ \textcolor{red}{ \{ }\texttt{THEN}\textcolor{red}{|}\texttt{GOTO}\textcolor{red}{ \} }\ \mathit{l\acute{\imath}nea}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">IF</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">condici</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">{</span><span class="mord text"><span class="mord texttt">THEN</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">GOTO</span></span><span class="mclose" style="color: red;">}</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">l</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nea</span></span></span></span></span></span></span></p>
<p>Con este comando aplicaremos un salto directo si se cumple la condición. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token function">PRINT</span> <span class="token string">"PULSA UNA TECLA"</span>
<span class="token number">20</span> <span class="token keyword">GET</span> K$
<span class="token number">30</span> <span class="token keyword">IF</span> K$<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">THEN</span> <span class="token number">20</span>
<span class="token number">40</span> <span class="token function">PRINT</span> <span class="token string">"PULSASTE: "</span><span class="token punctuation">;</span>K$
<span class="token number">50</span> <span class="token keyword">IF</span> K$<span class="token operator">&lt;&gt;</span><span class="token function">CHR$</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token keyword">THEN</span> <span class="token number">20</span>
</code></pre>
<p>Este ejemplo ya tenemos bucles condicionales. En la línea <code>30</code> si no se ha capturado nada con <code>GET</code> volvemos a repetir el comando. Después de pulsar y capturar una tecla pulsada, mostramos cuál ha sido y en la línea <code>50</code> volveremos a dar la vuelta si no se ha pulsado la tecla <code>RETURN</code> (<code>ENTER</code> en VICE).</p>
<p>Los dos siguientes comandos sirven para realizar bucles con un número fijo de iteraciones:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">FOR</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>i</mi><mi>n</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>o</mi></mrow><mtext>&nbsp;</mtext><mtext mathvariant="monospace">TO</mtext><mtext>&nbsp;</mtext><mrow><mi>f</mi><mi>i</mi><mi>n</mi><mi>a</mi><mi>l</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">STEP</mtext><mtext>&nbsp;</mtext><mrow><mi>i</mi><mi>n</mi><mi>c</mi><mi>r</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{FOR}\ \mathit{variable}\texttt{=}\mathit{inicio}\ \texttt{TO}\ \mathit{final}\ \textcolor{red}{[} \texttt{STEP}\ \mathit{incremento} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">FOR</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">inicio</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">TO</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">final</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">STEP</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">incremento</span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">NEXT</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{NEXT}\ \textcolor{red}{[} \mathit{variable} \textcolor{red}{[} \texttt{,}\ \mathit{variable}\ \textcolor{red}{\dots]]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">NEXT</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]]</span></span></span></span></span></span></p>
<p>El comando <code>FOR</code> inicia el bucle y <code>NEXT</code> lo cierra, permitiendo que en cada vuelta la <em>variable</em> (que sólo puede ser de tipo flotante por limitaciones de la implementación del interprete) vaya tomando valores numéricos desde <em>inicio</em> hasta <em>final</em>. Lo común es ir incrementando en una unidad la <em>variable</em>, pero con <code>STEP</code> podemos indicar en <em>incremento</em> un valor alternativo a <code>+1</code>, incluso poner valores negativos para realizar recorridos hacia atrás. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span>  <span class="token function">PRINT</span> <span class="token function">CHR$</span><span class="token punctuation">(</span><span class="token number">147</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> LIMPIAR PANTALLA</span>
<span class="token number">20</span>  <span class="token keyword">FOR</span> I<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">TO</span> <span class="token number">5</span>         <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> POTENCIAS DE 2</span>
<span class="token number">30</span>  <span class="token function">PRINT</span> I<span class="token punctuation">,</span><span class="token number">2</span>↑I          <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> PINTAR DATOS</span>
<span class="token number">40</span>  <span class="token keyword">NEXT</span> I               <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> SIGUIENTE ITERACIÓN</span>
<span class="token number">50</span>  <span class="token function">PRINT</span>                <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> SALTO DE LINEA</span>
<span class="token number">60</span>  <span class="token keyword">FOR</span> I<span class="token operator">=</span><span class="token number">5</span> <span class="token keyword">TO</span> <span class="token number">1</span> <span class="token keyword">STEP</span> <span class="token number">-1</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> LISTA DE NUMEROS</span>
<span class="token number">70</span>  <span class="token function">PRINT</span> I<span class="token punctuation">,</span><span class="token number">6</span><span class="token operator">-</span>I          <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> PINTAR DATOS</span>
<span class="token number">80</span>  <span class="token keyword">NEXT</span> I               <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> SIGUIENTE ITERACIÓN</span>
<span class="token number">90</span>  <span class="token function">PRINT</span>                <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> SALTO DE LINEA</span>
<span class="token number">100</span> <span class="token keyword">FOR</span> I<span class="token operator">=</span><span class="token number">2</span> <span class="token keyword">TO</span> <span class="token number">10</span> <span class="token keyword">STEP</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> PARES E IMPARES</span>
<span class="token number">110</span> <span class="token function">PRINT</span> I<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>I          <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> PINTAR DATOS</span>
<span class="token number">120</span> <span class="token keyword">NEXT</span> I               <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> SIGUIENTE ITERACIÓN</span>
</code></pre>
<p>Este programa nos muestra secuencias numéricas en orden ascendente la primera, en orden descendente la segunda y en un orden ascendente con saltos en la tercera. Recordemos que <code>↑</code> en el CBM prg Studio sería con <code>^</code>. Este tipo de bucles son útiles cuando sabemos de antemano el número de vueltas o iteraciones que tenemos que dar. Un buen ejemplo para su uso es al trabajar con arrays, donde sabemos previamente cuál es su tamaño.</p>
<p>Podemos salir de un bucle <code>FOR</code> antes de su finalización con <code>GOTO</code>, pero esto provoca que no se borre de la pila de programa la información que utilizan los comandos <code>FOR</code> y <code>NEXT</code>, es decir, que si  se sale el suficiente número de veces de un bucle <code>FOR</code> sin terminarlo se terminará lanzando un error de memoria agotada. Hay una serie de situaciones donde se borra la información de estos bucles en la pila de programa:</p>
<ul>
<li>Al terminar un bucle <code>FOR</code> completando su recorrido.</li>
<li>Al encontrar un <code>NEXT</code> con una variable, se borra la información de los bucles internos.</li>
<li>Al ejecutar el <code>RETURN</code> de una subrutina, se borra la información en la pila de aquellos bucles <code>FOR</code> en su interior.</li>
<li>Al encontrar un bucle <code>FOR</code>que utilice la misma variable que uno anterior sin terminar.</li>
</ul>
<p>Una solución, si nos preocupa este problema es añadir este código después del bucle que nos pueda dar problemas:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token keyword">FOR</span> I<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">TO</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token keyword">NEXT</span> I
</code></pre>
<p>Podemos anidar unos nueve bucles <code>FOR</code> entre sí y BASIC nos permite usar un único <code>NEXT</code> con todos ellos, pero honestamente no es recomendable hacer eso de cara a mantener el código legible para futuras revisiones del mismo. Si no se indica una variable junto a <code>NEXT</code>, se procederá a modificar la última variable contador de un <code>FOR</code>, es decir, se actualizará la variable del bucle interno anidado en el que estemos. Como recomendación, de cara a la legibilidad, es recomendable hacer explícita la variable que <code>NEXT</code> vaya a actualizar.</p>
<p>El comando <code>ON</code> nos permite saltar en la ejecución del programa mediante un índice:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">ON</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">{</mo></mstyle><mtext mathvariant="monospace">GOSUB</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">GOTO</mtext><mstyle mathcolor="red"><mo stretchy="false">}</mo></mstyle><mtext>&nbsp;</mtext><mrow><mi>l</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>n</mi><mi>e</mi><mi>a</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>l</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>n</mi><mi>e</mi><mi>a</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{ON}\ \mathit{expresión}\ \textcolor{red}{ \{ }\texttt{GOSUB}\textcolor{red}{|}\texttt{GOTO}\textcolor{red}{ \} }\ \mathit{l\acute{\imath}nea} \textcolor{red}{[} \texttt{,}\ \mathit{l\acute{\imath}nea}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">ON</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">{</span><span class="mord text"><span class="mord texttt">GOSUB</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">GOTO</span></span><span class="mclose" style="color: red;">}</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">l</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nea</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">l</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nea</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Esta sentencia de control requiere de una <em>expresión</em> numérica que de como resultado un valor desde <code>1</code> hasta <em>N</em>, siendo <em>N</em> el número de <em>líneas</em> que hayamos indicado en el comando. Siendo más precisos, <em>expresión</em> debe ser un valor desde <code>0</code> hasta  <code>255</code> o nos dará un error en ejecución. Si metemos un número con decimales, este será redondeado, si metemos una opción que está fuera del la cantidad de líneas que tenemos, no se realizará salto alguno y continuará la ejecución con la siguiente línea al comando <code>ON</code>. Esta sentencia nos vendrá bien para hacer menús de forma sencilla, por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">5</span>   <span class="token comment"><span class="token keyword">REM</span> PINTAR EL MENU</span>
<span class="token number">10</span>  <span class="token function">PRINT</span> <span class="token string">"1. NUEVA PARTIDA"</span>
<span class="token number">20</span>  <span class="token function">PRINT</span> <span class="token string">"2. CARGAR PARTIDA"</span>
<span class="token number">30</span>  <span class="token function">PRINT</span> <span class="token string">"3. OPCIONES"</span>
<span class="token number">40</span>  <span class="token function">PRINT</span> <span class="token string">"4. SALIR"</span>
<span class="token number">50</span>  <span class="token function">PRINT</span>
<span class="token number">55</span>  <span class="token comment"><span class="token keyword">REM</span> INTRODUCIR UNA OPCION</span>
<span class="token number">60</span>  <span class="token keyword">INPUT</span> <span class="token string">"ELIGE UNA OPCION"</span><span class="token punctuation">;</span>N
<span class="token number">70</span>  <span class="token function">PRINT</span>
<span class="token number">75</span>  <span class="token comment"><span class="token keyword">REM</span> SALTAR A LA OPCION</span>
<span class="token number">80</span>  <span class="token keyword">ON</span> N <span class="token keyword">GOTO</span> <span class="token number">100</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">130</span>
<span class="token number">90</span>  M$<span class="token operator">=</span><span class="token string">"INCORRECTO"</span>  <span class="token punctuation">:</span><span class="token keyword">GOTO</span> <span class="token number">150</span>
<span class="token number">100</span> M$<span class="token operator">=</span><span class="token string">"JUGANDO"</span>     <span class="token punctuation">:</span><span class="token keyword">GOTO</span> <span class="token number">150</span>
<span class="token number">110</span> M$<span class="token operator">=</span><span class="token string">"CARGANDO"</span>    <span class="token punctuation">:</span><span class="token keyword">GOTO</span> <span class="token number">150</span>
<span class="token number">120</span> M$<span class="token operator">=</span><span class="token string">"CONFIGURANDO"</span><span class="token punctuation">:</span><span class="token keyword">GOTO</span> <span class="token number">150</span>
<span class="token number">130</span> <span class="token function">PRINT</span> <span class="token string">"SALIENDO"</span> <span class="token punctuation">:</span><span class="token keyword">GOTO</span> <span class="token number">140</span>
<span class="token number">140</span> <span class="token keyword">END</span>
<span class="token number">145</span> <span class="token comment"><span class="token keyword">REM</span> RUTINA PARA PINTAR MENSAJES</span>
<span class="token number">150</span> <span class="token function">PRINT</span> M$<span class="token punctuation">:</span><span class="token function">PRINT</span>
<span class="token number">160</span> <span class="token keyword">GOTO</span> <span class="token number">10</span>
</code></pre>
<p>Primero, el comando <code>END</code> termina la ejecución del programa. Como podemos ver, pintamos un menú, pedimos un número del <code>1</code> al <code>4</code> y aplicamos el salto en base a lo que se haya metido. Si metemos un valor mayor que <code>4</code> o un <code>0</code>, la ejecución pasará a la línea <code>90</code>. Si metemos un número negativo o mayor que <code>255</code> nos lanzará un error de ejecución, por ello es recomendable añadir código que realice comprobaciones con la entrada como:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">65</span> <span class="token keyword">IF</span> N<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">OR</span> N<span class="token operator">&gt;</span><span class="token number">4</span> <span class="token keyword">THEN</span> N<span class="token operator">=</span><span class="token number">0</span>
</code></pre>
<p>De esta manera, cualquier número introducido que no esté entre las opciones válidas será convertido al valor <code>0</code>.</p>
<p>Finalmente, aunque lo hemos visto con anterioridad, el comando <code>LET</code> nos permite asignar valores a variables en el lenguaje:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">LET</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext mathvariant="monospace">=</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow></mrow><annotation encoding="application/x-tex">\textcolor{red}{[}\texttt{LET}\textcolor{red}{]}\ \mathit{variable}\texttt{=}\mathit{expresión}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">LET</span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span></span></span></span></span></span></p>
<p>Es opcional poner <code>LET</code> y, como ya hemos explicado, la <em>expresión</em> es una combinación de constantes, variables, operadores y funciones.</p>
<h2 id="funciones-numéricas">Funciones numéricas</h2>
<p>Las funciones matemáticas del BASIC de C64 tienen la siguiente forma:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">(</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\mathit{nombre}\texttt{(}\mathit{expresión}\texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Primero hay que indicar el <em>nombre</em> identificador de la función y luego la <em>expresión</em> que vamos a pasar como parámetro de la llamada. El resultado será un número de coma flotante, aunque se pueda almacenar en una variable entera, en este último caso el valor se trunca dejando tan la parte entera únicamente. Estas son las funciones disponibles para trabajar con números:</p>

<table>
<thead>
<tr>
<th align="center">Nombre</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>ABS(X)</code></td>
<td>Calcula el <strong>valor absoluto</strong> de X (elimina su signo).</td>
</tr>
<tr>
<td align="center"><code>ATN(X)</code></td>
<td>Calcula el <strong>arcotangente</strong> con radianes.</td>
</tr>
<tr>
<td align="center"><code>COS(X)</code></td>
<td>Calcula el <strong>coseno</strong> con radianes.</td>
</tr>
<tr>
<td align="center"><code>EXP(X)</code></td>
<td>Exponenciación de <em>e</em><sup>X</sup>.</td>
</tr>
<tr>
<td align="center"><code>INT(X)</code></td>
<td>Redondea X hacia abajo.</td>
</tr>
<tr>
<td align="center"><code>LOG(X)</code></td>
<td>Logaritmo neperiano de X: log<sub>e</sub>(X).</td>
</tr>
<tr>
<td align="center"><code>RND(X)</code></td>
<td>Genera un número real aleatorio entre <code>0</code> y <code>1</code> (incluyendo el 0 pero no el 1 en su rango).</td>
</tr>
<tr>
<td align="center"><code>SGN(X)</code></td>
<td>Devuelve el signo de X (<code>-1</code> = Negativo, <code>0</code> = Cero, <code>+1</code> = Positivo).</td>
</tr>
<tr>
<td align="center"><code>SIN(X)</code></td>
<td>Calcula el <strong>seno</strong> con radianes.</td>
</tr>
<tr>
<td align="center"><code>SQR(X)</code></td>
<td>Calcula la <strong>raíz cuadrada</strong> de X.</td>
</tr>
<tr>
<td align="center"><code>TAN(X)</code></td>
<td>Calcula la <strong>tangente</strong> con radianes.</td>
</tr>
</tbody>
</table><p>Veamos algunas consideraciones sobre estas funciones. Las funciones trigonométricas funcionan con <a href="https://es.wikipedia.org/wiki/Radi%C3%A1n">radianes</a> en lugar de <a href="https://es.wikipedia.org/wiki/Grado_sexagesimal">grados</a>, por lo que veremos luego cómo se hace la conversión entre ambas medidas. El número <em>e</em> es <code>2.71828183</code>, pero a diferencia de <code>π</code>, no existe un símbolo en el C64 para representar esta constante. La función <code>EXP</code> es el inverso de <code>LOG</code> y viceversa. Para calcular un logaritmo en otra base usaremos la siguiente fórmula:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><mi>y</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><msub><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><mi>e</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><mi>e</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\mathit{log}_{y}(x) = \dfrac{\mathit{log}_{e}(x)}{\mathit{log}_{e}(y)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.13025em; vertical-align: -0.380248em;"></span><span class="mord"><span class="mord"><span class="mord mathit">log</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.057252em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.380248em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.363em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathit">log</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.057252em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.24414em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathit">log</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.057252em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.24414em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p>
<p>En cuanto a la función <code>RND(X)</code> hemos de tener en cuenta que:</p>
<ul>
<li>Si <code>X</code> es positivo dará un número aleatorio en cada llamada, obtenido de la secuencia predeterminada interna del C64.</li>
<li>Si <code>X</code> es negativo devuelve siempre el mismo número de la secuencia predeterminada interna. Cada valor negativo tiene asociado un elemento de la secuencia.</li>
<li>Si <code>X</code> es cero genera un número aleatorio utilizando el reloj interno, aunque esto provocará resultados limitados que no servirán para generar números grandes.</li>
</ul>
<p>También podemos definir funciones matemáticas propias con el comando:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">DEF</mtext><mtext>&nbsp;</mtext><mtext mathvariant="monospace">FN</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">(</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext mathvariant="monospace">)=</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{DEF}\ \texttt{FN}\ \mathit{nombre}\texttt{(}\mathit{variable}\texttt{)} \texttt{=} \mathit{expresión}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">DEF</span></span><span class="mspace">&nbsp;</span><span class="mord text"><span class="mord texttt">FN</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">variable</span></span><span class="mord text"><span class="mord texttt">)</span></span><span class="mord text"><span class="mord texttt">=</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span></span></span></span></span></span></p>
<p>Para ello tenemos que indicar un nombre identificador que no esté ya reservado, recordando que sólo se tendrán en cuenta los dos primeros caracteres, luego indicar un nombre de variable de coma flotante que vayamos a usar dentro de la función y finalmente la expresión matemática que calcula la función. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token keyword">DEF FN</span> DG<span class="token punctuation">(</span>R<span class="token punctuation">)</span><span class="token operator">=</span>R<span class="token operator">*</span><span class="token number">180</span><span class="token operator">/</span>π
<span class="token number">20</span> <span class="token keyword">DEF FN</span> RD<span class="token punctuation">(</span>D<span class="token punctuation">)</span><span class="token operator">=</span>D<span class="token operator">*</span>π<span class="token operator">/</span><span class="token number">180</span>
<span class="token number">30</span> <span class="token keyword">DEF FN</span> RO<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">INT</span><span class="token punctuation">(</span>X<span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">)</span>
<span class="token number">40</span> <span class="token keyword">DEF FN</span> L1<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">LOG</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">LOG</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre>
<p>Tenemos cuatro funciones definidas: pasar de radianes a grados, pasar de grados a radianes, redondear un número y calcular el logaritmo en base 10. Las dos primeras son las típicas funciones obtenidas por una regla de tres:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>r</mi><mi>a</mi><mi>d</mi></mrow><mrow><mi>d</mi><mi>e</mi><mi>g</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mn mathvariant="italic">2</mn><mo>∗</mo><mi>π</mi></mrow><mn mathvariant="italic">360</mn></mfrac><mo>=</mo><mfrac><mi>π</mi><mn mathvariant="italic">180</mn></mfrac></mrow><annotation encoding="application/x-tex">\dfrac{\mathit{rad}}{\mathit{deg}} = \dfrac{\mathit{2 * \pi}}{\mathit{360}} = \dfrac{\mathit{\pi}}{\mathit{180}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.25188em; vertical-align: -0.88044em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">deg</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">rad</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.88044em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.00744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">360</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathnormal">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.79356em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10756em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">180</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">π</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p>
<p>La tercera viene a suplir una deficiencia de <code>INT</code>, que realmente es una función de “suelo” más que de redondear. Para redondear con <code>INT</code> basta con sumar <code>0.5</code> al valor de entrada y con ello los valores que están entre <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0.5</mn><mo separator="true">,</mo><mn>1.0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[0.5,1.0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1.0</span><span class="mclose">)</span></span></span></span></span> o <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>0.5</mn><mo separator="true">,</mo><mn>0.0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[-0.5,0.0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">0.0</span><span class="mclose">)</span></span></span></span></span> se redondearán hacia arriba, mientras que el resto de casos redondeará hacia abajo. La cuarta función es la aplicación de lo que vimos para calcular un logaritmo en una base distinta al número <em>e</em>, que es la que maneja la función <code>LOG</code>.</p>
<p>Para poder aplicar estas funciones tenemos el comando:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">FN</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mtext mathvariant="monospace">(</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{FN}\ \mathit{nombre}\texttt{(}\mathit{expresión}\texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord texttt">FN</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Indicamos el nombre de la función y entre paréntesis la expresión matemática que generará el valor que será pasado como parámetro a la función. Por ejemplo, usando las funciones del ejemplo anterior:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">50</span>  <span class="token function">PRINT</span> FNL1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   FNRD<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">TAB</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> FNDG<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token number">60</span>  <span class="token function">PRINT</span> FNL1<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  FNRD<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  FNDG<span class="token punctuation">(</span>π<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">70</span>  <span class="token function">PRINT</span> FNL1<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FNRD<span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FNDG<span class="token punctuation">(</span>π<span class="token punctuation">)</span>
<span class="token number">80</span>  <span class="token function">PRINT</span> FNL1<span class="token punctuation">(</span><span class="token number">1E3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FNRD<span class="token punctuation">(</span><span class="token number">270</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FNDG<span class="token punctuation">(</span>π<span class="token operator">*</span><span class="token number">3</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token number">90</span>  <span class="token function">PRINT</span> FNL1<span class="token punctuation">(</span><span class="token number">1E4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FNRD<span class="token punctuation">(</span><span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FNDG<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>π<span class="token punctuation">)</span>
<span class="token number">100</span> <span class="token function">PRINT</span>
<span class="token number">110</span> <span class="token function">PRINT</span> FNRO<span class="token punctuation">(</span><span class="token number">-3.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FNRO<span class="token punctuation">(</span><span class="token number">-2.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FNRO<span class="token punctuation">(</span><span class="token number">-1.0</span><span class="token punctuation">)</span>
<span class="token number">120</span> <span class="token function">PRINT</span> FNRO<span class="token punctuation">(</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FNRO<span class="token punctuation">(</span> <span class="token number">3.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FNRO<span class="token punctuation">(</span> <span class="token number">4.7</span><span class="token punctuation">)</span>
</code></pre>
<p>Otro ejemplo interesante a contemplar es el siguiente:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token keyword">DEF FN</span> D6<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">INT</span><span class="token punctuation">(</span><span class="token function">RND</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span>
<span class="token number">20</span> <span class="token keyword">FOR</span> I<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">TO</span> <span class="token number">10</span>
<span class="token number">30</span> <span class="token function">PRINT</span> FN D6<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token number">40</span> <span class="token keyword">NEXT</span> I
</code></pre>
<p>Aquí definimos una función para hacer una tirada de un dado de seis caras con la función de números aleatorios. Después mostramos por pantalla 10 resultados de tirada de dados.</p>
<h2 id="funciones-de-cadenas">Funciones de cadenas</h2>
<p>Tenemos también funciones para trabajar con cadenas. La primera calcula el tamaño de una cadena:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">LEN(</mtext><mrow><mi>c</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>a</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{LEN(} \mathit{cadena} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">LEN(</span></span><span class="mord"><span class="mord mathit">cadena</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Donde <em>cadena</em> es una expresión que devuelve un valor de cadena de texto y este valor es pasado como argumento a la función cuando es invocada. Esencialmente nos dice el número de caracteres que tiene la cadena que le pasemos. Recordemos que las cadenas pueden tener tamaños desde <code>0</code> hasta <code>255</code>.</p>
<p>El siguiente grupo de funciones nos permite convertir valores numéricos a cadenas y viceversa:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.1600em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext mathvariant="monospace">ASC(</mtext><mrow><mi>c</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>a</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mspace width="2em"></mspace></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext mathvariant="monospace">VAL(</mtext><mrow><mi>c</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>a</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext mathvariant="monospace">CHR$(</mtext><mrow><mi>n</mi><mover accent="true"><mi>u</mi><mo>ˊ</mo></mover><mi>m</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mspace width="2em"></mspace></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext mathvariant="monospace">STR$(</mtext><mrow><mi>n</mi><mover accent="true"><mi>u</mi><mo>ˊ</mo></mover><mi>m</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{ccc}
\texttt{ASC(} \mathit{cadena} \texttt{)}
&amp; \qquad &amp;
\texttt{VAL(} \mathit{cadena} \texttt{)}
\\[0.2cm]
\texttt{CHR\$(} \mathit{número} \texttt{)}
&amp; \qquad &amp;
\texttt{STR\$(} \mathit{número} \texttt{)}
\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.96906em; vertical-align: -1.23453em;"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.73453em;"><span class="" style="top: -3.89453em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord text"><span class="mord texttt">ASC(</span></span><span class="mord"><span class="mord mathit">cadena</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span><span class="" style="top: -2.12547em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord text"><span class="mord texttt">CHR$(</span></span><span class="mord"><span class="mord mathit">n</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">u</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">mero</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.23453em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.73453em;"><span class="" style="top: -3.73453em;"><span class="pstrut" style="height: 2.84em;"></span><span class="mord"><span class="mspace" style="margin-right: 2em;"></span></span></span><span class="" style="top: -1.96547em;"><span class="pstrut" style="height: 2.84em;"></span><span class="mord"><span class="mspace" style="margin-right: 2em;"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.23453em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.73453em;"><span class="" style="top: -3.89453em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord text"><span class="mord texttt">VAL(</span></span><span class="mord"><span class="mord mathit">cadena</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span><span class="" style="top: -2.12547em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord text"><span class="mord texttt">STR$(</span></span><span class="mord"><span class="mord mathit">n</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">u</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">mero</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.23453em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span></span></span></span></span></span></span></span></p>
<p>La función <code>ASC</code> recibe una cadena y convierte el carácter al inicio en el número entero que corresponde con su código PETSCII. Si le pasamos una cadena vacía lanzará un error en tiempo de ejecución. La función inversa a <code>ASC</code> es <code>CHR$</code>, que toma un código PETSCII y devuelve una cadena de un carácter que representa a dicho código. Los códigos PETSCII son números enteros desde <code>0</code> hasta <code>255</code>.</p>
<p>La función <code>VAL</code> recibe una cadena y la intenta convertir en un número entero o flotante, si no pudiera nos devolvería el valor <code>0</code>. Hay que señalar que los espacios en blanco son ignorados al procesar la cadena. Su función contraria es <code>STR$</code>, que recibe un número y lo convierte en una cadena.</p>
<p>Otro grupo importante son las funciones que nos permiten extraer un fragmento del interior de una cadena:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">LEFT$(</mtext><mrow><mi>c</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>a</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>t</mi><mi>a</mi><mi>m</mi><mi>a</mi><mover accent="true"><mi>n</mi><mo>~</mo></mover><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{LEFT\$(} \mathit{cadena}\texttt{,}\ \mathit{tamaño} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.13889em;"></span><span class="mord text"><span class="mord texttt">LEFT$(</span></span><span class="mord"><span class="mord mathit">cadena</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">tama</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">n</span></span><span class="" style="top: -3.35em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">~</span></span></span></span></span></span></span><span class="mord mathit">o</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">RIGHT$(</mtext><mrow><mi>c</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>a</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>t</mi><mi>a</mi><mi>m</mi><mi>a</mi><mover accent="true"><mi>n</mi><mo>~</mo></mover><mi>o</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{RIGHT\$(} \mathit{cadena}\texttt{,}\ \mathit{tamaño} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.13889em;"></span><span class="mord text"><span class="mord texttt">RIGHT$(</span></span><span class="mord"><span class="mord mathit">cadena</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">tama</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">n</span></span><span class="" style="top: -3.35em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">~</span></span></span></span></span></span></span><span class="mord mathit">o</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">MID$(</mtext><mrow><mi>c</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>a</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>i</mi><mi>n</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>t</mi><mi>a</mi><mi>m</mi><mi>a</mi><mover accent="true"><mi>n</mi><mo>~</mo></mover><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{MID\$(} \mathit{cadena} \texttt{,}\ \mathit{inicio} \textcolor{red}{[}\texttt{,}\ \mathit{tamaño} \textcolor{red}{]} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">MID$(</span></span><span class="mord"><span class="mord mathit">cadena</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">inicio</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">tama</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.66786em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">n</span></span><span class="" style="top: -3.35em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">~</span></span></span></span></span></span></span><span class="mord mathit">o</span></span><span class="mclose" style="color: red;">]</span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>Donde <em>cadena</em> es la expresión que devuelve la cadena que vamos a pasar como parámetro de la función y <em>tamaño</em> es el número de caracteres que queremos extraer, que puede ser un tamaño desde <code>0</code> hasta <code>255</code>. ¿Qué pasa si queremos extraer más caracteres de los que hay en la cadena? Cuando llega al final de la cadena el algoritmo para de copiar caracteres y nos devuelve la cadena que ha extraído sin provocar un error de ejecución. Luego hay otro parámetro más en el caso de <code>MID$</code>, que es <em>inicio</em>, y este consiste en indicar a partir de qué posición vamos a empezar a extraer caracteres. A diferencia de los arrays, la primera posición de una cadena es el <code>1</code> y no el cero, lo cual hay que tener en cuenta porque si intentamos extraer la posición <code>0</code> se lanzará un error de ejecución.</p>
<p>Para entender mejor algunas de estas funciones vamos a ver el siguiente ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span>  <span class="token keyword">INPUT</span> S$
<span class="token number">20</span>  S%<span class="token operator">=</span><span class="token function">LEN</span><span class="token punctuation">(</span>S$<span class="token punctuation">)</span>
<span class="token number">30</span>  HS%<span class="token operator">=</span><span class="token function">INT</span><span class="token punctuation">(</span><span class="token function">LEN</span><span class="token punctuation">(</span>S$<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">)</span>
<span class="token number">40</span>  SL$<span class="token operator">=</span><span class="token function">LEFT$</span><span class="token punctuation">(</span>S$<span class="token punctuation">,</span>HS%<span class="token punctuation">)</span>
<span class="token number">50</span>  SR$<span class="token operator">=</span><span class="token function">RIGHT$</span><span class="token punctuation">(</span>S$<span class="token punctuation">,</span>HS%<span class="token punctuation">)</span>
<span class="token number">60</span>  <span class="token function">PRINT</span> <span class="token string">"CADENA:    "</span><span class="token punctuation">;</span>S$
<span class="token number">70</span>  <span class="token function">PRINT</span> <span class="token string">"TAMANO:    "</span><span class="token punctuation">;</span>S%
<span class="token number">80</span>  <span class="token function">PRINT</span> <span class="token string">"IZQUIERDA: "</span><span class="token punctuation">;</span>SL$
<span class="token number">90</span>  <span class="token function">PRINT</span> <span class="token string">"DERECHA:   "</span><span class="token punctuation">;</span>SR$
<span class="token number">100</span> <span class="token function">PRINT</span><span class="token punctuation">:</span><span class="token keyword">GOSUB</span> <span class="token number">170</span><span class="token punctuation">:</span><span class="token function">PRINT</span>
<span class="token number">110</span> Z<span class="token operator">=</span>HS%<span class="token punctuation">:</span><span class="token keyword">IF</span> HS%<span class="token operator">=</span><span class="token function">INT</span><span class="token punctuation">(</span><span class="token function">LEN</span><span class="token punctuation">(</span>S$<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">THEN</span> Z<span class="token operator">=</span>Z<span class="token operator">+</span><span class="token number">1</span>
<span class="token number">120</span> <span class="token function">PRINT</span> S$
<span class="token number">130</span> <span class="token keyword">FOR</span> I<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">TO</span> Z
<span class="token number">140</span> <span class="token function">PRINT</span> SPC<span class="token punctuation">(</span>I<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MID$</span><span class="token punctuation">(</span>S$<span class="token punctuation">,</span>I<span class="token punctuation">,</span>HS%<span class="token punctuation">)</span>
<span class="token number">150</span> <span class="token keyword">NEXT</span> I
<span class="token number">160</span> <span class="token keyword">END</span>
<span class="token number">170</span> V<span class="token operator">=</span><span class="token function">VAL</span><span class="token punctuation">(</span>S$<span class="token punctuation">)</span>
<span class="token number">180</span> <span class="token keyword">IF</span> <span class="token punctuation">(</span>V<span class="token operator">&lt;&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">OR</span> <span class="token punctuation">(</span>V<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">AND</span> S$<span class="token operator">=</span><span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token keyword">THEN</span> <span class="token number">210</span>
<span class="token number">190</span> <span class="token function">PRINT</span> <span class="token string">"NO ES UN NUMERO"</span>
<span class="token number">200</span> <span class="token keyword">RETURN</span>
<span class="token number">210</span> <span class="token function">PRINT</span> <span class="token string">"ES UN NUMERO:"</span><span class="token punctuation">;</span>V
<span class="token number">220</span> <span class="token keyword">RETURN</span>
</code></pre>
<p>Metemos una cadena por teclado y calculamos su tamaño, la mitad del mismo y tomamos la mitad izquierda y luego la mitad derecha. Las líneas <code>60-90</code> nos muestra la información que hemos obtenido. En la línea <code>100</code> llamamos a una subrutina que convierte la cadena a número y comprueba si se ha realizado la conversión correctamente. Para ello tiene que comprobar que no es cero el valor devuelto, pero si fuera cero hemos de comprobar que es la cadena <code>"0"</code> (aunque esto tiene un bug si metemos una cadena con varios ceros). Una peculiaridad de <code>VAL</code> es que si los primeros caracteres son un número, devolverá ese valor que pueda encontrar al principio, por ejemplo con <code>"123ABC"</code> nos devolvería el número <code>123</code>. Después de volver de la subrutina, vamos a recorrer la cadena para extraer todos los posibles segmentos de la misma que ocupen la mitad de su tamaño. Como hemos avisado, la posición inicial ha de empezar del valor <code>1</code> en adelante.</p>
<h2 id="el-reloj-del-sistema">El reloj del sistema</h2>
<p>Como tantas otras máquinas, el C64 tiene un reloj interno que se pone en funcionamiento en cuanto se inicia el sistema. Para acceder a su valor usamos la variable <code>TIME</code>, que devuelve un valor en el que cada unidad corresponde a <code>1/60</code> segundos, es decir, 60 Hz como las televisiones <a href="https://es.wikipedia.org/wiki/NTSC">NTSC</a>, frente a los 50 Hz del sistema <a href="https://es.wikipedia.org/wiki/PAL">PAL</a>. Para que se entienda mejor <code>TIME/60</code> nos da el número de segundos que han transcurrido desde el inicio de la máquina. Hay que señalar que consultar esta variable puede conllevar imprecisiones, ya que al ejecutar operaciones de entrada y salida con las CIAs se podría poner en pausa la actualización del contador de tiempo.</p>
<p>Además de lo anterior, con la variable <code>TIME$</code> obtenemos una cadena en formato <code>HHMMSS</code> donde nos indica las horas, minutos y segundos que han transcurrido en formato de 24 horas. Esta variable, a diferencia de la anterior, podemos asignarle el valor que queramos, ya que de intentar asignar un valor a <code>TIME</code>, se produce un error en tiempo de ejecución. Al poder modificar el valor de <code>TIME$</code>, indirectamente cambiaremos el valor de <code>TIME</code>, por lo que podemos resetear el tiempo y hacer cronómetros en caso de necesitarlos. Los valores que podemos asignar son desde <code>"000000"</code> (00:00:00) hasta <code>"235959"</code> (23:59:59), ya que cuando incremente este último valor en un segundo dará la vuelta a la hora cero.</p>
<h2 id="manejo-de-datos">Manejo de datos</h2>
<p>Un aspecto peculiar del lenguaje BASIC son los comandos <code>DATA</code> y <code>READ</code>, que permiten una suerte de manejo de datos en el código de un programa. Digamos que queremos almacenar una información, por ejemplo un nivel de un juego, que vamos a cargar luego en ejecución, para lograrlo usaríamos el comando <code>DATA</code>:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">DATA</mtext><mtext>&nbsp;</mtext><mrow><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>t</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>t</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{DATA}\ \mathit{constante} \textcolor{red}{[} \texttt{,}\ \mathit{constante}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">DATA</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">constante</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">constante</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Con este comando vamos poniendo secuencias de valores constantes, que luego vamos a rescatar con el comando <code>READ</code></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">READ</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{READ}\ \mathit{variable} \textcolor{red}{[} \texttt{,}\ \mathit{variable}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">READ</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Obviamente, no podemos leer con una variable numérica una constante de cadena de texto, por lo que de intentarlo obtendríamos un error en tiempo de ejecución. Lo que sí podemos hacer es usar una variable de cadena de texto para leer cualquier dato y luego intentar convertirlo a número si fuera necesario, claro que esto será menos eficiente.</p>
<p>¿Qué ocurre si queremos volver a leer datos anteriores? Si ya hemos leído todas las constantes definidas con <code>DATA</code>, e intentamos ejecutar un <code>READ</code>, se producirá un error de ejecución. Para evitarlo, con el comando <code>RESTORE</code> pondremos el puntero de lectura de datos al inicio del todo, permitiendo que volvamos a leer datos anteriores. Pero esto tiene el problema de tener que recorrer toda la información previa a la que buscamos, de forma secuencial, como si estuviéramos en una cinta de casete.</p>
<p>Es importante, cuando tenemos información que cargar en nuestros programas, estudiar si será mejor opción utilizar ficheros externos o no. El uso de ficheros externos nos permite evitar los accesos secuenciales, salvo que estemos usando un casete, donde el modelo de lectura también es secuencial. Sin embargo, el uso de disquetes se puede volver en nuestra contra al manejar ficheros “grandes”, pues la lectora Commodore 1541 tuvo problemas en su diseño que la llevaron a tener velocidades de lectura muy bajas. Concretamente hablamos de un ancho de banda entre 300 y 400 B/s. Para que se comprenda bien, la cara de un disquete tiene un tamaño máximo de 174.848 bytes, que con una velocidad de 300 B/s son aproximadamente 583 segundos en total para leer el disco entero, que son 9 minutos y 43 segundos.</p>
<h2 id="gestión-de-ficheros">Gestión de ficheros</h2>
<p>Para trabajar con un fichero lo primero que hay que hacer es abrirlo:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">OPEN</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>i</mi><mi>d</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>f</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{OPEN}\ \mathit{nid} \textcolor{red}{[}\texttt{,}\ \mathit{dispositivo} \textcolor{red}{[}\texttt{,}\ \mathit{modo} \textcolor{red}{[}\texttt{,}\ \mathit{fichero} \textcolor{red}{]]]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">OPEN</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nid</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">dispositivo</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">modo</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">fichero</span></span><span class="mclose" style="color: red;">]]]</span></span></span></span></span></span></p>
<p>El parámetro <em>nid</em> es un número identificador con valor desde <code>1</code> hasta <code>255</code>, aunque es preferible que sea menor de <code>128</code>. Los parámetros <em>dispositivo</em> y <em>modo</em> hacen referencia a con qué dispositivo de entrada o salida vamos a trabajar:</p>

<table>
<thead>
<tr>
<th align="center">Dispositivo</th>
<th align="center">Modo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>0</code></td>
<td align="center"><code>0</code></td>
<td>Lectura del Teclado.</td>
</tr>
<tr>
<td align="center"><code>1</code></td>
<td align="center"><code>0</code><br><code>1</code><br><code>2</code></td>
<td>Lectura del <em>datasette</em>.<br>Escritura del <em>datasette</em>.<br>Escritura del <em>datasette</em> seguido de la marca <code>EOT</code> (End Of Tape).</td>
</tr>
<tr>
<td align="center"><code>2</code></td>
<td align="center"><code>0</code></td>
<td>Modem / RS-232.</td>
</tr>
<tr>
<td align="center"><code>3</code></td>
<td align="center"><code>0</code>,<code>1</code></td>
<td>Escritura y lectura de la pantalla.</td>
</tr>
<tr>
<td align="center"><code>4</code>-<code>5</code></td>
<td align="center"><code>0</code><br><code>7</code></td>
<td>Modo mayúsculas de la impresora.<br>Modo minúsculas de la impresora.</td>
</tr>
<tr>
<td align="center"><code>8</code>-<code>15</code></td>
<td align="center"><code>2</code>-<code>14</code><br><code>15</code></td>
<td>Canales de datos de la disquetera.<br>Canales de comandos de la disquetera.</td>
</tr>
</tbody>
</table><p>Por último el parámetro <em>fichero</em> indica la ruta del fichero con el que trabajar:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi>f</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mo>=</mo><mtext mathvariant="monospace">"</mtext><mrow><mi>n</mi><mi>o</mi><mi>m</mi><mi>b</mi><mi>r</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">{</mo></mstyle><mtext mathvariant="monospace">SEQ</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">REL</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">USR</mtext><mstyle mathcolor="red"><mo stretchy="false">}</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">{</mo></mstyle><mtext mathvariant="monospace">R</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">W</mtext><mstyle mathcolor="red"><mo stretchy="false">}</mo></mstyle><mstyle mathcolor="red"><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle><mtext mathvariant="monospace">"</mtext></mrow><annotation encoding="application/x-tex">\mathit{fichero} = \texttt{"} \mathit{nombre} \textcolor{red}{[} \texttt{,} \textcolor{red}{\{} \texttt{SEQ} \textcolor{red}{|} \texttt{REL} \textcolor{red}{|} \texttt{USR} \textcolor{red}{\}} \textcolor{red}{[} \texttt{,} \textcolor{red}{\{} \texttt{R} \textcolor{red}{|} \texttt{W} \textcolor{red}{\}} \textcolor{red}{]]}\texttt{"}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit">fichero</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">"</span></span><span class="mord"><span class="mord mathit">nombre</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mopen" style="color: red;">{</span><span class="mord text"><span class="mord texttt">SEQ</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">REL</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">USR</span></span><span class="mclose" style="color: red;">}</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mopen" style="color: red;">{</span><span class="mord text"><span class="mord texttt">R</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">W</span></span><span class="mclose" style="color: red;">}]]</span><span class="mord text"><span class="mord texttt">"</span></span></span></span></span></span></span></p>
<p>Para indicar la ruta primero necesitamos el <em>nombre</em> del fichero, seguido del tipo de fichero y finalmente si es para leer (<code>R</code>) o escribir (<code>W</code>). Los tipos de fichero que tenemos son secuenciales (<code>SEQ</code>), de acceso aleatorio con registros (<code>REL</code>) o de usuario (<code>USR</code>). Lo habitual es trabajar con ficheros secuenciales desde BASIC.</p>
<p>Como suele ser habitual con la gestión de recursos, manejar ficheros conlleva muchas opciones de provocar fallos en ejecución:</p>
<ul>
<li><code>?TOO MANY FILES</code>: Al tener más de 10 ficheros abiertos a la vez.</li>
<li><code>?FILE NOT OPEN</code>: Al usar un comando de ficheros con un fichero que no ha sido abierto.</li>
<li><code>?FILE OPEN</code>: Al intentar abrir un fichero ya abierto.</li>
<li><code>?DEVICE NOT PRESENT</code>: El dispositivo no existe o no está encendido. También puede ser que no se ha identificado el <code>EOT</code> en la cinta del <em>datasette</em>.</li>
<li><code>?FILE NOT FOUND</code>: No se ha encontrado el fichero en la ruta indicada.</li>
<li><code>?FILE EXISTS</code>: La ruta indicada pertenece a otro fichero reservado del disco.</li>
</ul>
<p>Por desgracia, no podemos capturar los fallos de ejecución en el lenguaje BASIC, por lo que de producirse se terminará la ejecución de nuestro programa abruptamente. Cuando usemos el <em>datasette</em> sólo los cuatro primeros errores podrán ocurrir.</p>
<p>Para cerrar un fichero abierto usaremos:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">CLOSE</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>i</mi><mi>d</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{CLOSE}\ \mathit{nid}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">CLOSE</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nid</span></span></span></span></span></span></span></p>
<p>Si tratamos de cerrar un identificador, que no esté abierto, no se producirá ningún error en ejecución. Si un programa se interrumpe por un error y había ficheros abiertos, estos no se cerrarán automáticamente, por lo que habrá que cerrarlos manualmente, para evitar comportamientos inesperados al volver a ejecutar el programa (o reiniciar la consola).</p>
<p>El siguiente bloque de comandos nos resultará familiar:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">PRINT#</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>i</mi><mi>d</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">;</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{PRINT\#}\ \mathit{nid} \texttt{,}\  \mathit{expresión} \textcolor{red}{[[} \texttt{;} \textcolor{red}{|} \texttt{,} \textcolor{red}{]}\ \mathit{expresión}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">PRINT#</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nid</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mopen" style="color: red;">[[</span><span class="mord text"><span class="mord texttt">;</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">INPUT#</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>i</mi><mi>d</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{INPUT\#}\ \mathit{nid} \texttt{,}\ \mathit{variable} \textcolor{red}{[} \texttt{,}\ \mathit{variable}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">INPUT#</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nid</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">GET#</mtext><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>i</mi><mi>d</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{GET\#}\ \mathit{nid} \texttt{,}\ \mathit{variable} \textcolor{red}{[} \texttt{,}\ \mathit{variable}\ \textcolor{red}{\dots]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">GET#</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nid</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">variable</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Estos comandos son muy similares a <code>PRINT</code>, <code>INPUT</code> y <code>GET</code>, con algunas diferencias. Con <code>PRINT#</code> podemos escribir información en un fichero. Con <code>INPUT#</code> podemos leer información de un fichero, pero no podemos leer cadenas mayores de 80 caracteres sin provocar un error en ejecución. El comando <code>INPUT#</code> no muestra por pantalla ningún mensaje para trabajar. Con <code>GET#</code> podemos leer un carácter de un fichero, lo cual nos permitirá leer cadenas de más de 80 caracteres. Cuando <code>GET#</code> se encuentra con <code>CHR$(0)</code> devuelve la cadena vacía. Al llegar al final de fichero, el comando <code>GET#</code> devolverá por defecto <code>CHR$(199)</code>, para poder distinguir que efectivamente hemos llegado al final usaremos la variable <code>STATUS</code>. Esta variable representa el byte de memoria en la dirección <code>144</code> (<code>$0090</code>) y es sólo de lectura:</p>

<table>
<thead>
<tr>
<th align="center">Bit</th>
<th align="center">Máscara</th>
<th>Puerto Serie</th>
<th>Datasette</th>
<th>RS-232</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="center">1</td>
<td>En caso de <em>timeout</em>:<br>0 = Lectura (Entrada)<br>1 = Escritura (Salida)</td>
<td>-</td>
<td>Error de paridad</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">2</td>
<td>Error de <em>timeout</em></td>
<td>-</td>
<td>Error de <em>framing</em></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">4</td>
<td>-</td>
<td>Bloque demasiado corto (&lt; 192 bytes)</td>
<td>Buffer de entrada sobrescrito</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">8</td>
<td>-</td>
<td>Bloque demasiado largo (&gt; 192 bytes)</td>
<td>Buffer de entrada vacío</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">16</td>
<td>Error en <code>VERIFY</code></td>
<td>Error en <code>VERIFY</code></td>
<td>Señal CTS no encontrada</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">32</td>
<td>-</td>
<td>Error de <em>checksum</em></td>
<td>-</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">64</td>
<td>Final de fichero</td>
<td>Final de fichero (sólo mientras está leyendo)</td>
<td>Señal RTS perdida</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">128</td>
<td>Error de dispositivo no encontrado</td>
<td>-</td>
<td>BREAK detectado</td>
</tr>
</tbody>
</table><p>Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token keyword">OPEN</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"TEST,SEQ,W"</span>
<span class="token number">20</span> S$<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">:</span><span class="token keyword">INPUT</span> S$
<span class="token number">30</span> <span class="token function">PRINT</span># <span class="token number">1</span><span class="token punctuation">,</span>S$
<span class="token number">40</span> <span class="token keyword">IF</span> S$<span class="token operator">&lt;&gt;</span><span class="token string">""</span> <span class="token keyword">THEN</span> <span class="token number">20</span>
<span class="token number">50</span> <span class="token keyword">CLOSE</span> <span class="token number">1</span>
</code></pre>
<p>En este programa vamos pidiendo cadenas al usuario, para escribirlas en el un fichero secuencial. Si no vaciamos la variable <code>S$</code>, al ejecutar el comando <code>INPUT</code>, si metemos una cadena vacía no se sobrescribe la variable y estaríamos en un bucle infinito. Tras terminar de escribir en el fichero, lo podemos leer con el siguiente ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token keyword">OPEN</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"TEST,SEQ,R"</span>
<span class="token number">20</span> <span class="token keyword">GET</span># <span class="token number">1</span><span class="token punctuation">,</span>C$
<span class="token number">30</span> <span class="token function">PRINT</span> C$<span class="token punctuation">;</span>
<span class="token number">40</span> <span class="token keyword">IF</span> <span class="token number">0</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token function">STATUS</span> <span class="token operator">AND</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">THEN</span> <span class="token number">20</span>
<span class="token number">50</span> <span class="token function">PRINT</span>
<span class="token number">60</span> <span class="token keyword">CLOSE</span> <span class="token number">1</span>
</code></pre>
<p>Suponiendo que no esté vacío el fichero, con este programa leeríamos byte a byte el fichero entero y lo mostraríamos por pantalla. En la línea <code>40</code> si no hemos llegado al final de fichero, continuamos leyendo. Si llegamos al final de fichero continuamos por la línea <code>50</code> y en la siguiente se cierra el fichero.</p>
<p>Por último, tenemos el siguiente comando para redirigir la salida de la pantalla hacia un fichero:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mtext mathvariant="monospace">CMD</mtext><mtext>&nbsp;</mtext></mrow><mtext>&nbsp;</mtext><mrow><mi>n</mi><mi>i</mi><mi>d</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo><mtext>&nbsp;</mtext><mo stretchy="false">[</mo><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">;</mtext><mstyle mathcolor="red"><mi mathvariant="normal">∣</mi></mstyle><mtext mathvariant="monospace">,</mtext><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle><mtext>&nbsp;</mtext><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo>…</mo> <mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{CMD }\ \mathit{nid} \textcolor{red}{[}\texttt{,}\  \textcolor{red}{[}\mathit{expresión} \textcolor{red}{]\ [[} \texttt{;} \textcolor{red}{|} \texttt{,} \textcolor{red}{]}\ \mathit{expresión}\ \textcolor{red}{\dots]]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">CMD&nbsp;</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">nid</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mclose" style="color: red;">]</span><span class="mspace" style="color: red;"><span style="color: red;">&nbsp;</span></span><span class="mopen" style="color: red;">[[</span><span class="mord text"><span class="mord texttt">;</span></span><span class="mord" style="color: red;">∣</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mclose" style="color: red;">]</span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">expresi</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mspace">&nbsp;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner" style="color: red;">…</span><span class="mspace" style="color: red; margin-right: 0.166667em;"></span><span class="mclose" style="color: red;">]]</span></span></span></span></span></span></p>
<p>Una vez ejecutado el comando, el fichero abierto asociado a <em>nid</em> irá guardando los <code>PRINT</code> y demás comando que envíen información a la pantalla de la terminal del C64.</p>
<h2 id="gestión-del-sistema">Gestión del sistema</h2>
<p>En esta sección vamos a aprender algunos aspectos de bajo nivel del lenguaje BASIC del C64. Empezaremos con la función que nos devuelve cuanta memoria libre queda para programas BASIC:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">FRE(</mtext><mrow><mi>b</mi><mi>a</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>a</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{FRE}\texttt{(} \mathit{basura} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">FRE</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">basura</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p>De nuevo da igual qué valor pasemos como parámetro a esta función, porque no se va a utilizar. Lo primero que hace <code>FRE</code> es llamar al recolector de basura para liberar la memoria de cadenas de texto sin usar y después calcular cuánta memoria libre queda en el segmento para programas BASIC. Por un detalle de implementación, este cálculo es un entero sin signo de 16 bits, pero al convertirlo en número flotante lo interpreta como si fuera un entero con signo, por lo que al superar los 32.767 bytes nos devuelve un valor negativo al que hay que sumar <code>65536</code>. Por ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> V<span class="token operator">=</span>FRE<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token number">20</span> <span class="token keyword">IF</span> V<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">THEN</span> V<span class="token operator">=</span>V<span class="token operator">+</span><span class="token number">65536</span>
<span class="token number">30</span> <span class="token function">PRINT</span> V
</code></pre>
<p>El resultado que nos mostrará es <code>38861</code>, por lo que el programa ocupa 50 bytes. También podemos definir la siguiente función para calcular la memoria libre:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token keyword">DEF FN</span> FM<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">=</span>FRE<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token number">-65536</span><span class="token operator">*</span><span class="token punctuation">(</span>FRE<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre>
<p>Recordemos que cuando una condición es verdadera obtendremos el valor entero <code>-1</code>, que multiplicado por <code>65536</code> pasa a ser un número negativo y al restar con un número negativo estamos realmente sumando (menos por menos es más). Si tenemos programas largos, como puede ser un juego, posiblemente no necesitemos tener esta función declarada.</p>
<p>Para manipular la memoria del C64 tenemos:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">PEEK(</mtext><mrow><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">)</mtext></mrow><annotation encoding="application/x-tex">\texttt{PEEK}\texttt{(} \mathit{dirección} \texttt{)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord text"><span class="mord texttt">PEEK</span></span><span class="mord text"><span class="mord texttt">(</span></span><span class="mord"><span class="mord mathit">direcci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">)</span></span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">POKE</mtext><mtext>&nbsp;</mtext><mrow><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>o</mi><mi>r</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{POKE}\ \mathit{dirección} \texttt{,}\ \mathit{valor}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.13889em;"></span><span class="mord text"><span class="mord texttt">POKE</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">direcci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">valor</span></span></span></span></span></span></span></p>
<p>Con <code>PEEK</code>, indicando la dirección de memoria que queremos consultar, obtendremos el byte almacenado en la dirección. Con <code>POKE</code> podemos almacenar un byte en una dirección de la memoria, es decir, <em>valor</em> admite desde <code>0</code> hasta <code>255</code>. Las direcciones se indican en base 10, ya que no tenemos en este lenguaje la posibilidad de indicar valores hexadecimales, y son enteros sin signo de 16 bits (desde <code>0</code> hasta <code>65536</code>).</p>
<p>El comando para acceder a subrutinas de código máquina es:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">SYS</mtext><mtext>&nbsp;</mtext><mrow><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow></mrow><annotation encoding="application/x-tex">\texttt{SYS}\ \mathit{dirección}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord text"><span class="mord texttt">SYS</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">direcci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span></span></span></span></span></span></p>
<p>El comando <code>SYS</code> nos permite que se ejecute una subrutina almacenada en la dirección indicada. Para poder comunicar BASIC con el código máquina, hay una serie de direcciones de memoria que son cargadas en los registros de la CPU, se ejecuta la subrutina y antes de finalizar se guardan en dichas posiciones de memoria el contenido de los registros, para poder leerlos desde BASIC. Estas son las direcciones para escribir y leer los registros de la CPU al ejecutar <code>SYS</code>:</p>

<table>
<thead>
<tr>
<th align="center">Dirección</th>
<th align="center">Registro</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">780</td>
<td align="center"><strong>A</strong></td>
</tr>
<tr>
<td align="center">781</td>
<td align="center"><strong>X</strong></td>
</tr>
<tr>
<td align="center">782</td>
<td align="center"><strong>Y</strong></td>
</tr>
<tr>
<td align="center">783</td>
<td align="center"><strong>P</strong></td>
</tr>
</tbody>
</table><p>El registro <strong>A</strong> se le conoce como el acumulador y el <strong>P</strong> contiene el estado de los flags de la CPU, para controlar el resultado de algunas operaciones. Estos registros están explicados con más detenimiento en el apartado del lenguaje ensamblador. Veamos un ejemplo de lo que podemos hacer:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> <span class="token function">PRINT</span> <span class="token function">CHR$</span><span class="token punctuation">(</span><span class="token number">147</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token string">":)"</span><span class="token punctuation">;</span>
<span class="token number">20</span> C<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">:</span>R<span class="token operator">=</span><span class="token number">8</span> <span class="token punctuation">:</span><span class="token keyword">GOSUB</span> <span class="token number">60</span><span class="token punctuation">:</span><span class="token function">PRINT</span> <span class="token string">"HOLA"</span>
<span class="token number">30</span> C<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">:</span>R<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">:</span><span class="token keyword">GOSUB</span> <span class="token number">60</span><span class="token punctuation">:</span><span class="token function">PRINT</span> <span class="token string">"MUNDO"</span>
<span class="token number">40</span> C<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">:</span>R<span class="token operator">=</span><span class="token number">21</span><span class="token punctuation">:</span><span class="token keyword">GOSUB</span> <span class="token number">60</span><span class="token punctuation">:</span><span class="token function">PRINT</span> <span class="token string">"ADIOS"</span>
<span class="token number">50</span> <span class="token keyword">END</span>
<span class="token number">60</span> <span class="token keyword">POKE</span> <span class="token number">211</span><span class="token punctuation">,</span>C <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> $00D3=C</span>
<span class="token number">70</span> <span class="token keyword">POKE</span> <span class="token number">214</span><span class="token punctuation">,</span>R <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> $00D6=R</span>
<span class="token number">80</span> SYS <span class="token number">58640</span>  <span class="token punctuation">:</span> <span class="token comment"><span class="token keyword">REM</span> JSR $E510</span>
<span class="token number">90</span> <span class="token keyword">RETURN</span>
</code></pre>
<p>Con la subrutina de la línea <code>60</code> podemos modificar las coordenadas del cursor de la terminal. Para entenderlo hay que comprender el código máquina de la subrutina <a href="http://unusedino.de/ec64/technical/aay/c64/rome50a.htm"><code>PLOT</code></a> del KERNAL, pero como no es el objetivo de este manual, vamos a resumirlo en que vamos directamente a guardar en la memoria las los datos que va a usar el sistema y llamamos la subrutina que va a usar <code>PLOT</code> para mover el cursor.</p>
<p>Existe la función <code>USR(X)</code>, que permite invocar una subrutina de código máquina para devolver un número flotante. Para ello hay almacenar en las direcciones 785–786 ($0311–$0312) la dirección de la subrutina. Cuando esta es invocada hay que consultar el FAC (acumulador de coma flotante), direcciones $0061–$0066, para obtener el parámetro cuando es un número de coma flotante, si fuera una cadena de texto serían las direcciones $0064-$0065, que es el puntero al descriptor de cadena. Cuando termine la rutina, antes de ejecutar la instrucción <code>RTS</code>, hay que almacenar el resultado en el FAC. Realmente este método es complejo, al implicar la utilización de números de coma flotante, por lo que no es especialmente recomendable.</p>
<p>El último comando de esta sección permite paralizar la ejecución del programa:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">WAIT</mtext><mtext>&nbsp;</mtext><mrow><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>c</mi><mi>i</mi><mover accent="true"><mi>o</mi><mo>ˊ</mo></mover><mi>n</mi></mrow><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>m</mi><mover accent="true"><mi>a</mi><mo>ˊ</mo></mover><mi>s</mi><mi>c</mi><mi>a</mi><mi>r</mi><msub><mi>a</mi><mrow><mi>a</mi><mi>n</mi><mi>d</mi></mrow></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>m</mi><mover accent="true"><mi>a</mi><mo>ˊ</mo></mover><mi>s</mi><mi>c</mi><mi>a</mi><mi>r</mi><msub><mi>a</mi><mrow><mi>x</mi><mi>o</mi><mi>r</mi></mrow></msub></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{WAIT}\ \mathit{dirección} \texttt{,}\ \mathit{máscara_{and}} \textcolor{red}{[}\texttt{,}\ \mathit{máscara_{xor}} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">WAIT</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">direcci</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">o</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">n</span></span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">a</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">scar</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">and</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">m</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathit">a</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">scar</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">xor</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>El comando va a la <em>dirección</em> indicada, lee el byte de la memoria y entra en un bucle donde: se aplica un <em>XOR</em> con la segunda máscara (por defecto el valor es <code>0</code>), se aplica un <em>AND</em> con la primera máscara y si el resultado es cero se repite el bucle. El operador lógico <em>XOR</em> o <a href="https://es.wikipedia.org/wiki/Disyunci%C3%B3n_exclusiva">disyunción exclusiva</a> sirve para invertir bits dentro de un byte en aquellas posiciones que tengamos un <code>1</code>, ya que con <code>0</code> se deja el bit tal cual. ¿Para qué se quiere la máscara del <em>XOR</em>? Esencialmente para cuando queremos comprobar que un bit en la memoria pasa de <code>1</code> a <code>0</code>, en lugar de <code>0</code> a <code>1</code>.</p>
<p>Esta operación nos puede servir para esperar eventos como colisiones entre elementos gráficos (sprites y caracteres) u otras posibilidades. Una aplicación útil que tiene es aplicar retardos de tiempo (<em>delays</em>), como muestra este ejemplo:</p>
<pre class=" language-basic"><code class="prism  language-basic"><span class="token number">10</span> T<span class="token operator">=</span><span class="token number">90</span>
<span class="token number">20</span> <span class="token keyword">POKE</span> <span class="token number">162</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token operator">-</span>T
<span class="token number">30</span> <span class="token keyword">WAIT</span> <span class="token number">162</span><span class="token punctuation">,</span><span class="token number">128</span>
</code></pre>
<p>El reloj interno de la máquina tiene 24 bits y empieza en la posición 162 como byte inferior, luego 161 como byte intermedio y 160 como byte más alto. Estas son las posiciones que la variable <code>TIME</code> lee. Dentro de un byte, el valor <code>128</code> es el bit más alto, por lo tanto si restamos un valor inferior o igual, el reloj terminará volviendo a activar dicho bit pasado 2,13 segundos, ya que cada unidad es 1/60 de segundo. En el ejemplo se espera 1,5 segundos hasta que se activa el bit más alto de la dirección 162. De ese modo se pueden programar fácilmente pequeños retardos, para ralentizar la ejecución si esta va demasiado rápida para que pueda reaccionar un jugador.</p>
<h2 id="control-del-interprete">Control del interprete</h2>
<p>Esta última sección de comandos nos permitirán controlar algunos aspectos del interprete de BASIC del C64, empezando por el comando que inicia la ejecución de un programa:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mtext mathvariant="monospace">RUN</mtext><mtext>&nbsp;</mtext></mrow><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mrow><mi>l</mi><mover accent="true"><mi>ı</mi><mo>ˊ</mo></mover><mi>n</mi><mi>e</mi><mi>a</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{RUN }\ \textcolor{red}{[} \mathit{l\acute{\imath}nea} \textcolor{red}{]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">RUN&nbsp;</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord"><span class="mord mathit">l</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal">ı</span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.255555em;"><span class="mord mathit">ˊ</span></span></span></span></span></span></span><span class="mord mathit">nea</span></span><span class="mclose" style="color: red;">]</span></span></span></span></span></span></p>
<p>Con <code>RUN</code> iniciamos los programas, pudiendo indicar de forma opcional a partir de qué línea queremos que arranque. Una vez iniciada la ejecución, la podemos parar con <code>STOP</code> o <code>END</code>, para luego continuar con <code>CONT</code>. El uso de <code>STOP</code> no tiene efectos secundarios sobre la pila de programa.</p>
<p>Con <code>NEW</code> se libera toda la memoria de BASIC y la pila de programa, borrando el programa cargado y todas las estructuras de datos generadas durante la última ejecución. Con <code>CLR</code> se borra la memoria de datos y la pila de programa, es decir, borra todo menos el programa cargado en la memoria. Cuando ejecutamos un <code>RUN</code> se invoca el comando <code>CLR</code> internamente.</p>
<p>Además de lo anterior, tenemos un grupo de comandos para cargar y guardar programas en ficheros:</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">LOAD</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">"</mtext><mrow><mi>f</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">"</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{LOAD}\ \textcolor{red}{[} \texttt{"}\mathit{fichero}\texttt{"} \textcolor{red}{[}\texttt{,}\ \mathit{dispositivo} \textcolor{red}{[}\texttt{,}\ \mathit{modo} \textcolor{red}{]]]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">LOAD</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">"</span></span><span class="mord"><span class="mord mathit">fichero</span></span><span class="mord text"><span class="mord texttt">"</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">dispositivo</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">modo</span></span><span class="mclose" style="color: red;">]]]</span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">SAVE</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">"</mtext><mrow><mi>f</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">"</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{SAVE}\ \textcolor{red}{[} \texttt{"}\mathit{fichero}\texttt{"} \textcolor{red}{[}\texttt{,}\ \mathit{dispositivo} \textcolor{red}{[}\texttt{,}\ \mathit{modo} \textcolor{red}{]]]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">SAVE</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">"</span></span><span class="mord"><span class="mord mathit">fichero</span></span><span class="mord text"><span class="mord texttt">"</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">dispositivo</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">modo</span></span><span class="mclose" style="color: red;">]]]</span></span></span></span></span></span></p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="monospace">VERIFY</mtext><mtext>&nbsp;</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">"</mtext><mrow><mi>f</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>o</mi></mrow><mtext mathvariant="monospace">"</mtext><mstyle mathcolor="red"><mo stretchy="false">[</mo></mstyle><mtext mathvariant="monospace">,</mtext><mtext>&nbsp;</mtext><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>o</mi></mrow><mstyle mathcolor="red"><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\texttt{VERIFY}\ \textcolor{red}{[} \texttt{"}\mathit{fichero}\texttt{"} \textcolor{red}{[}\texttt{,}\ \mathit{dispositivo} \textcolor{red}{]]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord texttt">VERIFY</span></span><span class="mspace">&nbsp;</span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">"</span></span><span class="mord"><span class="mord mathit">fichero</span></span><span class="mord text"><span class="mord texttt">"</span></span><span class="mopen" style="color: red;">[</span><span class="mord text"><span class="mord texttt">,</span></span><span class="mspace">&nbsp;</span><span class="mord"><span class="mord mathit">dispositivo</span></span><span class="mclose" style="color: red;">]]</span></span></span></span></span></span></p>
<p>Con <em>fichero</em> indicamos el nombre del programa. Los dispositivos disponibles para trabajar son <code>1</code>, para el <em>datasette</em>, y <code>8</code>-<code>15</code>, para las disqueteras. Por defecto, se asume que se usará el dispositivo <code>1</code> si no se indica lo contrario. En cuanto a los modos disponibles, para <code>LOAD</code> son:</p>
<ul>
<li><code>0</code>: El programa es cargado en la dirección de inicio de la memoria de programas BASIC (2049/$0801).</li>
<li><code>1</code>: El programa es cargado en la dirección indicada por los dos primeros bytes del fichero PRG a cargar.</li>
</ul>
<p>Por defecto el modo para <code>LOAD</code> es el valor <code>0</code>. Los modos disponibles para <code>SAVE</code> son:</p>
<ul>
<li><code>0</code>: El programa se guarda como un programa BASIC.</li>
<li><code>1</code>: El programa se guarda en modo absoluto, utilizado por programas en código máquina.</li>
<li><code>2</code>: Es necesario únicamente con el <em>datasette</em> para escribir la marca EOT (fin de cinta).</li>
</ul>
<p>También el modo para <code>SAVE</code> por defecto es el valor <code>0</code>. En cuanto al comando <code>VERIFY</code>, su utilidad estriba en comprobar si efectivamente lo que hemos guardado en el fichero es una copia de lo que hay en la memoria. Hay que entender que en los años 80 la tecnología no era tan fiable como actualmente y de ahí la necesidad de este comando.</p>
<h2 id="códigos-de-escape">Códigos de escape</h2>
<p>Cuando usamos el teclado del C64 este genera códigos PETSCII que podemos utilizar con los comandos de entrada y salida que hemos visto. Algunos de estos códigos de escape permiten operaciones especiales con el comando <code>PRINT</code>, los podemos incorporar con la función <code>CHR$</code> o con el modo de edición especial de las comillas dobles.</p>
<p>El modo de edición de las comillas dobles se activa cuando pulsamos <code>"</code> y se desactiva cuando volvemos a pulsar <code>"</code> por segunda vez. Este modo está disponible mientras estemos escribiendo un programa en BASIC con el C64. Con este modo podemos introducir, como caracteres visibles, los códigos de escape en lugar de que se ejecute su subrutina. Por ejemplo, si pulsamos la tecla <code>⇑ CRSR ⇓</code>, esta envía el código 17, que es capturado y como consecuencia mueve el cursor una posición hacia abajo. Si pulsamos esa tecla, estando en el modo de edición especial, podemos observar que nos pinta en pantalla un <code>Q</code> con los colores invertidos, que es la representación visual de dicho código de escape. Si pasamos a <code>PRINT</code> una cadena que contenga dicho carácter, veremos que el mensaje se parte por dos, con una parte en una línea y la otra en la siguiente.</p>
<p>Desde el entorno de desarrollo <em>CBM prg Studio</em> podemos introducir estos códigos de escape mediante ciertas marcas especiales dentro de las cadenas de texto, ya que estas tienen que ser traducidas de ASCII a PETSCII. Estas marcas van entre llaves <code>{}</code>, poniendo dentro el nombre que identifica al código de escape. Por ejemplo, para el código 17 que hemos visto antes, tendremos la marca <code>{down}</code>. Podemos ver cuáles están disponibles desde <code>Tools</code>+<code>Screen Code Builder...</code> o pulsando <code>F4</code>, nos aparecerá una ventana llamada <code>Screen Codes</code> donde está la pestaña <code>Key Codes</code>.</p>
<p>El primer grupo de código de escapes nos permiten cambiar la configuración de la terminal del C64:</p>

<table>
<thead>
<tr>
<th align="center">PETSCII</th>
<th align="center">C64</th>
<th align="center">VICE</th>
<th align="center">CBM prg Studio</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">8</td>
<td align="center"><code>CTRL</code>+<code>H</code></td>
<td align="center"><code>CTRL</code>+<code>H</code></td>
<td align="center"><code>{ct h}</code></td>
<td>Desactiva el cambio de modo de fuente.</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>CTRL</code>+<code>I</code></td>
<td align="center"><code>CTRL</code>+<code>I</code></td>
<td align="center"><code>{ct i}</code></td>
<td>Activa el cambio de modo de fuente.</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center"><code>CTRL</code>+<code>N</code></td>
<td align="center"><code>CTRL</code>+<code>N</code></td>
<td align="center"><code>{ct n}</code></td>
<td>Activa el modo de fuente minúsculas.</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center"><code>CTRL</code>+<code>9</code></td>
<td align="center"><code>CTRL</code>+<code>9</code></td>
<td align="center"><code>{reverse on}</code></td>
<td>Color invertido activado.</td>
</tr>
<tr>
<td align="center">146</td>
<td align="center"><code>CTRL</code>+<code>0</code></td>
<td align="center"><code>CTRL</code>+<code>0</code></td>
<td align="center"><code>{reverse off}</code></td>
<td>Color invertido desactivado.</td>
</tr>
<tr>
<td align="center">142</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"><code>{142}</code></td>
<td>Activa el modo de fuente mayúsculas.</td>
</tr>
</tbody>
</table><p>El segundo grupo nos permite, mientras estemos usando el comando <code>PRINT</code>, poder modificar la terminal y la posición actual del cursor:</p>

<table>
<thead>
<tr>
<th align="center">PETSCII</th>
<th align="center">C64</th>
<th align="center">VICE</th>
<th align="center">CBM prg Studio</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">147</td>
<td align="center"><code>SHIFT</code>+<code>CLR/HOME</code></td>
<td align="center"><code>MAYUS</code>+<code>INICIO</code></td>
<td align="center"><code>{clear}</code></td>
<td>Borra la pantalla.</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center"><code>INST/DEL</code></td>
<td align="center"><code>RETROCEDER</code></td>
<td align="center"><code>{delete}</code></td>
<td>Elimina el carácter a la izquierda del cursor.</td>
</tr>
<tr>
<td align="center">148</td>
<td align="center"><code>SHIFT</code>+<code>INST/DEL</code></td>
<td align="center"><code>MAYUS</code>+<code>RETROCEDER</code></td>
<td align="center"><code>{148}</code></td>
<td>Mueve los caracteres a la derecha para insertar un carácter.</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center"><code>CLR/HOME</code></td>
<td align="center"><code>INICIO</code></td>
<td align="center"><code>{home}</code></td>
<td>Mueve el cursor a la esquina superior izquierda.</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center"><code>⇑ CRSR ⇓</code></td>
<td align="center"><code>ABAJO</code></td>
<td align="center"><code>{down}</code></td>
<td>Mueve el cursor hacia abajo.</td>
</tr>
<tr>
<td align="center">29</td>
<td align="center"><code>⇐ CRSR ⇒</code></td>
<td align="center"><code>DERECHA</code></td>
<td align="center"><code>{right}</code></td>
<td>Mueve el cursor hacia la derecha.</td>
</tr>
<tr>
<td align="center">145</td>
<td align="center"><code>SHIFT</code>+<code>⇑ CRSR ⇓</code></td>
<td align="center"><code>ARRIBA</code></td>
<td align="center"><code>{up}</code></td>
<td>Mueve el cursor hacia la arriba.</td>
</tr>
<tr>
<td align="center">157</td>
<td align="center"><code>SHIFT</code>+<code>⇐ CRSR ⇒</code></td>
<td align="center"><code>IZQUIERDA</code></td>
<td align="center"><code>{left}</code></td>
<td>Mueve el cursor hacia la izquierda.</td>
</tr>
</tbody>
</table><p>El siguiente grupo de códigos de escape nos permitirán cambiar el color de salida en la pantalla:</p>

<table>
<thead>
<tr>
<th align="center">PETSCII</th>
<th align="center">C64</th>
<th align="center">VICE</th>
<th align="center">CBM prg Studio</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">144</td>
<td align="center"><code>CTRL</code>+<code>1</code></td>
<td align="center"><code>CTRL</code>+<code>1</code></td>
<td align="center"><code>{black}</code></td>
<td>Color negro</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>CTRL</code>+<code>2</code></td>
<td align="center"><code>CTRL</code>+<code>2</code></td>
<td align="center"><code>{white}</code></td>
<td>Color blanco</td>
</tr>
<tr>
<td align="center">28</td>
<td align="center"><code>CTRL</code>+<code>3</code></td>
<td align="center"><code>CTRL</code>+<code>3</code></td>
<td align="center"><code>{red}</code></td>
<td>Color rojo</td>
</tr>
<tr>
<td align="center">159</td>
<td align="center"><code>CTRL</code>+<code>4</code></td>
<td align="center"><code>CTRL</code>+<code>4</code></td>
<td align="center"><code>{cyan}</code></td>
<td>Color cian</td>
</tr>
<tr>
<td align="center">156</td>
<td align="center"><code>CTRL</code>+<code>5</code></td>
<td align="center"><code>CTRL</code>+<code>5</code></td>
<td align="center"><code>{purple}</code></td>
<td>Color púrpura</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center"><code>CTRL</code>+<code>6</code></td>
<td align="center"><code>CTRL</code>+<code>6</code></td>
<td align="center"><code>{green}</code></td>
<td>Color verde</td>
</tr>
<tr>
<td align="center">31</td>
<td align="center"><code>CTRL</code>+<code>7</code></td>
<td align="center"><code>CTRL</code>+<code>7</code></td>
<td align="center"><code>{blue}</code></td>
<td>Color azul</td>
</tr>
<tr>
<td align="center">158</td>
<td align="center"><code>CTRL</code>+<code>8</code></td>
<td align="center"><code>CTRL</code>+<code>8</code></td>
<td align="center"><code>{yellow}</code></td>
<td>Color amarillo</td>
</tr>
<tr>
<td align="center">129</td>
<td align="center"><code>C=</code>+<code>1</code></td>
<td align="center"><code>TAB</code>+<code>1</code></td>
<td align="center"><code>{orange}</code></td>
<td>Color naranja</td>
</tr>
<tr>
<td align="center">149</td>
<td align="center"><code>C=</code>+<code>2</code></td>
<td align="center"><code>TAB</code>+<code>2</code></td>
<td align="center"><code>{brown}</code></td>
<td>Color marrón</td>
</tr>
<tr>
<td align="center">150</td>
<td align="center"><code>C=</code>+<code>3</code></td>
<td align="center"><code>TAB</code>+<code>3</code></td>
<td align="center"><code>{pink}</code></td>
<td>Color rosa</td>
</tr>
<tr>
<td align="center">151</td>
<td align="center"><code>C=</code>+<code>4</code></td>
<td align="center"><code>TAB</code>+<code>4</code></td>
<td align="center"><code>{dark gray}</code></td>
<td>Color gris oscuro</td>
</tr>
<tr>
<td align="center">152</td>
<td align="center"><code>C=</code>+<code>5</code></td>
<td align="center"><code>TAB</code>+<code>5</code></td>
<td align="center"><code>{gray}</code></td>
<td>Color gris</td>
</tr>
<tr>
<td align="center">153</td>
<td align="center"><code>C=</code>+<code>6</code></td>
<td align="center"><code>TAB</code>+<code>6</code></td>
<td align="center"><code>{light green}</code></td>
<td>Color verde claro</td>
</tr>
<tr>
<td align="center">154</td>
<td align="center"><code>C=</code>+<code>7</code></td>
<td align="center"><code>TAB</code>+<code>7</code></td>
<td align="center"><code>{light blue}</code></td>
<td>Color azul claro</td>
</tr>
<tr>
<td align="center">155</td>
<td align="center"><code>C=</code>+<code>8</code></td>
<td align="center"><code>TAB</code>+<code>8</code></td>
<td align="center"><code>{light gray}</code></td>
<td>Color gris claro</td>
</tr>
</tbody>
</table><p>Por último tenemos los siguientes códigos de escape que nos serán útiles de cara a trabajar con los valores obtenidos por el comando <code>GET</code>:</p>

<table>
<thead>
<tr>
<th align="center">PETSCII</th>
<th align="center">C64</th>
<th align="center">VICE</th>
<th align="center">CBM prg Studio</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">3</td>
<td align="center"><code>RUN/STOP</code></td>
<td align="center"><code>ESC</code></td>
<td align="center"><code>{ct c}</code></td>
</tr>
<tr>
<td align="center">13</td>
<td align="center"><code>RETURN</code></td>
<td align="center"><code>ENTER</code></td>
<td align="center"><code>{return}</code></td>
</tr>
<tr>
<td align="center">32</td>
<td align="center"><code>SPACE</code></td>
<td align="center"><code>ESPACIO</code></td>
<td align="center"><code></code></td>
</tr>
<tr>
<td align="center">133</td>
<td align="center"><code>F1</code></td>
<td align="center"><code>F1</code></td>
<td align="center"><code>{f1}</code></td>
</tr>
<tr>
<td align="center">134</td>
<td align="center"><code>F3</code></td>
<td align="center"><code>F3</code></td>
<td align="center"><code>{f3}</code></td>
</tr>
<tr>
<td align="center">135</td>
<td align="center"><code>F5</code></td>
<td align="center"><code>F5</code></td>
<td align="center"><code>{f5}</code></td>
</tr>
<tr>
<td align="center">136</td>
<td align="center"><code>F7</code></td>
<td align="center"><code>F7</code></td>
<td align="center"><code>{f7}</code></td>
</tr>
<tr>
<td align="center">137</td>
<td align="center"><code>SHIFT</code>+<code>F1</code></td>
<td align="center"><code>F2</code></td>
<td align="center"><code>{f2}</code></td>
</tr>
<tr>
<td align="center">138</td>
<td align="center"><code>SHIFT</code>+<code>F3</code></td>
<td align="center"><code>F4</code></td>
<td align="center"><code>{f4}</code></td>
</tr>
<tr>
<td align="center">139</td>
<td align="center"><code>SHIFT</code>+<code>F5</code></td>
<td align="center"><code>F6</code></td>
<td align="center"><code>{f6}</code></td>
</tr>
<tr>
<td align="center">140</td>
<td align="center"><code>SHIFT</code>+<code>F7</code></td>
<td align="center"><code>F8</code></td>
<td align="center"><code>{f8}</code></td>
</tr>
<tr>
<td align="center">141</td>
<td align="center"><code>SHIFT</code>+<code>RETURN</code></td>
<td align="center"><code>MAYUS</code>+<code>ENTER</code></td>
<td align="center"><code>{141}</code></td>
</tr>
</tbody>
</table><p>El código de escape de <code>RETURN</code> y <code>SHIFT</code>+<code>RETURN</code> tienen el mismo efecto.</p>
<h2 id="abreviaturas">Abreviaturas</h2>

<table>
<thead>
<tr>
<th align="center">Com.</th>
<th align="center">Abr.</th>
<th align="center">Com.</th>
<th align="center">Abr.</th>
<th align="center">Com.</th>
<th align="center">Abr.</th>
<th align="center">Com.</th>
<th align="center">Abr.</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">ABS</td>
<td align="center">A, ⇧+B</td>
<td align="center">AND</td>
<td align="center">A, ⇧+N</td>
<td align="center">ASC</td>
<td align="center">A, ⇧+S</td>
<td align="center">ATN</td>
<td align="center">A, ⇧+T</td>
</tr>
<tr>
<td align="center">CHR$</td>
<td align="center">C, ⇧+H</td>
<td align="center">CLOSE</td>
<td align="center">CL, ⇧+O</td>
<td align="center">CLR</td>
<td align="center">C, ⇧+L</td>
<td align="center">CMD</td>
<td align="center">C, ⇧+M</td>
</tr>
<tr>
<td align="center">CONT</td>
<td align="center">C, ⇧+O</td>
<td align="center">COS</td>
<td align="center"></td>
<td align="center">DATA</td>
<td align="center">D, ⇧+A</td>
<td align="center">DEF</td>
<td align="center">D, ⇧+E</td>
</tr>
<tr>
<td align="center">DIM</td>
<td align="center">D, ⇧+I</td>
<td align="center">END</td>
<td align="center">E, ⇧+N</td>
<td align="center">EXP</td>
<td align="center">E, ⇧+X</td>
<td align="center">FN</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">FOR</td>
<td align="center">F, ⇧+O</td>
<td align="center">FRE</td>
<td align="center">F, ⇧+R</td>
<td align="center">GET</td>
<td align="center">G, ⇧+E</td>
<td align="center">GET#</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">GOSUB</td>
<td align="center">GO, ⇧+S</td>
<td align="center">GOTO</td>
<td align="center">G, ⇧+O</td>
<td align="center">IF</td>
<td align="center"></td>
<td align="center">INPUT</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">INPUT#</td>
<td align="center">I, ⇧+N</td>
<td align="center">INT</td>
<td align="center"></td>
<td align="center">LEFT$</td>
<td align="center">LE, ⇧+F</td>
<td align="center">LEN</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">LET</td>
<td align="center">L, ⇧+E</td>
<td align="center">LIST</td>
<td align="center">L, ⇧+I</td>
<td align="center">LOAD</td>
<td align="center">L, ⇧+O</td>
<td align="center">LOG</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">MID$</td>
<td align="center">M, ⇧+I</td>
<td align="center">NEW</td>
<td align="center"></td>
<td align="center">NEXT</td>
<td align="center">N, ⇧+E</td>
<td align="center">NOT</td>
<td align="center">N, ⇧+O</td>
</tr>
<tr>
<td align="center">ON</td>
<td align="center"></td>
<td align="center">OPEN</td>
<td align="center">O, ⇧+P</td>
<td align="center">OR</td>
<td align="center"></td>
<td align="center">PEEK</td>
<td align="center">P, ⇧+E</td>
</tr>
<tr>
<td align="center">POKE</td>
<td align="center">P, ⇧+O</td>
<td align="center">POS</td>
<td align="center"></td>
<td align="center">PRINT</td>
<td align="center">?</td>
<td align="center">PRINT#</td>
<td align="center">PR</td>
</tr>
<tr>
<td align="center">READ</td>
<td align="center">R, ⇧+E</td>
<td align="center">REM</td>
<td align="center"></td>
<td align="center">RESTORE</td>
<td align="center">RE, ⇧+S</td>
<td align="center">RETURN</td>
<td align="center">RE, ⇧+T</td>
</tr>
<tr>
<td align="center">RIGHT$</td>
<td align="center">R, ⇧+I</td>
<td align="center">RND</td>
<td align="center">R, ⇧+N</td>
<td align="center">RUN</td>
<td align="center">R, ⇧+U</td>
<td align="center">SAVE</td>
<td align="center">S, ⇧+A</td>
</tr>
<tr>
<td align="center">SGN</td>
<td align="center">S, ⇧+G</td>
<td align="center">SIN</td>
<td align="center">S, ⇧+I</td>
<td align="center">SPC</td>
<td align="center">S, ⇧+P</td>
<td align="center">SQR</td>
<td align="center">S, ⇧+Q</td>
</tr>
<tr>
<td align="center">STATUS</td>
<td align="center">ST</td>
<td align="center">STEP</td>
<td align="center">ST, ⇧+E</td>
<td align="center">STOP</td>
<td align="center">S, ⇧+T</td>
<td align="center">STR$</td>
<td align="center">ST, ⇧+R</td>
</tr>
<tr>
<td align="center">SYS</td>
<td align="center">S, ⇧+Y</td>
<td align="center">TAB</td>
<td align="center">T, ⇧+A</td>
<td align="center">TAN</td>
<td align="center"></td>
<td align="center">THEN</td>
<td align="center">T, ⇧+H</td>
</tr>
<tr>
<td align="center">TIME</td>
<td align="center">TI</td>
<td align="center">TIME$</td>
<td align="center">TI$</td>
<td align="center">TO</td>
<td align="center"></td>
<td align="center">USR</td>
<td align="center">U, ⇧+S</td>
</tr>
<tr>
<td align="center">VAL</td>
<td align="center">V, ⇧+A</td>
<td align="center">VERIFY</td>
<td align="center">V, ⇧+E</td>
<td align="center">WAIT</td>
<td align="center">W, ⇧+A</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
    </div>
  </div>
</body>

</html>
